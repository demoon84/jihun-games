(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Vy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ou={exports:{}},ka={};var Up;function Xy(){if(Up)return ka;Up=1;var e=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function n(a,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var _ in o)_!=="key"&&(c[_]=o[_])}else c=o;return o=c.ref,{$$typeof:e,type:a,key:d,ref:o!==void 0?o:null,props:c}}return ka.Fragment=i,ka.jsx=n,ka.jsxs=n,ka}var qp;function $y(){return qp||(qp=1,ou.exports=Xy()),ou.exports}var g=$y(),hu={exports:{}},xe={};var Pp;function Zy(){if(Pp)return xe;Pp=1;var e=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),b=Symbol.iterator;function M(w){return w===null||typeof w!="object"?null:(w=b&&w[b]||w["@@iterator"],typeof w=="function"?w:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,j={};function z(w,k,Y){this.props=w,this.context=k,this.refs=j,this.updater=Y||E}z.prototype.isReactComponent={},z.prototype.setState=function(w,k){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,k,"setState")},z.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function H(){}H.prototype=z.prototype;function Z(w,k,Y){this.props=w,this.context=k,this.refs=j,this.updater=Y||E}var J=Z.prototype=new H;J.constructor=Z,D(J,z.prototype),J.isPureReactComponent=!0;var ae=Array.isArray;function ie(){}var re={H:null,A:null,T:null,S:null},ve=Object.prototype.hasOwnProperty;function le(w,k,Y){var Q=Y.ref;return{$$typeof:e,type:w,key:k,ref:Q!==void 0?Q:null,props:Y}}function _e(w,k){return le(w.type,k,w.props)}function ye(w){return typeof w=="object"&&w!==null&&w.$$typeof===e}function ee(w){var k={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(Y){return k[Y]})}var N=/\/+/g;function X(w,k){return typeof w=="object"&&w!==null&&w.key!=null?ee(""+w.key):k.toString(36)}function te(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(ie,ie):(w.status="pending",w.then(function(k){w.status==="pending"&&(w.status="fulfilled",w.value=k)},function(k){w.status==="pending"&&(w.status="rejected",w.reason=k)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function T(w,k,Y,Q,ne){var oe=typeof w;(oe==="undefined"||oe==="boolean")&&(w=null);var we=!1;if(w===null)we=!0;else switch(oe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(w.$$typeof){case e:case i:we=!0;break;case y:return we=w._init,T(we(w._payload),k,Y,Q,ne)}}if(we)return ne=ne(w),we=Q===""?"."+X(w,0):Q,ae(ne)?(Y="",we!=null&&(Y=we.replace(N,"$&/")+"/"),T(ne,k,Y,"",function(ot){return ot})):ne!=null&&(ye(ne)&&(ne=_e(ne,Y+(ne.key==null||w&&w.key===ne.key?"":(""+ne.key).replace(N,"$&/")+"/")+we)),k.push(ne)),1;we=0;var qe=Q===""?".":Q+":";if(ae(w))for(var Oe=0;Oe<w.length;Oe++)Q=w[Oe],oe=qe+X(Q,Oe),we+=T(Q,k,Y,oe,ne);else if(Oe=M(w),typeof Oe=="function")for(w=Oe.call(w),Oe=0;!(Q=w.next()).done;)Q=Q.value,oe=qe+X(Q,Oe++),we+=T(Q,k,Y,oe,ne);else if(oe==="object"){if(typeof w.then=="function")return T(te(w),k,Y,Q,ne);throw k=String(w),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return we}function G(w,k,Y){if(w==null)return w;var Q=[],ne=0;return T(w,Q,"","",function(oe){return k.call(Y,oe,ne++)}),Q}function W(w){if(w._status===-1){var k=w._result;k=k(),k.then(function(Y){(w._status===0||w._status===-1)&&(w._status=1,w._result=Y)},function(Y){(w._status===0||w._status===-1)&&(w._status=2,w._result=Y)}),w._status===-1&&(w._status=0,w._result=k)}if(w._status===1)return w._result.default;throw w._result}var ce=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},U={map:G,forEach:function(w,k,Y){G(w,function(){k.apply(this,arguments)},Y)},count:function(w){var k=0;return G(w,function(){k++}),k},toArray:function(w){return G(w,function(k){return k})||[]},only:function(w){if(!ye(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return xe.Activity=S,xe.Children=U,xe.Component=z,xe.Fragment=n,xe.Profiler=o,xe.PureComponent=Z,xe.StrictMode=a,xe.Suspense=m,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,xe.__COMPILER_RUNTIME={__proto__:null,c:function(w){return re.H.useMemoCache(w)}},xe.cache=function(w){return function(){return w.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(w,k,Y){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var Q=D({},w.props),ne=w.key;if(k!=null)for(oe in k.key!==void 0&&(ne=""+k.key),k)!ve.call(k,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&k.ref===void 0||(Q[oe]=k[oe]);var oe=arguments.length-2;if(oe===1)Q.children=Y;else if(1<oe){for(var we=Array(oe),qe=0;qe<oe;qe++)we[qe]=arguments[qe+2];Q.children=we}return le(w.type,ne,Q)},xe.createContext=function(w){return w={$$typeof:d,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:c,_context:w},w},xe.createElement=function(w,k,Y){var Q,ne={},oe=null;if(k!=null)for(Q in k.key!==void 0&&(oe=""+k.key),k)ve.call(k,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ne[Q]=k[Q]);var we=arguments.length-2;if(we===1)ne.children=Y;else if(1<we){for(var qe=Array(we),Oe=0;Oe<we;Oe++)qe[Oe]=arguments[Oe+2];ne.children=qe}if(w&&w.defaultProps)for(Q in we=w.defaultProps,we)ne[Q]===void 0&&(ne[Q]=we[Q]);return le(w,oe,ne)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(w){return{$$typeof:_,render:w}},xe.isValidElement=ye,xe.lazy=function(w){return{$$typeof:y,_payload:{_status:-1,_result:w},_init:W}},xe.memo=function(w,k){return{$$typeof:f,type:w,compare:k===void 0?null:k}},xe.startTransition=function(w){var k=re.T,Y={};re.T=Y;try{var Q=w(),ne=re.S;ne!==null&&ne(Y,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(ie,ce)}catch(oe){ce(oe)}finally{k!==null&&Y.types!==null&&(k.types=Y.types),re.T=k}},xe.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},xe.use=function(w){return re.H.use(w)},xe.useActionState=function(w,k,Y){return re.H.useActionState(w,k,Y)},xe.useCallback=function(w,k){return re.H.useCallback(w,k)},xe.useContext=function(w){return re.H.useContext(w)},xe.useDebugValue=function(){},xe.useDeferredValue=function(w,k){return re.H.useDeferredValue(w,k)},xe.useEffect=function(w,k){return re.H.useEffect(w,k)},xe.useEffectEvent=function(w){return re.H.useEffectEvent(w)},xe.useId=function(){return re.H.useId()},xe.useImperativeHandle=function(w,k,Y){return re.H.useImperativeHandle(w,k,Y)},xe.useInsertionEffect=function(w,k){return re.H.useInsertionEffect(w,k)},xe.useLayoutEffect=function(w,k){return re.H.useLayoutEffect(w,k)},xe.useMemo=function(w,k){return re.H.useMemo(w,k)},xe.useOptimistic=function(w,k){return re.H.useOptimistic(w,k)},xe.useReducer=function(w,k,Y){return re.H.useReducer(w,k,Y)},xe.useRef=function(w){return re.H.useRef(w)},xe.useState=function(w){return re.H.useState(w)},xe.useSyncExternalStore=function(w,k,Y){return re.H.useSyncExternalStore(w,k,Y)},xe.useTransition=function(){return re.H.useTransition()},xe.version="19.2.4",xe}var Yp;function Ed(){return Yp||(Yp=1,hu.exports=Zy()),hu.exports}var C=Ed(),cu={exports:{}},Ra={},uu={exports:{}},du={};var Gp;function Qy(){return Gp||(Gp=1,(function(e){function i(T,G){var W=T.length;T.push(G);e:for(;0<W;){var ce=W-1>>>1,U=T[ce];if(0<o(U,G))T[ce]=G,T[W]=U,W=ce;else break e}}function n(T){return T.length===0?null:T[0]}function a(T){if(T.length===0)return null;var G=T[0],W=T.pop();if(W!==G){T[0]=W;e:for(var ce=0,U=T.length,w=U>>>1;ce<w;){var k=2*(ce+1)-1,Y=T[k],Q=k+1,ne=T[Q];if(0>o(Y,W))Q<U&&0>o(ne,Y)?(T[ce]=ne,T[Q]=W,ce=Q):(T[ce]=Y,T[k]=W,ce=k);else if(Q<U&&0>o(ne,W))T[ce]=ne,T[Q]=W,ce=Q;else break e}}return G}function o(T,G){var W=T.sortIndex-G.sortIndex;return W!==0?W:T.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,_=d.now();e.unstable_now=function(){return d.now()-_}}var m=[],f=[],y=1,S=null,b=3,M=!1,E=!1,D=!1,j=!1,z=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function J(T){for(var G=n(f);G!==null;){if(G.callback===null)a(f);else if(G.startTime<=T)a(f),G.sortIndex=G.expirationTime,i(m,G);else break;G=n(f)}}function ae(T){if(D=!1,J(T),!E)if(n(m)!==null)E=!0,ie||(ie=!0,ee());else{var G=n(f);G!==null&&te(ae,G.startTime-T)}}var ie=!1,re=-1,ve=5,le=-1;function _e(){return j?!0:!(e.unstable_now()-le<ve)}function ye(){if(j=!1,ie){var T=e.unstable_now();le=T;var G=!0;try{e:{E=!1,D&&(D=!1,H(re),re=-1),M=!0;var W=b;try{t:{for(J(T),S=n(m);S!==null&&!(S.expirationTime>T&&_e());){var ce=S.callback;if(typeof ce=="function"){S.callback=null,b=S.priorityLevel;var U=ce(S.expirationTime<=T);if(T=e.unstable_now(),typeof U=="function"){S.callback=U,J(T),G=!0;break t}S===n(m)&&a(m),J(T)}else a(m);S=n(m)}if(S!==null)G=!0;else{var w=n(f);w!==null&&te(ae,w.startTime-T),G=!1}}break e}finally{S=null,b=W,M=!1}G=void 0}}finally{G?ee():ie=!1}}}var ee;if(typeof Z=="function")ee=function(){Z(ye)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,X=N.port2;N.port1.onmessage=ye,ee=function(){X.postMessage(null)}}else ee=function(){z(ye,0)};function te(T,G){re=z(function(){T(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(T){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var W=b;b=G;try{return T()}finally{b=W}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(T,G){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var W=b;b=T;try{return G()}finally{b=W}},e.unstable_scheduleCallback=function(T,G,W){var ce=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ce+W:ce):W=ce,T){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=W+U,T={id:y++,callback:G,priorityLevel:T,startTime:W,expirationTime:U,sortIndex:-1},W>ce?(T.sortIndex=W,i(f,T),n(m)===null&&T===n(f)&&(D?(H(re),re=-1):D=!0,te(ae,W-ce))):(T.sortIndex=U,i(m,T),E||M||(E=!0,ie||(ie=!0,ee()))),T},e.unstable_shouldYield=_e,e.unstable_wrapCallback=function(T){var G=b;return function(){var W=b;b=G;try{return T.apply(this,arguments)}finally{b=W}}}})(du)),du}var Wp;function Jy(){return Wp||(Wp=1,uu.exports=Qy()),uu.exports}var fu={exports:{}},Yt={};var Kp;function eb(){if(Kp)return Yt;Kp=1;var e=Ed();function i(m){var f="https://react.dev/errors/"+m;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(i(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(m,f,y){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:m,containerInfo:f,implementation:y}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(m,f){if(m==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Yt.createPortal=function(m,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(i(299));return c(m,f,null,y)},Yt.flushSync=function(m){var f=d.T,y=a.p;try{if(d.T=null,a.p=2,m)return m()}finally{d.T=f,a.p=y,a.d.f()}},Yt.preconnect=function(m,f){typeof m=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,a.d.C(m,f))},Yt.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},Yt.preinit=function(m,f){if(typeof m=="string"&&f&&typeof f.as=="string"){var y=f.as,S=_(y,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,M=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?a.d.S(m,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:S,integrity:b,fetchPriority:M}):y==="script"&&a.d.X(m,{crossOrigin:S,integrity:b,fetchPriority:M,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Yt.preinitModule=function(m,f){if(typeof m=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=_(f.as,f.crossOrigin);a.d.M(m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&a.d.M(m)},Yt.preload=function(m,f){if(typeof m=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,S=_(y,f.crossOrigin);a.d.L(m,y,{crossOrigin:S,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Yt.preloadModule=function(m,f){if(typeof m=="string")if(f){var y=_(f.as,f.crossOrigin);a.d.m(m,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else a.d.m(m)},Yt.requestFormReset=function(m){a.d.r(m)},Yt.unstable_batchedUpdates=function(m,f){return m(f)},Yt.useFormState=function(m,f,y){return d.H.useFormState(m,f,y)},Yt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Yt.version="19.2.4",Yt}var Ip;function tb(){if(Ip)return fu.exports;Ip=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),fu.exports=eb(),fu.exports}var Fp;function ib(){if(Fp)return Ra;Fp=1;var e=Jy(),i=Ed(),n=tb();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function _(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(a(188))}function f(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(a(188));return s!==t?null:t}for(var r=t,l=s;;){var h=r.return;if(h===null)break;var u=h.alternate;if(u===null){if(l=h.return,l!==null){r=l;continue}break}if(h.child===u.child){for(u=h.child;u;){if(u===r)return m(h),t;if(u===l)return m(h),s;u=u.sibling}throw Error(a(188))}if(r.return!==l.return)r=h,l=u;else{for(var p=!1,v=h.child;v;){if(v===r){p=!0,r=h,l=u;break}if(v===l){p=!0,l=h,r=u;break}v=v.sibling}if(!p){for(v=u.child;v;){if(v===r){p=!0,r=u,l=h;break}if(v===l){p=!0,l=u,r=h;break}v=v.sibling}if(!p)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var S=Object.assign,b=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),_e=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function ee(t){return t===null||typeof t!="object"?null:(t=ye&&t[ye]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function X(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case D:return"Fragment";case z:return"Profiler";case j:return"StrictMode";case ae:return"Suspense";case ie:return"SuspenseList";case le:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case Z:return t.displayName||"Context";case H:return(t._context.displayName||"Context")+".Consumer";case J:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case re:return s=t.displayName||null,s!==null?s:X(t.type)||"Memo";case ve:s=t._payload,t=t._init;try{return X(t(s))}catch{}}return null}var te=Array.isArray,T=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ce=[],U=-1;function w(t){return{current:t}}function k(t){0>U||(t.current=ce[U],ce[U]=null,U--)}function Y(t,s){U++,ce[U]=t.current,t.current=s}var Q=w(null),ne=w(null),oe=w(null),we=w(null);function qe(t,s){switch(Y(oe,s),Y(ne,t),Y(Q,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?op(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=op(s),t=hp(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}k(Q),Y(Q,t)}function Oe(){k(Q),k(ne),k(oe)}function ot(t){t.memoizedState!==null&&Y(we,t);var s=Q.current,r=hp(s,t.type);s!==r&&(Y(ne,t),Y(Q,r))}function yt(t){ne.current===t&&(k(Q),k(ne)),we.current===t&&(k(we),wa._currentValue=W)}var bt,ke;function Wt(t){if(bt===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);bt=s&&s[1]||"",ke=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bt+t+ke}var Nr=!1;function An(t,s){if(!t||Nr)return"";Nr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(P){var O=P}Reflect.construct(t,[],F)}else{try{F.call()}catch(P){O=P}t.call(F.prototype)}}else{try{throw Error()}catch(P){O=P}(F=t())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(P){if(P&&O&&typeof P.stack=="string")return[P.stack,O.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),p=u[0],v=u[1];if(p&&v){var x=p.split(`
`),L=v.split(`
`);for(h=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(l===x.length||h===L.length)for(l=x.length-1,h=L.length-1;1<=l&&0<=h&&x[l]!==L[h];)h--;for(;1<=l&&0<=h;l--,h--)if(x[l]!==L[h]){if(l!==1||h!==1)do if(l--,h--,0>h||x[l]!==L[h]){var K=`
`+x[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=h);break}}}finally{Nr=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Wt(r):""}function Nn(t,s){switch(t.tag){case 26:case 27:case 5:return Wt(t.type);case 16:return Wt("Lazy");case 13:return t.child!==s&&s!==null?Wt("Suspense Fallback"):Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 15:return An(t.type,!1);case 11:return An(t.type.render,!1);case 1:return An(t.type,!0);case 31:return Wt("Activity");default:return""}}function Bn(t){try{var s="",r=null;do s+=Nn(t,r),r=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Br=Object.prototype.hasOwnProperty,Ln=e.unstable_scheduleCallback,sr=e.unstable_cancelCallback,el=e.unstable_shouldYield,st=e.unstable_requestPaint,Rt=e.unstable_now,Lr=e.unstable_getCurrentPriorityLevel,On=e.unstable_ImmediatePriority,tl=e.unstable_UserBlockingPriority,Or=e.unstable_NormalPriority,zn=e.unstable_LowPriority,il=e.unstable_IdlePriority,Vo=e.log,Xo=e.unstable_setDisableYieldValue,Xi=null,Kt=null;function Oi(t){if(typeof Vo=="function"&&Xo(t),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Xi,t)}catch{}}var q=Math.clz32?Math.clz32:Te,$=Math.log,me=Math.LN2;function Te(t){return t>>>=0,t===0?32:31-($(t)/me|0)|0}var ue=256,ge=262144,Ue=4194304;function Ve(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ht(t,s,r){var l=t.pendingLanes;if(l===0)return 0;var h=0,u=t.suspendedLanes,p=t.pingedLanes;t=t.warmLanes;var v=l&134217727;return v!==0?(l=v&~u,l!==0?h=Ve(l):(p&=v,p!==0?h=Ve(p):r||(r=v&~t,r!==0&&(h=Ve(r))))):(v=l&~u,v!==0?h=Ve(v):p!==0?h=Ve(p):r||(r=l&~t,r!==0&&(h=Ve(r)))),h===0?0:s!==0&&s!==h&&(s&u)===0&&(u=h&-h,r=s&-s,u>=r||u===32&&(r&4194048)!==0)?s:h}function ct(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function mi(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $i(){var t=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),t}function zi(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Cs(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $o(t,s,r,l,h,u){var p=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var v=t.entanglements,x=t.expirationTimes,L=t.hiddenUpdates;for(r=p&~r;0<r;){var K=31-q(r),F=1<<K;v[K]=0,x[K]=-1;var O=L[K];if(O!==null)for(L[K]=null,K=0;K<O.length;K++){var P=O[K];P!==null&&(P.lane&=-536870913)}r&=~F}l!==0&&Gd(t,l,0),u!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=u&~(p&~s))}function Gd(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-q(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function Wd(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var l=31-q(r),h=1<<l;h&s|t[l]&s&&(t[l]|=s),r&=~h}}function Kd(t,s){var r=s&-s;return r=(r&42)!==0?1:Zo(r),(r&(t.suspendedLanes|s))!==0?0:r}function Zo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Qo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Id(){var t=G.p;return t!==0?t:(t=window.event,t===void 0?32:Np(t.type))}function Fd(t,s){var r=G.p;try{return G.p=t,s()}finally{G.p=r}}var Es=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Es,Zt="__reactProps$"+Es,zr="__reactContainer$"+Es,Jo="__reactEvents$"+Es,H0="__reactListeners$"+Es,j0="__reactHandles$"+Es,Vd="__reactResources$"+Es,Hn="__reactMarker$"+Es;function eh(t){delete t[Ot],delete t[Zt],delete t[Jo],delete t[H0],delete t[j0]}function Hr(t){var s=t[Ot];if(s)return s;for(var r=t.parentNode;r;){if(s=r[zr]||r[Ot]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=pp(t);t!==null;){if(r=t[Ot])return r;t=pp(t)}return s}t=r,r=t.parentNode}return null}function jr(t){if(t=t[Ot]||t[zr]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function jn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function Ur(t){var s=t[Vd];return s||(s=t[Vd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mt(t){t[Hn]=!0}var Xd=new Set,$d={};function rr(t,s){qr(t,s),qr(t+"Capture",s)}function qr(t,s){for($d[t]=s,t=0;t<s.length;t++)Xd.add(s[t])}var U0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zd={},Qd={};function q0(t){return Br.call(Qd,t)?!0:Br.call(Zd,t)?!1:U0.test(t)?Qd[t]=!0:(Zd[t]=!0,!1)}function sl(t,s,r){if(q0(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function rl(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function Zi(t,s,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+l)}}function pi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jd(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function P0(t,s,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,u=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(p){r=""+p,u.call(this,p)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(p){r=""+p},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function th(t){if(!t._valueTracker){var s=Jd(t)?"checked":"value";t._valueTracker=P0(t,s,""+t[s])}}function ef(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),l="";return t&&(l=Jd(t)?t.checked?"true":"false":t.value),t=l,t!==r?(s.setValue(t),!0):!1}function nl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Y0=/[\n"\\]/g;function gi(t){return t.replace(Y0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ih(t,s,r,l,h,u,p,v){t.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?t.type=p:t.removeAttribute("type"),s!=null?p==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+pi(s)):t.value!==""+pi(s)&&(t.value=""+pi(s)):p!=="submit"&&p!=="reset"||t.removeAttribute("value"),s!=null?sh(t,p,pi(s)):r!=null?sh(t,p,pi(r)):l!=null&&t.removeAttribute("value"),h==null&&u!=null&&(t.defaultChecked=!!u),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.name=""+pi(v):t.removeAttribute("name")}function tf(t,s,r,l,h,u,p,v){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(t.type=u),s!=null||r!=null){if(!(u!=="submit"&&u!=="reset"||s!=null)){th(t);return}r=r!=null?""+pi(r):"",s=s!=null?""+pi(s):r,v||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=v?t.checked:!!l,t.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.name=p),th(t)}function sh(t,s,r){s==="number"&&nl(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Pr(t,s,r,l){if(t=t.options,s){s={};for(var h=0;h<r.length;h++)s["$"+r[h]]=!0;for(r=0;r<t.length;r++)h=s.hasOwnProperty("$"+t[r].value),t[r].selected!==h&&(t[r].selected=h),h&&l&&(t[r].defaultSelected=!0)}else{for(r=""+pi(r),s=null,h=0;h<t.length;h++){if(t[h].value===r){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function sf(t,s,r){if(s!=null&&(s=""+pi(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+pi(r):""}function rf(t,s,r,l){if(s==null){if(l!=null){if(r!=null)throw Error(a(92));if(te(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),s=r}r=pi(s),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),th(t)}function Yr(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var G0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nf(t,s,r){var l=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,r):typeof r!="number"||r===0||G0.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function af(t,s,r){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&r[h]!==l&&nf(t,h,l)}else for(var u in s)s.hasOwnProperty(u)&&nf(t,u,s[u])}function rh(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),K0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(t){return K0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Qi(){}var nh=null;function ah(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gr=null,Wr=null;function lf(t){var s=jr(t);if(s&&(t=s.stateNode)){var r=t[Zt]||null;e:switch(t=s.stateNode,s.type){case"input":if(ih(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+gi(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var l=r[s];if(l!==t&&l.form===t.form){var h=l[Zt]||null;if(!h)throw Error(a(90));ih(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<r.length;s++)l=r[s],l.form===t.form&&ef(l)}break e;case"textarea":sf(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&Pr(t,!!r.multiple,s,!1)}}}var lh=!1;function of(t,s,r){if(lh)return t(s,r);lh=!0;try{var l=t(s);return l}finally{if(lh=!1,(Gr!==null||Wr!==null)&&(Fl(),Gr&&(s=Gr,t=Wr,Wr=Gr=null,lf(s),t)))for(s=0;s<t.length;s++)lf(t[s])}}function Un(t,s){var r=t.stateNode;if(r===null)return null;var l=r[Zt]||null;if(l===null)return null;r=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,s,typeof r));return r}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=!1;if(Ji)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){oh=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{oh=!1}var ks=null,hh=null,ll=null;function hf(){if(ll)return ll;var t,s=hh,r=s.length,l,h="value"in ks?ks.value:ks.textContent,u=h.length;for(t=0;t<r&&s[t]===h[t];t++);var p=r-t;for(l=1;l<=p&&s[r-l]===h[u-l];l++);return ll=h.slice(t,1<l?1-l:void 0)}function ol(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function hl(){return!0}function cf(){return!1}function Qt(t){function s(r,l,h,u,p){this._reactName=r,this._targetInst=h,this.type=l,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var v in t)t.hasOwnProperty(v)&&(r=t[v],this[v]=r?r(u):u[v]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?hl:cf,this.isPropagationStopped=cf,this}return S(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),s}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cl=Qt(nr),Pn=S({},nr,{view:0,detail:0}),I0=Qt(Pn),ch,uh,Yn,ul=S({},Pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yn&&(Yn&&t.type==="mousemove"?(ch=t.screenX-Yn.screenX,uh=t.screenY-Yn.screenY):uh=ch=0,Yn=t),ch)},movementY:function(t){return"movementY"in t?t.movementY:uh}}),uf=Qt(ul),F0=S({},ul,{dataTransfer:0}),V0=Qt(F0),X0=S({},Pn,{relatedTarget:0}),dh=Qt(X0),$0=S({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Z0=Qt($0),Q0=S({},nr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),J0=Qt(Q0),eS=S({},nr,{data:0}),df=Qt(eS),tS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rS(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=sS[t])?!!s[t]:!1}function fh(){return rS}var nS=S({},Pn,{key:function(t){if(t.key){var s=tS[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fh,charCode:function(t){return t.type==="keypress"?ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aS=Qt(nS),lS=S({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ff=Qt(lS),oS=S({},Pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fh}),hS=Qt(oS),cS=S({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),uS=Qt(cS),dS=S({},ul,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fS=Qt(dS),_S=S({},nr,{newState:0,oldState:0}),mS=Qt(_S),pS=[9,13,27,32],_h=Ji&&"CompositionEvent"in window,Gn=null;Ji&&"documentMode"in document&&(Gn=document.documentMode);var gS=Ji&&"TextEvent"in window&&!Gn,_f=Ji&&(!_h||Gn&&8<Gn&&11>=Gn),mf=" ",pf=!1;function gf(t,s){switch(t){case"keyup":return pS.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kr=!1;function vS(t,s){switch(t){case"compositionend":return vf(s);case"keypress":return s.which!==32?null:(pf=!0,mf);case"textInput":return t=s.data,t===mf&&pf?null:t;default:return null}}function SS(t,s){if(Kr)return t==="compositionend"||!_h&&gf(t,s)?(t=hf(),ll=hh=ks=null,Kr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _f&&s.locale!=="ko"?null:s.data;default:return null}}var yS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!yS[t.type]:s==="textarea"}function yf(t,s,r,l){Gr?Wr?Wr.push(l):Wr=[l]:Gr=l,s=eo(s,"onChange"),0<s.length&&(r=new cl("onChange","change",null,r,l),t.push({event:r,listeners:s}))}var Wn=null,Kn=null;function bS(t){ip(t,0)}function dl(t){var s=jn(t);if(ef(s))return t}function bf(t,s){if(t==="change")return s}var wf=!1;if(Ji){var mh;if(Ji){var ph="oninput"in document;if(!ph){var xf=document.createElement("div");xf.setAttribute("oninput","return;"),ph=typeof xf.oninput=="function"}mh=ph}else mh=!1;wf=mh&&(!document.documentMode||9<document.documentMode)}function Cf(){Wn&&(Wn.detachEvent("onpropertychange",Ef),Kn=Wn=null)}function Ef(t){if(t.propertyName==="value"&&dl(Kn)){var s=[];yf(s,Kn,t,ah(t)),of(bS,s)}}function wS(t,s,r){t==="focusin"?(Cf(),Wn=s,Kn=r,Wn.attachEvent("onpropertychange",Ef)):t==="focusout"&&Cf()}function xS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dl(Kn)}function CS(t,s){if(t==="click")return dl(s)}function ES(t,s){if(t==="input"||t==="change")return dl(s)}function kS(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ni=typeof Object.is=="function"?Object.is:kS;function In(t,s){if(ni(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),l=Object.keys(s);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var h=r[l];if(!Br.call(s,h)||!ni(t[h],s[h]))return!1}return!0}function kf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rf(t,s){var r=kf(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=s&&l>=s)return{node:r,offset:s-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=kf(r)}}function Mf(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Mf(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Tf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=nl(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=nl(t.document)}return s}function gh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var RS=Ji&&"documentMode"in document&&11>=document.documentMode,Ir=null,vh=null,Fn=null,Sh=!1;function Df(t,s,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sh||Ir==null||Ir!==nl(l)||(l=Ir,"selectionStart"in l&&gh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Fn&&In(Fn,l)||(Fn=l,l=eo(vh,"onSelect"),0<l.length&&(s=new cl("onSelect","select",null,s,r),t.push({event:s,listeners:l}),s.target=Ir)))}function ar(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Fr={animationend:ar("Animation","AnimationEnd"),animationiteration:ar("Animation","AnimationIteration"),animationstart:ar("Animation","AnimationStart"),transitionrun:ar("Transition","TransitionRun"),transitionstart:ar("Transition","TransitionStart"),transitioncancel:ar("Transition","TransitionCancel"),transitionend:ar("Transition","TransitionEnd")},yh={},Af={};Ji&&(Af=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function lr(t){if(yh[t])return yh[t];if(!Fr[t])return t;var s=Fr[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Af)return yh[t]=s[r];return t}var Nf=lr("animationend"),Bf=lr("animationiteration"),Lf=lr("animationstart"),MS=lr("transitionrun"),TS=lr("transitionstart"),DS=lr("transitioncancel"),Of=lr("transitionend"),zf=new Map,bh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bh.push("scrollEnd");function Ni(t,s){zf.set(t,s),rr(s,[t])}var fl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},vi=[],Vr=0,wh=0;function _l(){for(var t=Vr,s=wh=Vr=0;s<t;){var r=vi[s];vi[s++]=null;var l=vi[s];vi[s++]=null;var h=vi[s];vi[s++]=null;var u=vi[s];if(vi[s++]=null,l!==null&&h!==null){var p=l.pending;p===null?h.next=h:(h.next=p.next,p.next=h),l.pending=h}u!==0&&Hf(r,h,u)}}function ml(t,s,r,l){vi[Vr++]=t,vi[Vr++]=s,vi[Vr++]=r,vi[Vr++]=l,wh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xh(t,s,r,l){return ml(t,s,r,l),pl(t)}function or(t,s){return ml(t,null,null,s),pl(t)}function Hf(t,s,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var h=!1,u=t.return;u!==null;)u.childLanes|=r,l=u.alternate,l!==null&&(l.childLanes|=r),u.tag===22&&(t=u.stateNode,t===null||t._visibility&1||(h=!0)),t=u,u=u.return;return t.tag===3?(u=t.stateNode,h&&s!==null&&(h=31-q(r),t=u.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=r|536870912),u):null}function pl(t){if(50<ma)throw ma=0,Nc=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Xr={};function AS(t,s,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(t,s,r,l){return new AS(t,s,r,l)}function Ch(t){return t=t.prototype,!(!t||!t.isReactComponent)}function es(t,s){var r=t.alternate;return r===null?(r=ai(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function jf(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function gl(t,s,r,l,h,u){var p=0;if(l=t,typeof t=="function")Ch(t)&&(p=1);else if(typeof t=="string")p=zy(t,r,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case le:return t=ai(31,r,s,h),t.elementType=le,t.lanes=u,t;case D:return hr(r.children,h,u,s);case j:p=8,h|=24;break;case z:return t=ai(12,r,s,h|2),t.elementType=z,t.lanes=u,t;case ae:return t=ai(13,r,s,h),t.elementType=ae,t.lanes=u,t;case ie:return t=ai(19,r,s,h),t.elementType=ie,t.lanes=u,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:p=10;break e;case H:p=9;break e;case J:p=11;break e;case re:p=14;break e;case ve:p=16,l=null;break e}p=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return s=ai(p,r,s,h),s.elementType=t,s.type=l,s.lanes=u,s}function hr(t,s,r,l){return t=ai(7,t,l,s),t.lanes=r,t}function Eh(t,s,r){return t=ai(6,t,null,s),t.lanes=r,t}function Uf(t){var s=ai(18,null,null,0);return s.stateNode=t,s}function kh(t,s,r){return s=ai(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var qf=new WeakMap;function Si(t,s){if(typeof t=="object"&&t!==null){var r=qf.get(t);return r!==void 0?r:(s={value:t,source:s,stack:Bn(s)},qf.set(t,s),s)}return{value:t,source:s,stack:Bn(s)}}var $r=[],Zr=0,vl=null,Vn=0,yi=[],bi=0,Rs=null,Hi=1,ji="";function ts(t,s){$r[Zr++]=Vn,$r[Zr++]=vl,vl=t,Vn=s}function Pf(t,s,r){yi[bi++]=Hi,yi[bi++]=ji,yi[bi++]=Rs,Rs=t;var l=Hi;t=ji;var h=32-q(l)-1;l&=~(1<<h),r+=1;var u=32-q(s)+h;if(30<u){var p=h-h%5;u=(l&(1<<p)-1).toString(32),l>>=p,h-=p,Hi=1<<32-q(s)+h|r<<h|l,ji=u+t}else Hi=1<<u|r<<h|l,ji=t}function Rh(t){t.return!==null&&(ts(t,1),Pf(t,1,0))}function Mh(t){for(;t===vl;)vl=$r[--Zr],$r[Zr]=null,Vn=$r[--Zr],$r[Zr]=null;for(;t===Rs;)Rs=yi[--bi],yi[bi]=null,ji=yi[--bi],yi[bi]=null,Hi=yi[--bi],yi[bi]=null}function Yf(t,s){yi[bi++]=Hi,yi[bi++]=ji,yi[bi++]=Rs,Hi=s.id,ji=s.overflow,Rs=t}var zt=null,Xe=null,Le=!1,Ms=null,wi=!1,Th=Error(a(519));function Ts(t){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xn(Si(s,t)),Th}function Gf(t){var s=t.stateNode,r=t.type,l=t.memoizedProps;switch(s[Ot]=t,s[Zt]=l,r){case"dialog":Ae("cancel",s),Ae("close",s);break;case"iframe":case"object":case"embed":Ae("load",s);break;case"video":case"audio":for(r=0;r<ga.length;r++)Ae(ga[r],s);break;case"source":Ae("error",s);break;case"img":case"image":case"link":Ae("error",s),Ae("load",s);break;case"details":Ae("toggle",s);break;case"input":Ae("invalid",s),tf(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ae("invalid",s);break;case"textarea":Ae("invalid",s),rf(s,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||l.suppressHydrationWarning===!0||ap(s.textContent,r)?(l.popover!=null&&(Ae("beforetoggle",s),Ae("toggle",s)),l.onScroll!=null&&Ae("scroll",s),l.onScrollEnd!=null&&Ae("scrollend",s),l.onClick!=null&&(s.onclick=Qi),s=!0):s=!1,s||Ts(t,!0)}function Wf(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 31:case 13:wi=!1;return;case 27:case 3:wi=!0;return;default:zt=zt.return}}function Qr(t){if(t!==zt)return!1;if(!Le)return Wf(t),Le=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Fc(t.type,t.memoizedProps)),r=!r),r&&Xe&&Ts(t),Wf(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Xe=mp(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Xe=mp(t)}else s===27?(s=Xe,Gs(t.type)?(t=Qc,Qc=null,Xe=t):Xe=s):Xe=zt?Ci(t.stateNode.nextSibling):null;return!0}function cr(){Xe=zt=null,Le=!1}function Dh(){var t=Ms;return t!==null&&(ii===null?ii=t:ii.push.apply(ii,t),Ms=null),t}function Xn(t){Ms===null?Ms=[t]:Ms.push(t)}var Ah=w(null),ur=null,is=null;function Ds(t,s,r){Y(Ah,s._currentValue),s._currentValue=r}function ss(t){t._currentValue=Ah.current,k(Ah)}function Nh(t,s,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===r)break;t=t.return}}function Bh(t,s,r,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var u=h.dependencies;if(u!==null){var p=h.child;u=u.firstContext;e:for(;u!==null;){var v=u;u=h;for(var x=0;x<s.length;x++)if(v.context===s[x]){u.lanes|=r,v=u.alternate,v!==null&&(v.lanes|=r),Nh(u.return,r,t),l||(p=null);break e}u=v.next}}else if(h.tag===18){if(p=h.return,p===null)throw Error(a(341));p.lanes|=r,u=p.alternate,u!==null&&(u.lanes|=r),Nh(p,r,t),p=null}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===t){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}}function Jr(t,s,r,l){t=null;for(var h=s,u=!1;h!==null;){if(!u){if((h.flags&524288)!==0)u=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var p=h.alternate;if(p===null)throw Error(a(387));if(p=p.memoizedProps,p!==null){var v=h.type;ni(h.pendingProps.value,p.value)||(t!==null?t.push(v):t=[v])}}else if(h===we.current){if(p=h.alternate,p===null)throw Error(a(387));p.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(wa):t=[wa])}h=h.return}t!==null&&Bh(s,t,r,l),s.flags|=262144}function Sl(t){for(t=t.firstContext;t!==null;){if(!ni(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function dr(t){ur=t,is=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ht(t){return Kf(ur,t)}function yl(t,s){return ur===null&&dr(t),Kf(t,s)}function Kf(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},is===null){if(t===null)throw Error(a(308));is=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else is=is.next=s;return r}var NS=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},BS=e.unstable_scheduleCallback,LS=e.unstable_NormalPriority,_t={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lh(){return{controller:new NS,data:new Map,refCount:0}}function $n(t){t.refCount--,t.refCount===0&&BS(LS,function(){t.controller.abort()})}var Zn=null,Oh=0,en=0,tn=null;function OS(t,s){if(Zn===null){var r=Zn=[];Oh=0,en=jc(),tn={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Oh++,s.then(If,If),s}function If(){if(--Oh===0&&Zn!==null){tn!==null&&(tn.status="fulfilled");var t=Zn;Zn=null,en=0,tn=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function zS(t,s){var r=[],l={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<r.length;h++)(0,r[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),l}var Ff=T.S;T.S=function(t,s){Dm=Rt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&OS(t,s),Ff!==null&&Ff(t,s)};var fr=w(null);function zh(){var t=fr.current;return t!==null?t:Fe.pooledCache}function bl(t,s){s===null?Y(fr,fr.current):Y(fr,s.pool)}function Vf(){var t=zh();return t===null?null:{parent:_t._currentValue,pool:t}}var sn=Error(a(460)),Hh=Error(a(474)),wl=Error(a(542)),xl={then:function(){}};function Xf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $f(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(Qi,Qi),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Qf(t),t;default:if(typeof s.status=="string")s.then(Qi,Qi);else{if(t=Fe,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Qf(t),t}throw mr=s,sn}}function _r(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(mr=r,sn):r}}var mr=null;function Zf(){if(mr===null)throw Error(a(459));var t=mr;return mr=null,t}function Qf(t){if(t===sn||t===wl)throw Error(a(483))}var rn=null,Qn=0;function Cl(t){var s=Qn;return Qn+=1,rn===null&&(rn=[]),$f(rn,t,s)}function Jn(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function El(t,s){throw s.$$typeof===b?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Jf(t){function s(A,R){if(t){var B=A.deletions;B===null?(A.deletions=[R],A.flags|=16):B.push(R)}}function r(A,R){if(!t)return null;for(;R!==null;)s(A,R),R=R.sibling;return null}function l(A){for(var R=new Map;A!==null;)A.key!==null?R.set(A.key,A):R.set(A.index,A),A=A.sibling;return R}function h(A,R){return A=es(A,R),A.index=0,A.sibling=null,A}function u(A,R,B){return A.index=B,t?(B=A.alternate,B!==null?(B=B.index,B<R?(A.flags|=67108866,R):B):(A.flags|=67108866,R)):(A.flags|=1048576,R)}function p(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function v(A,R,B,I){return R===null||R.tag!==6?(R=Eh(B,A.mode,I),R.return=A,R):(R=h(R,B),R.return=A,R)}function x(A,R,B,I){var pe=B.type;return pe===D?K(A,R,B.props.children,I,B.key):R!==null&&(R.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===ve&&_r(pe)===R.type)?(R=h(R,B.props),Jn(R,B),R.return=A,R):(R=gl(B.type,B.key,B.props,null,A.mode,I),Jn(R,B),R.return=A,R)}function L(A,R,B,I){return R===null||R.tag!==4||R.stateNode.containerInfo!==B.containerInfo||R.stateNode.implementation!==B.implementation?(R=kh(B,A.mode,I),R.return=A,R):(R=h(R,B.children||[]),R.return=A,R)}function K(A,R,B,I,pe){return R===null||R.tag!==7?(R=hr(B,A.mode,I,pe),R.return=A,R):(R=h(R,B),R.return=A,R)}function F(A,R,B){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Eh(""+R,A.mode,B),R.return=A,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case M:return B=gl(R.type,R.key,R.props,null,A.mode,B),Jn(B,R),B.return=A,B;case E:return R=kh(R,A.mode,B),R.return=A,R;case ve:return R=_r(R),F(A,R,B)}if(te(R)||ee(R))return R=hr(R,A.mode,B,null),R.return=A,R;if(typeof R.then=="function")return F(A,Cl(R),B);if(R.$$typeof===Z)return F(A,yl(A,R),B);El(A,R)}return null}function O(A,R,B,I){var pe=R!==null?R.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return pe!==null?null:v(A,R,""+B,I);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case M:return B.key===pe?x(A,R,B,I):null;case E:return B.key===pe?L(A,R,B,I):null;case ve:return B=_r(B),O(A,R,B,I)}if(te(B)||ee(B))return pe!==null?null:K(A,R,B,I,null);if(typeof B.then=="function")return O(A,R,Cl(B),I);if(B.$$typeof===Z)return O(A,R,yl(A,B),I);El(A,B)}return null}function P(A,R,B,I,pe){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return A=A.get(B)||null,v(R,A,""+I,pe);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case M:return A=A.get(I.key===null?B:I.key)||null,x(R,A,I,pe);case E:return A=A.get(I.key===null?B:I.key)||null,L(R,A,I,pe);case ve:return I=_r(I),P(A,R,B,I,pe)}if(te(I)||ee(I))return A=A.get(B)||null,K(R,A,I,pe,null);if(typeof I.then=="function")return P(A,R,B,Cl(I),pe);if(I.$$typeof===Z)return P(A,R,B,yl(R,I),pe);El(R,I)}return null}function de(A,R,B,I){for(var pe=null,ze=null,fe=R,Ee=R=0,Be=null;fe!==null&&Ee<B.length;Ee++){fe.index>Ee?(Be=fe,fe=null):Be=fe.sibling;var He=O(A,fe,B[Ee],I);if(He===null){fe===null&&(fe=Be);break}t&&fe&&He.alternate===null&&s(A,fe),R=u(He,R,Ee),ze===null?pe=He:ze.sibling=He,ze=He,fe=Be}if(Ee===B.length)return r(A,fe),Le&&ts(A,Ee),pe;if(fe===null){for(;Ee<B.length;Ee++)fe=F(A,B[Ee],I),fe!==null&&(R=u(fe,R,Ee),ze===null?pe=fe:ze.sibling=fe,ze=fe);return Le&&ts(A,Ee),pe}for(fe=l(fe);Ee<B.length;Ee++)Be=P(fe,A,Ee,B[Ee],I),Be!==null&&(t&&Be.alternate!==null&&fe.delete(Be.key===null?Ee:Be.key),R=u(Be,R,Ee),ze===null?pe=Be:ze.sibling=Be,ze=Be);return t&&fe.forEach(function(Vs){return s(A,Vs)}),Le&&ts(A,Ee),pe}function Se(A,R,B,I){if(B==null)throw Error(a(151));for(var pe=null,ze=null,fe=R,Ee=R=0,Be=null,He=B.next();fe!==null&&!He.done;Ee++,He=B.next()){fe.index>Ee?(Be=fe,fe=null):Be=fe.sibling;var Vs=O(A,fe,He.value,I);if(Vs===null){fe===null&&(fe=Be);break}t&&fe&&Vs.alternate===null&&s(A,fe),R=u(Vs,R,Ee),ze===null?pe=Vs:ze.sibling=Vs,ze=Vs,fe=Be}if(He.done)return r(A,fe),Le&&ts(A,Ee),pe;if(fe===null){for(;!He.done;Ee++,He=B.next())He=F(A,He.value,I),He!==null&&(R=u(He,R,Ee),ze===null?pe=He:ze.sibling=He,ze=He);return Le&&ts(A,Ee),pe}for(fe=l(fe);!He.done;Ee++,He=B.next())He=P(fe,A,Ee,He.value,I),He!==null&&(t&&He.alternate!==null&&fe.delete(He.key===null?Ee:He.key),R=u(He,R,Ee),ze===null?pe=He:ze.sibling=He,ze=He);return t&&fe.forEach(function(Fy){return s(A,Fy)}),Le&&ts(A,Ee),pe}function Ke(A,R,B,I){if(typeof B=="object"&&B!==null&&B.type===D&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case M:e:{for(var pe=B.key;R!==null;){if(R.key===pe){if(pe=B.type,pe===D){if(R.tag===7){r(A,R.sibling),I=h(R,B.props.children),I.return=A,A=I;break e}}else if(R.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===ve&&_r(pe)===R.type){r(A,R.sibling),I=h(R,B.props),Jn(I,B),I.return=A,A=I;break e}r(A,R);break}else s(A,R);R=R.sibling}B.type===D?(I=hr(B.props.children,A.mode,I,B.key),I.return=A,A=I):(I=gl(B.type,B.key,B.props,null,A.mode,I),Jn(I,B),I.return=A,A=I)}return p(A);case E:e:{for(pe=B.key;R!==null;){if(R.key===pe)if(R.tag===4&&R.stateNode.containerInfo===B.containerInfo&&R.stateNode.implementation===B.implementation){r(A,R.sibling),I=h(R,B.children||[]),I.return=A,A=I;break e}else{r(A,R);break}else s(A,R);R=R.sibling}I=kh(B,A.mode,I),I.return=A,A=I}return p(A);case ve:return B=_r(B),Ke(A,R,B,I)}if(te(B))return de(A,R,B,I);if(ee(B)){if(pe=ee(B),typeof pe!="function")throw Error(a(150));return B=pe.call(B),Se(A,R,B,I)}if(typeof B.then=="function")return Ke(A,R,Cl(B),I);if(B.$$typeof===Z)return Ke(A,R,yl(A,B),I);El(A,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,R!==null&&R.tag===6?(r(A,R.sibling),I=h(R,B),I.return=A,A=I):(r(A,R),I=Eh(B,A.mode,I),I.return=A,A=I),p(A)):r(A,R)}return function(A,R,B,I){try{Qn=0;var pe=Ke(A,R,B,I);return rn=null,pe}catch(fe){if(fe===sn||fe===wl)throw fe;var ze=ai(29,fe,null,A.mode);return ze.lanes=I,ze.return=A,ze}}}var pr=Jf(!0),e_=Jf(!1),As=!1;function jh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ns(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(t,s,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(je&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=pl(t),Hf(t,null,r),s}return ml(t,l,s,r),pl(t)}function ea(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,r|=l,s.lanes=r,Wd(t,r)}}function qh(t,s){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var h=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var p={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};u===null?h=u=p:u=u.next=p,r=r.next}while(r!==null);u===null?h=u=s:u=u.next=s}else h=u=s;r={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var Ph=!1;function ta(){if(Ph){var t=tn;if(t!==null)throw t}}function ia(t,s,r,l){Ph=!1;var h=t.updateQueue;As=!1;var u=h.firstBaseUpdate,p=h.lastBaseUpdate,v=h.shared.pending;if(v!==null){h.shared.pending=null;var x=v,L=x.next;x.next=null,p===null?u=L:p.next=L,p=x;var K=t.alternate;K!==null&&(K=K.updateQueue,v=K.lastBaseUpdate,v!==p&&(v===null?K.firstBaseUpdate=L:v.next=L,K.lastBaseUpdate=x))}if(u!==null){var F=h.baseState;p=0,K=L=x=null,v=u;do{var O=v.lane&-536870913,P=O!==v.lane;if(P?(Ne&O)===O:(l&O)===O){O!==0&&O===en&&(Ph=!0),K!==null&&(K=K.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var de=t,Se=v;O=s;var Ke=r;switch(Se.tag){case 1:if(de=Se.payload,typeof de=="function"){F=de.call(Ke,F,O);break e}F=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Se.payload,O=typeof de=="function"?de.call(Ke,F,O):de,O==null)break e;F=S({},F,O);break e;case 2:As=!0}}O=v.callback,O!==null&&(t.flags|=64,P&&(t.flags|=8192),P=h.callbacks,P===null?h.callbacks=[O]:P.push(O))}else P={lane:O,tag:v.tag,payload:v.payload,callback:v.callback,next:null},K===null?(L=K=P,x=F):K=K.next=P,p|=O;if(v=v.next,v===null){if(v=h.shared.pending,v===null)break;P=v,v=P.next,P.next=null,h.lastBaseUpdate=P,h.shared.pending=null}}while(!0);K===null&&(x=F),h.baseState=x,h.firstBaseUpdate=L,h.lastBaseUpdate=K,u===null&&(h.shared.lanes=0),js|=p,t.lanes=p,t.memoizedState=F}}function t_(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function i_(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)t_(r[t],s)}var nn=w(null),kl=w(0);function s_(t,s){t=ds,Y(kl,t),Y(nn,s),ds=t|s.baseLanes}function Yh(){Y(kl,ds),Y(nn,nn.current)}function Gh(){ds=kl.current,k(nn),k(kl)}var li=w(null),xi=null;function Ls(t){var s=t.alternate;Y(ut,ut.current&1),Y(li,t),xi===null&&(s===null||nn.current!==null||s.memoizedState!==null)&&(xi=t)}function Wh(t){Y(ut,ut.current),Y(li,t),xi===null&&(xi=t)}function r_(t){t.tag===22?(Y(ut,ut.current),Y(li,t),xi===null&&(xi=t)):Os()}function Os(){Y(ut,ut.current),Y(li,li.current)}function oi(t){k(li),xi===t&&(xi=null),k(ut)}var ut=w(0);function Rl(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||$c(r)||Zc(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var rs=0,Ce=null,Ge=null,mt=null,Ml=!1,an=!1,gr=!1,Tl=0,sa=0,ln=null,HS=0;function rt(){throw Error(a(321))}function Kh(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!ni(t[r],s[r]))return!1;return!0}function Ih(t,s,r,l,h,u){return rs=u,Ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,T.H=t===null||t.memoizedState===null?P_:lc,gr=!1,u=r(l,h),gr=!1,an&&(u=a_(s,r,l,h)),n_(t),u}function n_(t){T.H=aa;var s=Ge!==null&&Ge.next!==null;if(rs=0,mt=Ge=Ce=null,Ml=!1,sa=0,ln=null,s)throw Error(a(300));t===null||pt||(t=t.dependencies,t!==null&&Sl(t)&&(pt=!0))}function a_(t,s,r,l){Ce=t;var h=0;do{if(an&&(ln=null),sa=0,an=!1,25<=h)throw Error(a(301));if(h+=1,mt=Ge=null,t.updateQueue!=null){var u=t.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}T.H=Y_,u=s(r,l)}while(an);return u}function jS(){var t=T.H,s=t.useState()[0];return s=typeof s.then=="function"?ra(s):s,t=t.useState()[0],(Ge!==null?Ge.memoizedState:null)!==t&&(Ce.flags|=1024),s}function Fh(){var t=Tl!==0;return Tl=0,t}function Vh(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function Xh(t){if(Ml){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Ml=!1}rs=0,mt=Ge=Ce=null,an=!1,sa=Tl=0,ln=null}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ce.memoizedState=mt=t:mt=mt.next=t,mt}function dt(){if(Ge===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var s=mt===null?Ce.memoizedState:mt.next;if(s!==null)mt=s,Ge=t;else{if(t===null)throw Ce.alternate===null?Error(a(467)):Error(a(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},mt===null?Ce.memoizedState=mt=t:mt=mt.next=t}return mt}function Dl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ra(t){var s=sa;return sa+=1,ln===null&&(ln=[]),t=$f(ln,t,s),s=Ce,(mt===null?s.memoizedState:mt.next)===null&&(s=s.alternate,T.H=s===null||s.memoizedState===null?P_:lc),t}function Al(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ra(t);if(t.$$typeof===Z)return Ht(t)}throw Error(a(438,String(t)))}function $h(t){var s=null,r=Ce.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Dl(),Ce.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),l=0;l<t;l++)r[l]=_e;return s.index++,r}function ns(t,s){return typeof s=="function"?s(t):s}function Nl(t){var s=dt();return Zh(s,Ge,t)}function Zh(t,s,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var h=t.baseQueue,u=l.pending;if(u!==null){if(h!==null){var p=h.next;h.next=u.next,u.next=p}s.baseQueue=h=u,l.pending=null}if(u=t.baseState,h===null)t.memoizedState=u;else{s=h.next;var v=p=null,x=null,L=s,K=!1;do{var F=L.lane&-536870913;if(F!==L.lane?(Ne&F)===F:(rs&F)===F){var O=L.revertLane;if(O===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),F===en&&(K=!0);else if((rs&O)===O){L=L.next,O===en&&(K=!0);continue}else F={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},x===null?(v=x=F,p=u):x=x.next=F,Ce.lanes|=O,js|=O;F=L.action,gr&&r(u,F),u=L.hasEagerState?L.eagerState:r(u,F)}else O={lane:F,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},x===null?(v=x=O,p=u):x=x.next=O,Ce.lanes|=F,js|=F;L=L.next}while(L!==null&&L!==s);if(x===null?p=u:x.next=v,!ni(u,t.memoizedState)&&(pt=!0,K&&(r=tn,r!==null)))throw r;t.memoizedState=u,t.baseState=p,t.baseQueue=x,l.lastRenderedState=u}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Qh(t){var s=dt(),r=s.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,h=r.pending,u=s.memoizedState;if(h!==null){r.pending=null;var p=h=h.next;do u=t(u,p.action),p=p.next;while(p!==h);ni(u,s.memoizedState)||(pt=!0),s.memoizedState=u,s.baseQueue===null&&(s.baseState=u),r.lastRenderedState=u}return[u,l]}function l_(t,s,r){var l=Ce,h=dt(),u=Le;if(u){if(r===void 0)throw Error(a(407));r=r()}else r=s();var p=!ni((Ge||h).memoizedState,r);if(p&&(h.memoizedState=r,pt=!0),h=h.queue,tc(c_.bind(null,l,h,t),[t]),h.getSnapshot!==s||p||mt!==null&&mt.memoizedState.tag&1){if(l.flags|=2048,on(9,{destroy:void 0},h_.bind(null,l,h,r,s),null),Fe===null)throw Error(a(349));u||(rs&127)!==0||o_(l,s,r)}return r}function o_(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Ce.updateQueue,s===null?(s=Dl(),Ce.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function h_(t,s,r,l){s.value=r,s.getSnapshot=l,u_(s)&&d_(t)}function c_(t,s,r){return r(function(){u_(s)&&d_(t)})}function u_(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!ni(t,r)}catch{return!0}}function d_(t){var s=or(t,2);s!==null&&si(s,t,2)}function Jh(t){var s=It();if(typeof t=="function"){var r=t;if(t=r(),gr){Oi(!0);try{r()}finally{Oi(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:t},s}function f_(t,s,r,l){return t.baseState=r,Zh(t,Ge,typeof l=="function"?l:ns)}function US(t,s,r,l,h){if(Ol(t))throw Error(a(485));if(t=s.action,t!==null){var u={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){u.listeners.push(p)}};T.T!==null?r(!0):u.isTransition=!1,l(u),r=s.pending,r===null?(u.next=s.pending=u,__(s,u)):(u.next=r.next,s.pending=r.next=u)}}function __(t,s){var r=s.action,l=s.payload,h=t.state;if(s.isTransition){var u=T.T,p={};T.T=p;try{var v=r(h,l),x=T.S;x!==null&&x(p,v),m_(t,s,v)}catch(L){ec(t,s,L)}finally{u!==null&&p.types!==null&&(u.types=p.types),T.T=u}}else try{u=r(h,l),m_(t,s,u)}catch(L){ec(t,s,L)}}function m_(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){p_(t,s,l)},function(l){return ec(t,s,l)}):p_(t,s,r)}function p_(t,s,r){s.status="fulfilled",s.value=r,g_(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,__(t,r)))}function ec(t,s,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=r,g_(s),s=s.next;while(s!==l)}t.action=null}function g_(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function v_(t,s){return s}function S_(t,s){if(Le){var r=Fe.formState;if(r!==null){e:{var l=Ce;if(Le){if(Xe){t:{for(var h=Xe,u=wi;h.nodeType!==8;){if(!u){h=null;break t}if(h=Ci(h.nextSibling),h===null){h=null;break t}}u=h.data,h=u==="F!"||u==="F"?h:null}if(h){Xe=Ci(h.nextSibling),l=h.data==="F!";break e}}Ts(l)}l=!1}l&&(s=r[0])}}return r=It(),r.memoizedState=r.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v_,lastRenderedState:s},r.queue=l,r=j_.bind(null,Ce,l),l.dispatch=r,l=Jh(!1),u=ac.bind(null,Ce,!1,l.queue),l=It(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,r=US.bind(null,Ce,h,u,r),h.dispatch=r,l.memoizedState=t,[s,r,!1]}function y_(t){var s=dt();return b_(s,Ge,t)}function b_(t,s,r){if(s=Zh(t,s,v_)[0],t=Nl(ns)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=ra(s)}catch(p){throw p===sn?wl:p}else l=s;s=dt();var h=s.queue,u=h.dispatch;return r!==s.memoizedState&&(Ce.flags|=2048,on(9,{destroy:void 0},qS.bind(null,h,r),null)),[l,u,t]}function qS(t,s){t.action=s}function w_(t){var s=dt(),r=Ge;if(r!==null)return b_(s,r,t);dt(),s=s.memoizedState,r=dt();var l=r.queue.dispatch;return r.memoizedState=t,[s,l,!1]}function on(t,s,r,l){return t={tag:t,create:r,deps:l,inst:s,next:null},s=Ce.updateQueue,s===null&&(s=Dl(),Ce.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,s.lastEffect=t),t}function x_(){return dt().memoizedState}function Bl(t,s,r,l){var h=It();Ce.flags|=t,h.memoizedState=on(1|s,{destroy:void 0},r,l===void 0?null:l)}function Ll(t,s,r,l){var h=dt();l=l===void 0?null:l;var u=h.memoizedState.inst;Ge!==null&&l!==null&&Kh(l,Ge.memoizedState.deps)?h.memoizedState=on(s,u,r,l):(Ce.flags|=t,h.memoizedState=on(1|s,u,r,l))}function C_(t,s){Bl(8390656,8,t,s)}function tc(t,s){Ll(2048,8,t,s)}function PS(t){Ce.flags|=4;var s=Ce.updateQueue;if(s===null)s=Dl(),Ce.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function E_(t){var s=dt().memoizedState;return PS({ref:s,nextImpl:t}),function(){if((je&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function k_(t,s){return Ll(4,2,t,s)}function R_(t,s){return Ll(4,4,t,s)}function M_(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function T_(t,s,r){r=r!=null?r.concat([t]):null,Ll(4,4,M_.bind(null,s,t),r)}function ic(){}function D_(t,s){var r=dt();s=s===void 0?null:s;var l=r.memoizedState;return s!==null&&Kh(s,l[1])?l[0]:(r.memoizedState=[t,s],t)}function A_(t,s){var r=dt();s=s===void 0?null:s;var l=r.memoizedState;if(s!==null&&Kh(s,l[1]))return l[0];if(l=t(),gr){Oi(!0);try{t()}finally{Oi(!1)}}return r.memoizedState=[l,s],l}function sc(t,s,r){return r===void 0||(rs&1073741824)!==0&&(Ne&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=Nm(),Ce.lanes|=t,js|=t,r)}function N_(t,s,r,l){return ni(r,s)?r:nn.current!==null?(t=sc(t,r,l),ni(t,s)||(pt=!0),t):(rs&42)===0||(rs&1073741824)!==0&&(Ne&261930)===0?(pt=!0,t.memoizedState=r):(t=Nm(),Ce.lanes|=t,js|=t,s)}function B_(t,s,r,l,h){var u=G.p;G.p=u!==0&&8>u?u:8;var p=T.T,v={};T.T=v,ac(t,!1,s,r);try{var x=h(),L=T.S;if(L!==null&&L(v,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var K=zS(x,l);na(t,s,K,ui(t))}else na(t,s,l,ui(t))}catch(F){na(t,s,{then:function(){},status:"rejected",reason:F},ui())}finally{G.p=u,p!==null&&v.types!==null&&(p.types=v.types),T.T=p}}function YS(){}function rc(t,s,r,l){if(t.tag!==5)throw Error(a(476));var h=L_(t).queue;B_(t,h,s,W,r===null?YS:function(){return O_(t),r(l)})}function L_(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:W},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function O_(t){var s=L_(t);s.next===null&&(s=t.alternate.memoizedState),na(t,s.next.queue,{},ui())}function nc(){return Ht(wa)}function z_(){return dt().memoizedState}function H_(){return dt().memoizedState}function GS(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=ui();t=Ns(r);var l=Bs(s,t,r);l!==null&&(si(l,s,r),ea(l,s,r)),s={cache:Lh()},t.payload=s;return}s=s.return}}function WS(t,s,r){var l=ui();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ol(t)?U_(s,r):(r=xh(t,s,r,l),r!==null&&(si(r,t,l),q_(r,s,l)))}function j_(t,s,r){var l=ui();na(t,s,r,l)}function na(t,s,r,l){var h={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ol(t))U_(s,h);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=s.lastRenderedReducer,u!==null))try{var p=s.lastRenderedState,v=u(p,r);if(h.hasEagerState=!0,h.eagerState=v,ni(v,p))return ml(t,s,h,0),Fe===null&&_l(),!1}catch{}if(r=xh(t,s,h,l),r!==null)return si(r,t,l),q_(r,s,l),!0}return!1}function ac(t,s,r,l){if(l={lane:2,revertLane:jc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ol(t)){if(s)throw Error(a(479))}else s=xh(t,r,l,2),s!==null&&si(s,t,2)}function Ol(t){var s=t.alternate;return t===Ce||s!==null&&s===Ce}function U_(t,s){an=Ml=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function q_(t,s,r){if((r&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,r|=l,s.lanes=r,Wd(t,r)}}var aa={readContext:Ht,use:Al,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useLayoutEffect:rt,useInsertionEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useSyncExternalStore:rt,useId:rt,useHostTransitionStatus:rt,useFormState:rt,useActionState:rt,useOptimistic:rt,useMemoCache:rt,useCacheRefresh:rt};aa.useEffectEvent=rt;var P_={readContext:Ht,use:Al,useCallback:function(t,s){return It().memoizedState=[t,s===void 0?null:s],t},useContext:Ht,useEffect:C_,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,Bl(4194308,4,M_.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Bl(4194308,4,t,s)},useInsertionEffect:function(t,s){Bl(4,2,t,s)},useMemo:function(t,s){var r=It();s=s===void 0?null:s;var l=t();if(gr){Oi(!0);try{t()}finally{Oi(!1)}}return r.memoizedState=[l,s],l},useReducer:function(t,s,r){var l=It();if(r!==void 0){var h=r(s);if(gr){Oi(!0);try{r(s)}finally{Oi(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=WS.bind(null,Ce,t),[l.memoizedState,t]},useRef:function(t){var s=It();return t={current:t},s.memoizedState=t},useState:function(t){t=Jh(t);var s=t.queue,r=j_.bind(null,Ce,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:ic,useDeferredValue:function(t,s){var r=It();return sc(r,t,s)},useTransition:function(){var t=Jh(!1);return t=B_.bind(null,Ce,t.queue,!0,!1),It().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var l=Ce,h=It();if(Le){if(r===void 0)throw Error(a(407));r=r()}else{if(r=s(),Fe===null)throw Error(a(349));(Ne&127)!==0||o_(l,s,r)}h.memoizedState=r;var u={value:r,getSnapshot:s};return h.queue=u,C_(c_.bind(null,l,u,t),[t]),l.flags|=2048,on(9,{destroy:void 0},h_.bind(null,l,u,r,s),null),r},useId:function(){var t=It(),s=Fe.identifierPrefix;if(Le){var r=ji,l=Hi;r=(l&~(1<<32-q(l)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Tl++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=HS++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:nc,useFormState:S_,useActionState:S_,useOptimistic:function(t){var s=It();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=ac.bind(null,Ce,!0,r),r.dispatch=s,[t,s]},useMemoCache:$h,useCacheRefresh:function(){return It().memoizedState=GS.bind(null,Ce)},useEffectEvent:function(t){var s=It(),r={impl:t};return s.memoizedState=r,function(){if((je&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},lc={readContext:Ht,use:Al,useCallback:D_,useContext:Ht,useEffect:tc,useImperativeHandle:T_,useInsertionEffect:k_,useLayoutEffect:R_,useMemo:A_,useReducer:Nl,useRef:x_,useState:function(){return Nl(ns)},useDebugValue:ic,useDeferredValue:function(t,s){var r=dt();return N_(r,Ge.memoizedState,t,s)},useTransition:function(){var t=Nl(ns)[0],s=dt().memoizedState;return[typeof t=="boolean"?t:ra(t),s]},useSyncExternalStore:l_,useId:z_,useHostTransitionStatus:nc,useFormState:y_,useActionState:y_,useOptimistic:function(t,s){var r=dt();return f_(r,Ge,t,s)},useMemoCache:$h,useCacheRefresh:H_};lc.useEffectEvent=E_;var Y_={readContext:Ht,use:Al,useCallback:D_,useContext:Ht,useEffect:tc,useImperativeHandle:T_,useInsertionEffect:k_,useLayoutEffect:R_,useMemo:A_,useReducer:Qh,useRef:x_,useState:function(){return Qh(ns)},useDebugValue:ic,useDeferredValue:function(t,s){var r=dt();return Ge===null?sc(r,t,s):N_(r,Ge.memoizedState,t,s)},useTransition:function(){var t=Qh(ns)[0],s=dt().memoizedState;return[typeof t=="boolean"?t:ra(t),s]},useSyncExternalStore:l_,useId:z_,useHostTransitionStatus:nc,useFormState:w_,useActionState:w_,useOptimistic:function(t,s){var r=dt();return Ge!==null?f_(r,Ge,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:$h,useCacheRefresh:H_};Y_.useEffectEvent=E_;function oc(t,s,r,l){s=t.memoizedState,r=r(l,s),r=r==null?s:S({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var hc={enqueueSetState:function(t,s,r){t=t._reactInternals;var l=ui(),h=Ns(l);h.payload=s,r!=null&&(h.callback=r),s=Bs(t,h,l),s!==null&&(si(s,t,l),ea(s,t,l))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var l=ui(),h=Ns(l);h.tag=1,h.payload=s,r!=null&&(h.callback=r),s=Bs(t,h,l),s!==null&&(si(s,t,l),ea(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=ui(),l=Ns(r);l.tag=2,s!=null&&(l.callback=s),s=Bs(t,l,r),s!==null&&(si(s,t,r),ea(s,t,r))}};function G_(t,s,r,l,h,u,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,u,p):s.prototype&&s.prototype.isPureReactComponent?!In(r,l)||!In(h,u):!0}function W_(t,s,r,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,l),s.state!==t&&hc.enqueueReplaceState(s,s.state,null)}function vr(t,s){var r=s;if("ref"in s){r={};for(var l in s)l!=="ref"&&(r[l]=s[l])}if(t=t.defaultProps){r===s&&(r=S({},r));for(var h in t)r[h]===void 0&&(r[h]=t[h])}return r}function K_(t){fl(t)}function I_(t){console.error(t)}function F_(t){fl(t)}function zl(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function V_(t,s,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function cc(t,s,r){return r=Ns(r),r.tag=3,r.payload={element:null},r.callback=function(){zl(t,s)},r}function X_(t){return t=Ns(t),t.tag=3,t}function $_(t,s,r,l){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var u=l.value;t.payload=function(){return h(u)},t.callback=function(){V_(s,r,l)}}var p=r.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(t.callback=function(){V_(s,r,l),typeof h!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function KS(t,s,r,l,h){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=r.alternate,s!==null&&Jr(s,r,h,!0),r=li.current,r!==null){switch(r.tag){case 31:case 13:return xi===null?Vl():r.alternate===null&&nt===0&&(nt=3),r.flags&=-257,r.flags|=65536,r.lanes=h,l===xl?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([l]):s.add(l),Oc(t,l,h)),!1;case 22:return r.flags|=65536,l===xl?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([l]):r.add(l)),Oc(t,l,h)),!1}throw Error(a(435,r.tag))}return Oc(t,l,h),Vl(),!1}if(Le)return s=li.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Th&&(t=Error(a(422),{cause:l}),Xn(Si(t,r)))):(l!==Th&&(s=Error(a(423),{cause:l}),Xn(Si(s,r))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Si(l,r),h=cc(t.stateNode,l,h),qh(t,h),nt!==4&&(nt=2)),!1;var u=Error(a(520),{cause:l});if(u=Si(u,r),_a===null?_a=[u]:_a.push(u),nt!==4&&(nt=2),s===null)return!0;l=Si(l,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=h&-h,r.lanes|=t,t=cc(r.stateNode,l,t),qh(r,t),!1;case 1:if(s=r.type,u=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Us===null||!Us.has(u))))return r.flags|=65536,h&=-h,r.lanes|=h,h=X_(h),$_(h,t,r,l),qh(r,h),!1}r=r.return}while(r!==null);return!1}var uc=Error(a(461)),pt=!1;function jt(t,s,r,l){s.child=t===null?e_(s,null,r,l):pr(s,t.child,r,l)}function Z_(t,s,r,l,h){r=r.render;var u=s.ref;if("ref"in l){var p={};for(var v in l)v!=="ref"&&(p[v]=l[v])}else p=l;return dr(s),l=Ih(t,s,r,p,u,h),v=Fh(),t!==null&&!pt?(Vh(t,s,h),as(t,s,h)):(Le&&v&&Rh(s),s.flags|=1,jt(t,s,l,h),s.child)}function Q_(t,s,r,l,h){if(t===null){var u=r.type;return typeof u=="function"&&!Ch(u)&&u.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=u,J_(t,s,u,l,h)):(t=gl(r.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(u=t.child,!Sc(t,h)){var p=u.memoizedProps;if(r=r.compare,r=r!==null?r:In,r(p,l)&&t.ref===s.ref)return as(t,s,h)}return s.flags|=1,t=es(u,l),t.ref=s.ref,t.return=s,s.child=t}function J_(t,s,r,l,h){if(t!==null){var u=t.memoizedProps;if(In(u,l)&&t.ref===s.ref)if(pt=!1,s.pendingProps=l=u,Sc(t,h))(t.flags&131072)!==0&&(pt=!0);else return s.lanes=t.lanes,as(t,s,h)}return dc(t,s,r,l,h)}function em(t,s,r,l){var h=l.children,u=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(u=u!==null?u.baseLanes|r:r,t!==null){for(l=s.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~u}else l=0,s.child=null;return tm(t,s,u,r,l)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&bl(s,u!==null?u.cachePool:null),u!==null?s_(s,u):Yh(),r_(s);else return l=s.lanes=536870912,tm(t,s,u!==null?u.baseLanes|r:r,r,l)}else u!==null?(bl(s,u.cachePool),s_(s,u),Os(),s.memoizedState=null):(t!==null&&bl(s,null),Yh(),Os());return jt(t,s,h,r),s.child}function la(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function tm(t,s,r,l,h){var u=zh();return u=u===null?null:{parent:_t._currentValue,pool:u},s.memoizedState={baseLanes:r,cachePool:u},t!==null&&bl(s,null),Yh(),r_(s),t!==null&&Jr(t,s,l,!0),s.childLanes=h,null}function Hl(t,s){return s=Ul({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function im(t,s,r){return pr(s,t.child,null,r),t=Hl(s,s.pendingProps),t.flags|=2,oi(s),s.memoizedState=null,t}function IS(t,s,r){var l=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Le){if(l.mode==="hidden")return t=Hl(s,l),s.lanes=536870912,la(null,t);if(Wh(s),(t=Xe)?(t=_p(t,wi),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Rs!==null?{id:Hi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},r=Uf(t),r.return=s,s.child=r,zt=s,Xe=null)):t=null,t===null)throw Ts(s);return s.lanes=536870912,null}return Hl(s,l)}var u=t.memoizedState;if(u!==null){var p=u.dehydrated;if(Wh(s),h)if(s.flags&256)s.flags&=-257,s=im(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(a(558));else if(pt||Jr(t,s,r,!1),h=(r&t.childLanes)!==0,pt||h){if(l=Fe,l!==null&&(p=Kd(l,r),p!==0&&p!==u.retryLane))throw u.retryLane=p,or(t,p),si(l,t,p),uc;Vl(),s=im(t,s,r)}else t=u.treeContext,Xe=Ci(p.nextSibling),zt=s,Le=!0,Ms=null,wi=!1,t!==null&&Yf(s,t),s=Hl(s,l),s.flags|=4096;return s}return t=es(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function jl(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function dc(t,s,r,l,h){return dr(s),r=Ih(t,s,r,l,void 0,h),l=Fh(),t!==null&&!pt?(Vh(t,s,h),as(t,s,h)):(Le&&l&&Rh(s),s.flags|=1,jt(t,s,r,h),s.child)}function sm(t,s,r,l,h,u){return dr(s),s.updateQueue=null,r=a_(s,l,r,h),n_(t),l=Fh(),t!==null&&!pt?(Vh(t,s,u),as(t,s,u)):(Le&&l&&Rh(s),s.flags|=1,jt(t,s,r,u),s.child)}function rm(t,s,r,l,h){if(dr(s),s.stateNode===null){var u=Xr,p=r.contextType;typeof p=="object"&&p!==null&&(u=Ht(p)),u=new r(l,u),s.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=hc,s.stateNode=u,u._reactInternals=s,u=s.stateNode,u.props=l,u.state=s.memoizedState,u.refs={},jh(s),p=r.contextType,u.context=typeof p=="object"&&p!==null?Ht(p):Xr,u.state=s.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(oc(s,r,p,l),u.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(p=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),p!==u.state&&hc.enqueueReplaceState(u,u.state,null),ia(s,l,u,h),ta(),u.state=s.memoizedState),typeof u.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){u=s.stateNode;var v=s.memoizedProps,x=vr(r,v);u.props=x;var L=u.context,K=r.contextType;p=Xr,typeof K=="object"&&K!==null&&(p=Ht(K));var F=r.getDerivedStateFromProps;K=typeof F=="function"||typeof u.getSnapshotBeforeUpdate=="function",v=s.pendingProps!==v,K||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v||L!==p)&&W_(s,u,l,p),As=!1;var O=s.memoizedState;u.state=O,ia(s,l,u,h),ta(),L=s.memoizedState,v||O!==L||As?(typeof F=="function"&&(oc(s,r,F,l),L=s.memoizedState),(x=As||G_(s,r,x,l,O,L,p))?(K||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(s.flags|=4194308)):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=L),u.props=l,u.state=L,u.context=p,l=x):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{u=s.stateNode,Uh(t,s),p=s.memoizedProps,K=vr(r,p),u.props=K,F=s.pendingProps,O=u.context,L=r.contextType,x=Xr,typeof L=="object"&&L!==null&&(x=Ht(L)),v=r.getDerivedStateFromProps,(L=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(p!==F||O!==x)&&W_(s,u,l,x),As=!1,O=s.memoizedState,u.state=O,ia(s,l,u,h),ta();var P=s.memoizedState;p!==F||O!==P||As||t!==null&&t.dependencies!==null&&Sl(t.dependencies)?(typeof v=="function"&&(oc(s,r,v,l),P=s.memoizedState),(K=As||G_(s,r,K,l,O,P,x)||t!==null&&t.dependencies!==null&&Sl(t.dependencies))?(L||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,P,x),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,P,x)),typeof u.componentDidUpdate=="function"&&(s.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof u.componentDidUpdate!="function"||p===t.memoizedProps&&O===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&O===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=P),u.props=l,u.state=P,u.context=x,l=K):(typeof u.componentDidUpdate!="function"||p===t.memoizedProps&&O===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&O===t.memoizedState||(s.flags|=1024),l=!1)}return u=l,jl(t,s),l=(s.flags&128)!==0,u||l?(u=s.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:u.render(),s.flags|=1,t!==null&&l?(s.child=pr(s,t.child,null,h),s.child=pr(s,null,r,h)):jt(t,s,r,h),s.memoizedState=u.state,t=s.child):t=as(t,s,h),t}function nm(t,s,r,l){return cr(),s.flags|=256,jt(t,s,r,l),s.child}var fc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _c(t){return{baseLanes:t,cachePool:Vf()}}function mc(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=ci),t}function am(t,s,r){var l=s.pendingProps,h=!1,u=(s.flags&128)!==0,p;if((p=u)||(p=t!==null&&t.memoizedState===null?!1:(ut.current&2)!==0),p&&(h=!0,s.flags&=-129),p=(s.flags&32)!==0,s.flags&=-33,t===null){if(Le){if(h?Ls(s):Os(),(t=Xe)?(t=_p(t,wi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Rs!==null?{id:Hi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},r=Uf(t),r.return=s,s.child=r,zt=s,Xe=null)):t=null,t===null)throw Ts(s);return Zc(t)?s.lanes=32:s.lanes=536870912,null}var v=l.children;return l=l.fallback,h?(Os(),h=s.mode,v=Ul({mode:"hidden",children:v},h),l=hr(l,h,r,null),v.return=s,l.return=s,v.sibling=l,s.child=v,l=s.child,l.memoizedState=_c(r),l.childLanes=mc(t,p,r),s.memoizedState=fc,la(null,l)):(Ls(s),pc(s,v))}var x=t.memoizedState;if(x!==null&&(v=x.dehydrated,v!==null)){if(u)s.flags&256?(Ls(s),s.flags&=-257,s=gc(t,s,r)):s.memoizedState!==null?(Os(),s.child=t.child,s.flags|=128,s=null):(Os(),v=l.fallback,h=s.mode,l=Ul({mode:"visible",children:l.children},h),v=hr(v,h,r,null),v.flags|=2,l.return=s,v.return=s,l.sibling=v,s.child=l,pr(s,t.child,null,r),l=s.child,l.memoizedState=_c(r),l.childLanes=mc(t,p,r),s.memoizedState=fc,s=la(null,l));else if(Ls(s),Zc(v)){if(p=v.nextSibling&&v.nextSibling.dataset,p)var L=p.dgst;p=L,l=Error(a(419)),l.stack="",l.digest=p,Xn({value:l,source:null,stack:null}),s=gc(t,s,r)}else if(pt||Jr(t,s,r,!1),p=(r&t.childLanes)!==0,pt||p){if(p=Fe,p!==null&&(l=Kd(p,r),l!==0&&l!==x.retryLane))throw x.retryLane=l,or(t,l),si(p,t,l),uc;$c(v)||Vl(),s=gc(t,s,r)}else $c(v)?(s.flags|=192,s.child=t.child,s=null):(t=x.treeContext,Xe=Ci(v.nextSibling),zt=s,Le=!0,Ms=null,wi=!1,t!==null&&Yf(s,t),s=pc(s,l.children),s.flags|=4096);return s}return h?(Os(),v=l.fallback,h=s.mode,x=t.child,L=x.sibling,l=es(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,L!==null?v=es(L,v):(v=hr(v,h,r,null),v.flags|=2),v.return=s,l.return=s,l.sibling=v,s.child=l,la(null,l),l=s.child,v=t.child.memoizedState,v===null?v=_c(r):(h=v.cachePool,h!==null?(x=_t._currentValue,h=h.parent!==x?{parent:x,pool:x}:h):h=Vf(),v={baseLanes:v.baseLanes|r,cachePool:h}),l.memoizedState=v,l.childLanes=mc(t,p,r),s.memoizedState=fc,la(t.child,l)):(Ls(s),r=t.child,t=r.sibling,r=es(r,{mode:"visible",children:l.children}),r.return=s,r.sibling=null,t!==null&&(p=s.deletions,p===null?(s.deletions=[t],s.flags|=16):p.push(t)),s.child=r,s.memoizedState=null,r)}function pc(t,s){return s=Ul({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Ul(t,s){return t=ai(22,t,null,s),t.lanes=0,t}function gc(t,s,r){return pr(s,t.child,null,r),t=pc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function lm(t,s,r){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Nh(t.return,s,r)}function vc(t,s,r,l,h,u){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:h,treeForkCount:u}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=r,p.tailMode=h,p.treeForkCount=u)}function om(t,s,r){var l=s.pendingProps,h=l.revealOrder,u=l.tail;l=l.children;var p=ut.current,v=(p&2)!==0;if(v?(p=p&1|2,s.flags|=128):p&=1,Y(ut,p),jt(t,s,l,r),l=Le?Vn:0,!v&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lm(t,r,s);else if(t.tag===19)lm(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(r=s.child,h=null;r!==null;)t=r.alternate,t!==null&&Rl(t)===null&&(h=r),r=r.sibling;r=h,r===null?(h=s.child,s.child=null):(h=r.sibling,r.sibling=null),vc(s,!1,h,r,u,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&Rl(t)===null){s.child=h;break}t=h.sibling,h.sibling=r,r=h,h=t}vc(s,!0,r,null,u,l);break;case"together":vc(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function as(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),js|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(Jr(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,r=es(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=es(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Sc(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Sl(t)))}function FS(t,s,r){switch(s.tag){case 3:qe(s,s.stateNode.containerInfo),Ds(s,_t,t.memoizedState.cache),cr();break;case 27:case 5:ot(s);break;case 4:qe(s,s.stateNode.containerInfo);break;case 10:Ds(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Wh(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ls(s),s.flags|=128,null):(r&s.child.childLanes)!==0?am(t,s,r):(Ls(s),t=as(t,s,r),t!==null?t.sibling:null);Ls(s);break;case 19:var h=(t.flags&128)!==0;if(l=(r&s.childLanes)!==0,l||(Jr(t,s,r,!1),l=(r&s.childLanes)!==0),h){if(l)return om(t,s,r);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Y(ut,ut.current),l)break;return null;case 22:return s.lanes=0,em(t,s,r,s.pendingProps);case 24:Ds(s,_t,t.memoizedState.cache)}return as(t,s,r)}function hm(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)pt=!0;else{if(!Sc(t,r)&&(s.flags&128)===0)return pt=!1,FS(t,s,r);pt=(t.flags&131072)!==0}else pt=!1,Le&&(s.flags&1048576)!==0&&Pf(s,Vn,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=_r(s.elementType),s.type=t,typeof t=="function")Ch(t)?(l=vr(t,l),s.tag=1,s=rm(null,s,t,l,r)):(s.tag=0,s=dc(null,s,t,l,r));else{if(t!=null){var h=t.$$typeof;if(h===J){s.tag=11,s=Z_(null,s,t,l,r);break e}else if(h===re){s.tag=14,s=Q_(null,s,t,l,r);break e}}throw s=X(t)||t,Error(a(306,s,""))}}return s;case 0:return dc(t,s,s.type,s.pendingProps,r);case 1:return l=s.type,h=vr(l,s.pendingProps),rm(t,s,l,h,r);case 3:e:{if(qe(s,s.stateNode.containerInfo),t===null)throw Error(a(387));l=s.pendingProps;var u=s.memoizedState;h=u.element,Uh(t,s),ia(s,l,null,r);var p=s.memoizedState;if(l=p.cache,Ds(s,_t,l),l!==u.cache&&Bh(s,[_t],r,!0),ta(),l=p.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:p.cache},s.updateQueue.baseState=u,s.memoizedState=u,s.flags&256){s=nm(t,s,l,r);break e}else if(l!==h){h=Si(Error(a(424)),s),Xn(h),s=nm(t,s,l,r);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Xe=Ci(t.firstChild),zt=s,Le=!0,Ms=null,wi=!0,r=e_(s,null,l,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(cr(),l===h){s=as(t,s,r);break e}jt(t,s,l,r)}s=s.child}return s;case 26:return jl(t,s),t===null?(r=yp(s.type,null,s.pendingProps,null))?s.memoizedState=r:Le||(r=s.type,t=s.pendingProps,l=to(oe.current).createElement(r),l[Ot]=s,l[Zt]=t,Ut(l,r,t),Mt(l),s.stateNode=l):s.memoizedState=yp(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return ot(s),t===null&&Le&&(l=s.stateNode=gp(s.type,s.pendingProps,oe.current),zt=s,wi=!0,h=Xe,Gs(s.type)?(Qc=h,Xe=Ci(l.firstChild)):Xe=h),jt(t,s,s.pendingProps.children,r),jl(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Le&&((h=l=Xe)&&(l=xy(l,s.type,s.pendingProps,wi),l!==null?(s.stateNode=l,zt=s,Xe=Ci(l.firstChild),wi=!1,h=!0):h=!1),h||Ts(s)),ot(s),h=s.type,u=s.pendingProps,p=t!==null?t.memoizedProps:null,l=u.children,Fc(h,u)?l=null:p!==null&&Fc(h,p)&&(s.flags|=32),s.memoizedState!==null&&(h=Ih(t,s,jS,null,null,r),wa._currentValue=h),jl(t,s),jt(t,s,l,r),s.child;case 6:return t===null&&Le&&((t=r=Xe)&&(r=Cy(r,s.pendingProps,wi),r!==null?(s.stateNode=r,zt=s,Xe=null,t=!0):t=!1),t||Ts(s)),null;case 13:return am(t,s,r);case 4:return qe(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=pr(s,null,l,r):jt(t,s,l,r),s.child;case 11:return Z_(t,s,s.type,s.pendingProps,r);case 7:return jt(t,s,s.pendingProps,r),s.child;case 8:return jt(t,s,s.pendingProps.children,r),s.child;case 12:return jt(t,s,s.pendingProps.children,r),s.child;case 10:return l=s.pendingProps,Ds(s,s.type,l.value),jt(t,s,l.children,r),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,dr(s),h=Ht(h),l=l(h),s.flags|=1,jt(t,s,l,r),s.child;case 14:return Q_(t,s,s.type,s.pendingProps,r);case 15:return J_(t,s,s.type,s.pendingProps,r);case 19:return om(t,s,r);case 31:return IS(t,s,r);case 22:return em(t,s,r,s.pendingProps);case 24:return dr(s),l=Ht(_t),t===null?(h=zh(),h===null&&(h=Fe,u=Lh(),h.pooledCache=u,u.refCount++,u!==null&&(h.pooledCacheLanes|=r),h=u),s.memoizedState={parent:l,cache:h},jh(s),Ds(s,_t,h)):((t.lanes&r)!==0&&(Uh(t,s),ia(s,null,null,r),ta()),h=t.memoizedState,u=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ds(s,_t,l)):(l=u.cache,Ds(s,_t,l),l!==h.cache&&Bh(s,[_t],r,!0))),jt(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function ls(t){t.flags|=4}function yc(t,s,r,l,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(zm())t.flags|=8192;else throw mr=xl,Hh}else t.flags&=-16777217}function cm(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ep(s))if(zm())t.flags|=8192;else throw mr=xl,Hh}function ql(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?$i():536870912,t.lanes|=s,dn|=s)}function oa(t,s){if(!Le)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function $e(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(s)for(var h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=r,s}function VS(t,s,r){var l=s.pendingProps;switch(Mh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(s),null;case 1:return $e(s),null;case 3:return r=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ss(_t),Oe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qr(s)?ls(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Dh())),$e(s),null;case 26:var h=s.type,u=s.memoizedState;return t===null?(ls(s),u!==null?($e(s),cm(s,u)):($e(s),yc(s,h,null,l,r))):u?u!==t.memoizedState?(ls(s),$e(s),cm(s,u)):($e(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&ls(s),$e(s),yc(s,h,t,l,r)),null;case 27:if(yt(s),r=oe.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&ls(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return $e(s),null}t=Q.current,Qr(s)?Gf(s):(t=gp(h,l,r),s.stateNode=t,ls(s))}return $e(s),null;case 5:if(yt(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&ls(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return $e(s),null}if(u=Q.current,Qr(s))Gf(s);else{var p=to(oe.current);switch(u){case 1:u=p.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:u=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":u=p.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":u=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":u=p.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof l.is=="string"?p.createElement("select",{is:l.is}):p.createElement("select"),l.multiple?u.multiple=!0:l.size&&(u.size=l.size);break;default:u=typeof l.is=="string"?p.createElement(h,{is:l.is}):p.createElement(h)}}u[Ot]=s,u[Zt]=l;e:for(p=s.child;p!==null;){if(p.tag===5||p.tag===6)u.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break e;for(;p.sibling===null;){if(p.return===null||p.return===s)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}s.stateNode=u;e:switch(Ut(u,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ls(s)}}return $e(s),yc(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&ls(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(a(166));if(t=oe.current,Qr(s)){if(t=s.stateNode,r=s.memoizedProps,l=null,h=zt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ot]=s,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||ap(t.nodeValue,r)),t||Ts(s,!0)}else t=to(t).createTextNode(l),t[Ot]=s,s.stateNode=t}return $e(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(l=Qr(s),r!==null){if(t===null){if(!l)throw Error(a(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Ot]=s}else cr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$e(s),t=!1}else r=Dh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(oi(s),s):(oi(s),null);if((s.flags&128)!==0)throw Error(a(558))}return $e(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Qr(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[Ot]=s}else cr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$e(s),h=!1}else h=Dh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(oi(s),s):(oi(s),null)}return oi(s),(s.flags&128)!==0?(s.lanes=r,s):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==h&&(l.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),ql(s,s.updateQueue),$e(s),null);case 4:return Oe(),t===null&&Yc(s.stateNode.containerInfo),$e(s),null;case 10:return ss(s.type),$e(s),null;case 19:if(k(ut),l=s.memoizedState,l===null)return $e(s),null;if(h=(s.flags&128)!==0,u=l.rendering,u===null)if(h)oa(l,!1);else{if(nt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(u=Rl(t),u!==null){for(s.flags|=128,oa(l,!1),t=u.updateQueue,s.updateQueue=t,ql(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)jf(r,t),r=r.sibling;return Y(ut,ut.current&1|2),Le&&ts(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Rt()>Kl&&(s.flags|=128,h=!0,oa(l,!1),s.lanes=4194304)}else{if(!h)if(t=Rl(u),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,ql(s,t),oa(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!Le)return $e(s),null}else 2*Rt()-l.renderingStartTime>Kl&&r!==536870912&&(s.flags|=128,h=!0,oa(l,!1),s.lanes=4194304);l.isBackwards?(u.sibling=s.child,s.child=u):(t=l.last,t!==null?t.sibling=u:s.child=u,l.last=u)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Rt(),t.sibling=null,r=ut.current,Y(ut,h?r&1|2:r&1),Le&&ts(s,l.treeForkCount),t):($e(s),null);case 22:case 23:return oi(s),Gh(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(r&536870912)!==0&&(s.flags&128)===0&&($e(s),s.subtreeFlags&6&&(s.flags|=8192)):$e(s),r=s.updateQueue,r!==null&&ql(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==r&&(s.flags|=2048),t!==null&&k(fr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),ss(_t),$e(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function XS(t,s){switch(Mh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ss(_t),Oe(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return yt(s),null;case 31:if(s.memoizedState!==null){if(oi(s),s.alternate===null)throw Error(a(340));cr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(oi(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));cr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return k(ut),null;case 4:return Oe(),null;case 10:return ss(s.type),null;case 22:case 23:return oi(s),Gh(),t!==null&&k(fr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ss(_t),null;case 25:return null;default:return null}}function um(t,s){switch(Mh(s),s.tag){case 3:ss(_t),Oe();break;case 26:case 27:case 5:yt(s);break;case 4:Oe();break;case 31:s.memoizedState!==null&&oi(s);break;case 13:oi(s);break;case 19:k(ut);break;case 10:ss(s.type);break;case 22:case 23:oi(s),Gh(),t!==null&&k(fr);break;case 24:ss(_t)}}function ha(t,s){try{var r=s.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var h=l.next;r=h;do{if((r.tag&t)===t){l=void 0;var u=r.create,p=r.inst;l=u(),p.destroy=l}r=r.next}while(r!==h)}}catch(v){Ye(s,s.return,v)}}function zs(t,s,r){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var u=h.next;l=u;do{if((l.tag&t)===t){var p=l.inst,v=p.destroy;if(v!==void 0){p.destroy=void 0,h=s;var x=r,L=v;try{L()}catch(K){Ye(h,x,K)}}}l=l.next}while(l!==u)}}catch(K){Ye(s,s.return,K)}}function dm(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{i_(s,r)}catch(l){Ye(t,t.return,l)}}}function fm(t,s,r){r.props=vr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){Ye(t,s,l)}}function ca(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(h){Ye(t,s,h)}}function Ui(t,s){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(h){Ye(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){Ye(t,s,h)}else r.current=null}function _m(t){var s=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(h){Ye(t,t.return,h)}}function bc(t,s,r){try{var l=t.stateNode;gy(l,t.type,r,s),l[Zt]=s}catch(h){Ye(t,t.return,h)}}function mm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Gs(t.type)||t.tag===4}function wc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Gs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xc(t,s,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Qi));else if(l!==4&&(l===27&&Gs(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(xc(t,s,r),t=t.sibling;t!==null;)xc(t,s,r),t=t.sibling}function Pl(t,s,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(l!==4&&(l===27&&Gs(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Pl(t,s,r),t=t.sibling;t!==null;)Pl(t,s,r),t=t.sibling}function pm(t){var s=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Ut(s,l,r),s[Ot]=t,s[Zt]=r}catch(u){Ye(t,t.return,u)}}var os=!1,gt=!1,Cc=!1,gm=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function $S(t,s){if(t=t.containerInfo,Kc=oo,t=Tf(t),gh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var h=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var p=0,v=-1,x=-1,L=0,K=0,F=t,O=null;t:for(;;){for(var P;F!==r||h!==0&&F.nodeType!==3||(v=p+h),F!==u||l!==0&&F.nodeType!==3||(x=p+l),F.nodeType===3&&(p+=F.nodeValue.length),(P=F.firstChild)!==null;)O=F,F=P;for(;;){if(F===t)break t;if(O===r&&++L===h&&(v=p),O===u&&++K===l&&(x=p),(P=F.nextSibling)!==null)break;F=O,O=F.parentNode}F=P}r=v===-1||x===-1?null:{start:v,end:x}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ic={focusedElem:t,selectionRange:r},oo=!1,Tt=s;Tt!==null;)if(s=Tt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Tt=t;else for(;Tt!==null;){switch(s=Tt,u=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)h=t[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&u!==null){t=void 0,r=s,h=u.memoizedProps,u=u.memoizedState,l=r.stateNode;try{var de=vr(r.type,h);t=l.getSnapshotBeforeUpdate(de,u),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){Ye(r,r.return,Se)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)Xc(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,Tt=t;break}Tt=s.return}}function vm(t,s,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:cs(t,r),l&4&&ha(5,r);break;case 1:if(cs(t,r),l&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(p){Ye(r,r.return,p)}else{var h=vr(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(p){Ye(r,r.return,p)}}l&64&&dm(r),l&512&&ca(r,r.return);break;case 3:if(cs(t,r),l&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{i_(t,s)}catch(p){Ye(r,r.return,p)}}break;case 27:s===null&&l&4&&pm(r);case 26:case 5:cs(t,r),s===null&&l&4&&_m(r),l&512&&ca(r,r.return);break;case 12:cs(t,r);break;case 31:cs(t,r),l&4&&bm(t,r);break;case 13:cs(t,r),l&4&&wm(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=ny.bind(null,r),Ey(t,r))));break;case 22:if(l=r.memoizedState!==null||os,!l){s=s!==null&&s.memoizedState!==null||gt,h=os;var u=gt;os=l,(gt=s)&&!u?us(t,r,(r.subtreeFlags&8772)!==0):cs(t,r),os=h,gt=u}break;case 30:break;default:cs(t,r)}}function Sm(t){var s=t.alternate;s!==null&&(t.alternate=null,Sm(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&eh(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,Jt=!1;function hs(t,s,r){for(r=r.child;r!==null;)ym(t,s,r),r=r.sibling}function ym(t,s,r){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Xi,r)}catch{}switch(r.tag){case 26:gt||Ui(r,s),hs(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:gt||Ui(r,s);var l=Qe,h=Jt;Gs(r.type)&&(Qe=r.stateNode,Jt=!1),hs(t,s,r),Sa(r.stateNode),Qe=l,Jt=h;break;case 5:gt||Ui(r,s);case 6:if(l=Qe,h=Jt,Qe=null,hs(t,s,r),Qe=l,Jt=h,Qe!==null)if(Jt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(r.stateNode)}catch(u){Ye(r,s,u)}else try{Qe.removeChild(r.stateNode)}catch(u){Ye(r,s,u)}break;case 18:Qe!==null&&(Jt?(t=Qe,dp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),yn(t)):dp(Qe,r.stateNode));break;case 4:l=Qe,h=Jt,Qe=r.stateNode.containerInfo,Jt=!0,hs(t,s,r),Qe=l,Jt=h;break;case 0:case 11:case 14:case 15:zs(2,r,s),gt||zs(4,r,s),hs(t,s,r);break;case 1:gt||(Ui(r,s),l=r.stateNode,typeof l.componentWillUnmount=="function"&&fm(r,s,l)),hs(t,s,r);break;case 21:hs(t,s,r);break;case 22:gt=(l=gt)||r.memoizedState!==null,hs(t,s,r),gt=l;break;default:hs(t,s,r)}}function bm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{yn(t)}catch(r){Ye(s,s.return,r)}}}function wm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{yn(t)}catch(r){Ye(s,s.return,r)}}function ZS(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new gm),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new gm),s;default:throw Error(a(435,t.tag))}}function Yl(t,s){var r=ZS(t);s.forEach(function(l){if(!r.has(l)){r.add(l);var h=ay.bind(null,t,l);l.then(h,h)}})}function ei(t,s){var r=s.deletions;if(r!==null)for(var l=0;l<r.length;l++){var h=r[l],u=t,p=s,v=p;e:for(;v!==null;){switch(v.tag){case 27:if(Gs(v.type)){Qe=v.stateNode,Jt=!1;break e}break;case 5:Qe=v.stateNode,Jt=!1;break e;case 3:case 4:Qe=v.stateNode.containerInfo,Jt=!0;break e}v=v.return}if(Qe===null)throw Error(a(160));ym(u,p,h),Qe=null,Jt=!1,u=h.alternate,u!==null&&(u.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)xm(s,t),s=s.sibling}var Bi=null;function xm(t,s){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ei(s,t),ti(t),l&4&&(zs(3,t,t.return),ha(3,t),zs(5,t,t.return));break;case 1:ei(s,t),ti(t),l&512&&(gt||r===null||Ui(r,r.return)),l&64&&os&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var h=Bi;if(ei(s,t),ti(t),l&512&&(gt||r===null||Ui(r,r.return)),l&4){var u=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":u=h.getElementsByTagName("title")[0],(!u||u[Hn]||u[Ot]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=h.createElement(l),h.head.insertBefore(u,h.querySelector("head > title"))),Ut(u,l,r),u[Ot]=t,Mt(u),l=u;break e;case"link":var p=xp("link","href",h).get(l+(r.href||""));if(p){for(var v=0;v<p.length;v++)if(u=p[v],u.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&u.getAttribute("rel")===(r.rel==null?null:r.rel)&&u.getAttribute("title")===(r.title==null?null:r.title)&&u.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){p.splice(v,1);break t}}u=h.createElement(l),Ut(u,l,r),h.head.appendChild(u);break;case"meta":if(p=xp("meta","content",h).get(l+(r.content||""))){for(v=0;v<p.length;v++)if(u=p[v],u.getAttribute("content")===(r.content==null?null:""+r.content)&&u.getAttribute("name")===(r.name==null?null:r.name)&&u.getAttribute("property")===(r.property==null?null:r.property)&&u.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&u.getAttribute("charset")===(r.charSet==null?null:r.charSet)){p.splice(v,1);break t}}u=h.createElement(l),Ut(u,l,r),h.head.appendChild(u);break;default:throw Error(a(468,l))}u[Ot]=t,Mt(u),l=u}t.stateNode=l}else Cp(h,t.type,t.stateNode);else t.stateNode=wp(h,l,t.memoizedProps);else u!==l?(u===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):u.count--,l===null?Cp(h,t.type,t.stateNode):wp(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&bc(t,t.memoizedProps,r.memoizedProps)}break;case 27:ei(s,t),ti(t),l&512&&(gt||r===null||Ui(r,r.return)),r!==null&&l&4&&bc(t,t.memoizedProps,r.memoizedProps);break;case 5:if(ei(s,t),ti(t),l&512&&(gt||r===null||Ui(r,r.return)),t.flags&32){h=t.stateNode;try{Yr(h,"")}catch(de){Ye(t,t.return,de)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,bc(t,h,r!==null?r.memoizedProps:h)),l&1024&&(Cc=!0);break;case 6:if(ei(s,t),ti(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(de){Ye(t,t.return,de)}}break;case 3:if(ro=null,h=Bi,Bi=io(s.containerInfo),ei(s,t),Bi=h,ti(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{yn(s.containerInfo)}catch(de){Ye(t,t.return,de)}Cc&&(Cc=!1,Cm(t));break;case 4:l=Bi,Bi=io(t.stateNode.containerInfo),ei(s,t),ti(t),Bi=l;break;case 12:ei(s,t),ti(t);break;case 31:ei(s,t),ti(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Yl(t,l)));break;case 13:ei(s,t),ti(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Wl=Rt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Yl(t,l)));break;case 22:h=t.memoizedState!==null;var x=r!==null&&r.memoizedState!==null,L=os,K=gt;if(os=L||h,gt=K||x,ei(s,t),gt=K,os=L,ti(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(r===null||x||os||gt||Sr(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){x=r=s;try{if(u=x.stateNode,h)p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{v=x.stateNode;var F=x.memoizedProps.style,O=F!=null&&F.hasOwnProperty("display")?F.display:null;v.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(de){Ye(x,x.return,de)}}}else if(s.tag===6){if(r===null){x=s;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(de){Ye(x,x.return,de)}}}else if(s.tag===18){if(r===null){x=s;try{var P=x.stateNode;h?fp(P,!0):fp(x.stateNode,!1)}catch(de){Ye(x,x.return,de)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Yl(t,r))));break;case 19:ei(s,t),ti(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Yl(t,l)));break;case 30:break;case 21:break;default:ei(s,t),ti(t)}}function ti(t){var s=t.flags;if(s&2){try{for(var r,l=t.return;l!==null;){if(mm(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var h=r.stateNode,u=wc(t);Pl(t,u,h);break;case 5:var p=r.stateNode;r.flags&32&&(Yr(p,""),r.flags&=-33);var v=wc(t);Pl(t,v,p);break;case 3:case 4:var x=r.stateNode.containerInfo,L=wc(t);xc(t,L,x);break;default:throw Error(a(161))}}catch(K){Ye(t,t.return,K)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Cm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Cm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function cs(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vm(t,s.alternate,s),s=s.sibling}function Sr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:zs(4,s,s.return),Sr(s);break;case 1:Ui(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&fm(s,s.return,r),Sr(s);break;case 27:Sa(s.stateNode);case 26:case 5:Ui(s,s.return),Sr(s);break;case 22:s.memoizedState===null&&Sr(s);break;case 30:Sr(s);break;default:Sr(s)}t=t.sibling}}function us(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,u=s,p=u.flags;switch(u.tag){case 0:case 11:case 15:us(h,u,r),ha(4,u);break;case 1:if(us(h,u,r),l=u,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){Ye(l,l.return,L)}if(l=u,h=l.updateQueue,h!==null){var v=l.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)t_(x[h],v)}catch(L){Ye(l,l.return,L)}}r&&p&64&&dm(u),ca(u,u.return);break;case 27:pm(u);case 26:case 5:us(h,u,r),r&&l===null&&p&4&&_m(u),ca(u,u.return);break;case 12:us(h,u,r);break;case 31:us(h,u,r),r&&p&4&&bm(h,u);break;case 13:us(h,u,r),r&&p&4&&wm(h,u);break;case 22:u.memoizedState===null&&us(h,u,r),ca(u,u.return);break;case 30:break;default:us(h,u,r)}s=s.sibling}}function Ec(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&$n(r))}function kc(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&$n(t))}function Li(t,s,r,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Em(t,s,r,l),s=s.sibling}function Em(t,s,r,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Li(t,s,r,l),h&2048&&ha(9,s);break;case 1:Li(t,s,r,l);break;case 3:Li(t,s,r,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&$n(t)));break;case 12:if(h&2048){Li(t,s,r,l),t=s.stateNode;try{var u=s.memoizedProps,p=u.id,v=u.onPostCommit;typeof v=="function"&&v(p,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){Ye(s,s.return,x)}}else Li(t,s,r,l);break;case 31:Li(t,s,r,l);break;case 13:Li(t,s,r,l);break;case 23:break;case 22:u=s.stateNode,p=s.alternate,s.memoizedState!==null?u._visibility&2?Li(t,s,r,l):ua(t,s):u._visibility&2?Li(t,s,r,l):(u._visibility|=2,hn(t,s,r,l,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Ec(p,s);break;case 24:Li(t,s,r,l),h&2048&&kc(s.alternate,s);break;default:Li(t,s,r,l)}}function hn(t,s,r,l,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var u=t,p=s,v=r,x=l,L=p.flags;switch(p.tag){case 0:case 11:case 15:hn(u,p,v,x,h),ha(8,p);break;case 23:break;case 22:var K=p.stateNode;p.memoizedState!==null?K._visibility&2?hn(u,p,v,x,h):ua(u,p):(K._visibility|=2,hn(u,p,v,x,h)),h&&L&2048&&Ec(p.alternate,p);break;case 24:hn(u,p,v,x,h),h&&L&2048&&kc(p.alternate,p);break;default:hn(u,p,v,x,h)}s=s.sibling}}function ua(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,l=s,h=l.flags;switch(l.tag){case 22:ua(r,l),h&2048&&Ec(l.alternate,l);break;case 24:ua(r,l),h&2048&&kc(l.alternate,l);break;default:ua(r,l)}s=s.sibling}}var da=8192;function cn(t,s,r){if(t.subtreeFlags&da)for(t=t.child;t!==null;)km(t,s,r),t=t.sibling}function km(t,s,r){switch(t.tag){case 26:cn(t,s,r),t.flags&da&&t.memoizedState!==null&&Hy(r,Bi,t.memoizedState,t.memoizedProps);break;case 5:cn(t,s,r);break;case 3:case 4:var l=Bi;Bi=io(t.stateNode.containerInfo),cn(t,s,r),Bi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=da,da=16777216,cn(t,s,r),da=l):cn(t,s,r));break;default:cn(t,s,r)}}function Rm(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function fa(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Tt=l,Tm(l,t)}Rm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mm(t),t=t.sibling}function Mm(t){switch(t.tag){case 0:case 11:case 15:fa(t),t.flags&2048&&zs(9,t,t.return);break;case 3:fa(t);break;case 12:fa(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Gl(t)):fa(t);break;default:fa(t)}}function Gl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Tt=l,Tm(l,t)}Rm(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:zs(8,s,s.return),Gl(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Gl(s));break;default:Gl(s)}t=t.sibling}}function Tm(t,s){for(;Tt!==null;){var r=Tt;switch(r.tag){case 0:case 11:case 15:zs(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:$n(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,Tt=l;else e:for(r=t;Tt!==null;){l=Tt;var h=l.sibling,u=l.return;if(Sm(l),l===r){Tt=null;break e}if(h!==null){h.return=u,Tt=h;break e}Tt=u}}}var QS={getCacheForType:function(t){var s=Ht(_t),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return Ht(_t).controller.signal}},JS=typeof WeakMap=="function"?WeakMap:Map,je=0,Fe=null,De=null,Ne=0,Pe=0,hi=null,Hs=!1,un=!1,Rc=!1,ds=0,nt=0,js=0,yr=0,Mc=0,ci=0,dn=0,_a=null,ii=null,Tc=!1,Wl=0,Dm=0,Kl=1/0,Il=null,Us=null,wt=0,qs=null,fn=null,fs=0,Dc=0,Ac=null,Am=null,ma=0,Nc=null;function ui(){return(je&2)!==0&&Ne!==0?Ne&-Ne:T.T!==null?jc():Id()}function Nm(){if(ci===0)if((Ne&536870912)===0||Le){var t=ge;ge<<=1,(ge&3932160)===0&&(ge=262144),ci=t}else ci=536870912;return t=li.current,t!==null&&(t.flags|=32),ci}function si(t,s,r){(t===Fe&&(Pe===2||Pe===9)||t.cancelPendingCommit!==null)&&(_n(t,0),Ps(t,Ne,ci,!1)),Cs(t,r),((je&2)===0||t!==Fe)&&(t===Fe&&((je&2)===0&&(yr|=r),nt===4&&Ps(t,Ne,ci,!1)),qi(t))}function Bm(t,s,r){if((je&6)!==0)throw Error(a(327));var l=!r&&(s&127)===0&&(s&t.expiredLanes)===0||ct(t,s),h=l?iy(t,s):Lc(t,s,!0),u=l;do{if(h===0){un&&!l&&Ps(t,s,0,!1);break}else{if(r=t.current.alternate,u&&!ey(r)){h=Lc(t,s,!1),u=!1;continue}if(h===2){if(u=s,t.errorRecoveryDisabledLanes&u)var p=0;else p=t.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){s=p;e:{var v=t;h=_a;var x=v.current.memoizedState.isDehydrated;if(x&&(_n(v,p).flags|=256),p=Lc(v,p,!1),p!==2){if(Rc&&!x){v.errorRecoveryDisabledLanes|=u,yr|=u,h=4;break e}u=ii,ii=h,u!==null&&(ii===null?ii=u:ii.push.apply(ii,u))}h=p}if(u=!1,h!==2)continue}}if(h===1){_n(t,0),Ps(t,s,0,!0);break}e:{switch(l=t,u=h,u){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Ps(l,s,ci,!Hs);break e;case 2:ii=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(h=Wl+300-Rt(),10<h)){if(Ps(l,s,ci,!Hs),ht(l,0,!0)!==0)break e;fs=s,l.timeoutHandle=cp(Lm.bind(null,l,r,ii,Il,Tc,s,ci,yr,dn,Hs,u,"Throttled",-0,0),h);break e}Lm(l,r,ii,Il,Tc,s,ci,yr,dn,Hs,u,null,-0,0)}}break}while(!0);qi(t)}function Lm(t,s,r,l,h,u,p,v,x,L,K,F,O,P){if(t.timeoutHandle=-1,F=s.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},km(s,u,F);var de=(u&62914560)===u?Wl-Rt():(u&4194048)===u?Dm-Rt():0;if(de=jy(F,de),de!==null){fs=u,t.cancelPendingCommit=de(Ym.bind(null,t,s,u,r,l,h,p,v,x,K,F,null,O,P)),Ps(t,u,p,!L);return}}Ym(t,s,u,r,l,h,p,v,x)}function ey(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var h=r[l],u=h.getSnapshot;h=h.value;try{if(!ni(u(),h))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ps(t,s,r,l){s&=~Mc,s&=~yr,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var u=31-q(h),p=1<<u;l[u]=-1,h&=~p}r!==0&&Gd(t,r,s)}function Fl(){return(je&6)===0?(pa(0),!1):!0}function Bc(){if(De!==null){if(Pe===0)var t=De.return;else t=De,is=ur=null,Xh(t),rn=null,Qn=0,t=De;for(;t!==null;)um(t.alternate,t),t=t.return;De=null}}function _n(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,yy(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),fs=0,Bc(),Fe=t,De=r=es(t.current,null),Ne=s,Pe=0,hi=null,Hs=!1,un=ct(t,s),Rc=!1,dn=ci=Mc=yr=js=nt=0,ii=_a=null,Tc=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-q(l),u=1<<h;s|=t[h],l&=~u}return ds=s,_l(),r}function Om(t,s){Ce=null,T.H=aa,s===sn||s===wl?(s=Zf(),Pe=3):s===Hh?(s=Zf(),Pe=4):Pe=s===uc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,hi=s,De===null&&(nt=1,zl(t,Si(s,t.current)))}function zm(){var t=li.current;return t===null?!0:(Ne&4194048)===Ne?xi===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?t===xi:!1}function Hm(){var t=T.H;return T.H=aa,t===null?aa:t}function jm(){var t=T.A;return T.A=QS,t}function Vl(){nt=4,Hs||(Ne&4194048)!==Ne&&li.current!==null||(un=!0),(js&134217727)===0&&(yr&134217727)===0||Fe===null||Ps(Fe,Ne,ci,!1)}function Lc(t,s,r){var l=je;je|=2;var h=Hm(),u=jm();(Fe!==t||Ne!==s)&&(Il=null,_n(t,s)),s=!1;var p=nt;e:do try{if(Pe!==0&&De!==null){var v=De,x=hi;switch(Pe){case 8:Bc(),p=6;break e;case 3:case 2:case 9:case 6:li.current===null&&(s=!0);var L=Pe;if(Pe=0,hi=null,mn(t,v,x,L),r&&un){p=0;break e}break;default:L=Pe,Pe=0,hi=null,mn(t,v,x,L)}}ty(),p=nt;break}catch(K){Om(t,K)}while(!0);return s&&t.shellSuspendCounter++,is=ur=null,je=l,T.H=h,T.A=u,De===null&&(Fe=null,Ne=0,_l()),p}function ty(){for(;De!==null;)Um(De)}function iy(t,s){var r=je;je|=2;var l=Hm(),h=jm();Fe!==t||Ne!==s?(Il=null,Kl=Rt()+500,_n(t,s)):un=ct(t,s);e:do try{if(Pe!==0&&De!==null){s=De;var u=hi;t:switch(Pe){case 1:Pe=0,hi=null,mn(t,s,u,1);break;case 2:case 9:if(Xf(u)){Pe=0,hi=null,qm(s);break}s=function(){Pe!==2&&Pe!==9||Fe!==t||(Pe=7),qi(t)},u.then(s,s);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:Xf(u)?(Pe=0,hi=null,qm(s)):(Pe=0,hi=null,mn(t,s,u,7));break;case 5:var p=null;switch(De.tag){case 26:p=De.memoizedState;case 5:case 27:var v=De;if(p?Ep(p):v.stateNode.complete){Pe=0,hi=null;var x=v.sibling;if(x!==null)De=x;else{var L=v.return;L!==null?(De=L,Xl(L)):De=null}break t}}Pe=0,hi=null,mn(t,s,u,5);break;case 6:Pe=0,hi=null,mn(t,s,u,6);break;case 8:Bc(),nt=6;break e;default:throw Error(a(462))}}sy();break}catch(K){Om(t,K)}while(!0);return is=ur=null,T.H=l,T.A=h,je=r,De!==null?0:(Fe=null,Ne=0,_l(),nt)}function sy(){for(;De!==null&&!el();)Um(De)}function Um(t){var s=hm(t.alternate,t,ds);t.memoizedProps=t.pendingProps,s===null?Xl(t):De=s}function qm(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=sm(r,s,s.pendingProps,s.type,void 0,Ne);break;case 11:s=sm(r,s,s.pendingProps,s.type.render,s.ref,Ne);break;case 5:Xh(s);default:um(r,s),s=De=jf(s,ds),s=hm(r,s,ds)}t.memoizedProps=t.pendingProps,s===null?Xl(t):De=s}function mn(t,s,r,l){is=ur=null,Xh(s),rn=null,Qn=0;var h=s.return;try{if(KS(t,h,s,r,Ne)){nt=1,zl(t,Si(r,t.current)),De=null;return}}catch(u){if(h!==null)throw De=h,u;nt=1,zl(t,Si(r,t.current)),De=null;return}s.flags&32768?(Le||l===1?t=!0:un||(Ne&536870912)!==0?t=!1:(Hs=t=!0,(l===2||l===9||l===3||l===6)&&(l=li.current,l!==null&&l.tag===13&&(l.flags|=16384))),Pm(s,t)):Xl(s)}function Xl(t){var s=t;do{if((s.flags&32768)!==0){Pm(s,Hs);return}t=s.return;var r=VS(s.alternate,s,ds);if(r!==null){De=r;return}if(s=s.sibling,s!==null){De=s;return}De=s=t}while(s!==null);nt===0&&(nt=5)}function Pm(t,s){do{var r=XS(t.alternate,t);if(r!==null){r.flags&=32767,De=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){De=t;return}De=t=r}while(t!==null);nt=6,De=null}function Ym(t,s,r,l,h,u,p,v,x){t.cancelPendingCommit=null;do $l();while(wt!==0);if((je&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(u=s.lanes|s.childLanes,u|=wh,$o(t,r,u,p,v,x),t===Fe&&(De=Fe=null,Ne=0),fn=s,qs=t,fs=r,Dc=u,Ac=h,Am=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ly(Or,function(){return Fm(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=T.T,T.T=null,h=G.p,G.p=2,p=je,je|=4;try{$S(t,s,r)}finally{je=p,G.p=h,T.T=l}}wt=1,Gm(),Wm(),Km()}}function Gm(){if(wt===1){wt=0;var t=qs,s=fn,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=T.T,T.T=null;var l=G.p;G.p=2;var h=je;je|=4;try{xm(s,t);var u=Ic,p=Tf(t.containerInfo),v=u.focusedElem,x=u.selectionRange;if(p!==v&&v&&v.ownerDocument&&Mf(v.ownerDocument.documentElement,v)){if(x!==null&&gh(v)){var L=x.start,K=x.end;if(K===void 0&&(K=L),"selectionStart"in v)v.selectionStart=L,v.selectionEnd=Math.min(K,v.value.length);else{var F=v.ownerDocument||document,O=F&&F.defaultView||window;if(O.getSelection){var P=O.getSelection(),de=v.textContent.length,Se=Math.min(x.start,de),Ke=x.end===void 0?Se:Math.min(x.end,de);!P.extend&&Se>Ke&&(p=Ke,Ke=Se,Se=p);var A=Rf(v,Se),R=Rf(v,Ke);if(A&&R&&(P.rangeCount!==1||P.anchorNode!==A.node||P.anchorOffset!==A.offset||P.focusNode!==R.node||P.focusOffset!==R.offset)){var B=F.createRange();B.setStart(A.node,A.offset),P.removeAllRanges(),Se>Ke?(P.addRange(B),P.extend(R.node,R.offset)):(B.setEnd(R.node,R.offset),P.addRange(B))}}}}for(F=[],P=v;P=P.parentNode;)P.nodeType===1&&F.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<F.length;v++){var I=F[v];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}oo=!!Kc,Ic=Kc=null}finally{je=h,G.p=l,T.T=r}}t.current=s,wt=2}}function Wm(){if(wt===2){wt=0;var t=qs,s=fn,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=T.T,T.T=null;var l=G.p;G.p=2;var h=je;je|=4;try{vm(t,s.alternate,s)}finally{je=h,G.p=l,T.T=r}}wt=3}}function Km(){if(wt===4||wt===3){wt=0,st();var t=qs,s=fn,r=fs,l=Am;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?wt=5:(wt=0,fn=qs=null,Im(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Us=null),Qo(r),s=s.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Xi,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=T.T,h=G.p,G.p=2,T.T=null;try{for(var u=t.onRecoverableError,p=0;p<l.length;p++){var v=l[p];u(v.value,{componentStack:v.stack})}}finally{T.T=s,G.p=h}}(fs&3)!==0&&$l(),qi(t),h=t.pendingLanes,(r&261930)!==0&&(h&42)!==0?t===Nc?ma++:(ma=0,Nc=t):ma=0,pa(0)}}function Im(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,$n(s)))}function $l(){return Gm(),Wm(),Km(),Fm()}function Fm(){if(wt!==5)return!1;var t=qs,s=Dc;Dc=0;var r=Qo(fs),l=T.T,h=G.p;try{G.p=32>r?32:r,T.T=null,r=Ac,Ac=null;var u=qs,p=fs;if(wt=0,fn=qs=null,fs=0,(je&6)!==0)throw Error(a(331));var v=je;if(je|=4,Mm(u.current),Em(u,u.current,p,r),je=v,pa(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Xi,u)}catch{}return!0}finally{G.p=h,T.T=l,Im(t,s)}}function Vm(t,s,r){s=Si(r,s),s=cc(t.stateNode,s,2),t=Bs(t,s,2),t!==null&&(Cs(t,2),qi(t))}function Ye(t,s,r){if(t.tag===3)Vm(t,t,r);else for(;s!==null;){if(s.tag===3){Vm(s,t,r);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Us===null||!Us.has(l))){t=Si(r,t),r=X_(2),l=Bs(s,r,2),l!==null&&($_(r,l,s,t),Cs(l,2),qi(l));break}}s=s.return}}function Oc(t,s,r){var l=t.pingCache;if(l===null){l=t.pingCache=new JS;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(r)||(Rc=!0,h.add(r),t=ry.bind(null,t,s,r),s.then(t,t))}function ry(t,s,r){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Fe===t&&(Ne&r)===r&&(nt===4||nt===3&&(Ne&62914560)===Ne&&300>Rt()-Wl?(je&2)===0&&_n(t,0):Mc|=r,dn===Ne&&(dn=0)),qi(t)}function Xm(t,s){s===0&&(s=$i()),t=or(t,s),t!==null&&(Cs(t,s),qi(t))}function ny(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Xm(t,r)}function ay(t,s){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(r=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(s),Xm(t,r)}function ly(t,s){return Ln(t,s)}var Zl=null,pn=null,zc=!1,Ql=!1,Hc=!1,Ys=0;function qi(t){t!==pn&&t.next===null&&(pn===null?Zl=pn=t:pn=pn.next=t),Ql=!0,zc||(zc=!0,hy())}function pa(t,s){if(!Hc&&Ql){Hc=!0;do for(var r=!1,l=Zl;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var u=0;else{var p=l.suspendedLanes,v=l.pingedLanes;u=(1<<31-q(42|t)+1)-1,u&=h&~(p&~v),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(r=!0,Jm(l,u))}else u=Ne,u=ht(l,l===Fe?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||ct(l,u)||(r=!0,Jm(l,u));l=l.next}while(r);Hc=!1}}function oy(){$m()}function $m(){Ql=zc=!1;var t=0;Ys!==0&&Sy()&&(t=Ys);for(var s=Rt(),r=null,l=Zl;l!==null;){var h=l.next,u=Zm(l,s);u===0?(l.next=null,r===null?Zl=h:r.next=h,h===null&&(pn=r)):(r=l,(t!==0||(u&3)!==0)&&(Ql=!0)),l=h}wt!==0&&wt!==5||pa(t),Ys!==0&&(Ys=0)}function Zm(t,s){for(var r=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,u=t.pendingLanes&-62914561;0<u;){var p=31-q(u),v=1<<p,x=h[p];x===-1?((v&r)===0||(v&l)!==0)&&(h[p]=mi(v,s)):x<=s&&(t.expiredLanes|=v),u&=~v}if(s=Fe,r=Ne,r=ht(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===s&&(Pe===2||Pe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&sr(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||ct(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(l!==null&&sr(l),Qo(r)){case 2:case 8:r=tl;break;case 32:r=Or;break;case 268435456:r=il;break;default:r=Or}return l=Qm.bind(null,t),r=Ln(r,l),t.callbackPriority=s,t.callbackNode=r,s}return l!==null&&l!==null&&sr(l),t.callbackPriority=2,t.callbackNode=null,2}function Qm(t,s){if(wt!==0&&wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if($l()&&t.callbackNode!==r)return null;var l=Ne;return l=ht(t,t===Fe?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Bm(t,l,s),Zm(t,Rt()),t.callbackNode!=null&&t.callbackNode===r?Qm.bind(null,t):null)}function Jm(t,s){if($l())return null;Bm(t,s,!0)}function hy(){by(function(){(je&6)!==0?Ln(On,oy):$m()})}function jc(){if(Ys===0){var t=en;t===0&&(t=ue,ue<<=1,(ue&261888)===0&&(ue=256)),Ys=t}return Ys}function ep(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:al(""+t)}function tp(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function cy(t,s,r,l,h){if(s==="submit"&&r&&r.stateNode===h){var u=ep((h[Zt]||null).action),p=l.submitter;p&&(s=(s=p[Zt]||null)?ep(s.formAction):p.getAttribute("formAction"),s!==null&&(u=s,p=null));var v=new cl("action","action",null,l,h);t.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ys!==0){var x=p?tp(h,p):new FormData(h);rc(r,{pending:!0,data:x,method:h.method,action:u},null,x)}}else typeof u=="function"&&(v.preventDefault(),x=p?tp(h,p):new FormData(h),rc(r,{pending:!0,data:x,method:h.method,action:u},u,x))},currentTarget:h}]})}}for(var Uc=0;Uc<bh.length;Uc++){var qc=bh[Uc],uy=qc.toLowerCase(),dy=qc[0].toUpperCase()+qc.slice(1);Ni(uy,"on"+dy)}Ni(Nf,"onAnimationEnd"),Ni(Bf,"onAnimationIteration"),Ni(Lf,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(MS,"onTransitionRun"),Ni(TS,"onTransitionStart"),Ni(DS,"onTransitionCancel"),Ni(Of,"onTransitionEnd"),qr("onMouseEnter",["mouseout","mouseover"]),qr("onMouseLeave",["mouseout","mouseover"]),qr("onPointerEnter",["pointerout","pointerover"]),qr("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ga));function ip(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],h=l.event;l=l.listeners;e:{var u=void 0;if(s)for(var p=l.length-1;0<=p;p--){var v=l[p],x=v.instance,L=v.currentTarget;if(v=v.listener,x!==u&&h.isPropagationStopped())break e;u=v,h.currentTarget=L;try{u(h)}catch(K){fl(K)}h.currentTarget=null,u=x}else for(p=0;p<l.length;p++){if(v=l[p],x=v.instance,L=v.currentTarget,v=v.listener,x!==u&&h.isPropagationStopped())break e;u=v,h.currentTarget=L;try{u(h)}catch(K){fl(K)}h.currentTarget=null,u=x}}}}function Ae(t,s){var r=s[Jo];r===void 0&&(r=s[Jo]=new Set);var l=t+"__bubble";r.has(l)||(sp(s,t,2,!1),r.add(l))}function Pc(t,s,r){var l=0;s&&(l|=4),sp(r,t,l,s)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Yc(t){if(!t[Jl]){t[Jl]=!0,Xd.forEach(function(r){r!=="selectionchange"&&(fy.has(r)||Pc(r,!1,t),Pc(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Jl]||(s[Jl]=!0,Pc("selectionchange",!1,s))}}function sp(t,s,r,l){switch(Np(s)){case 2:var h=Py;break;case 8:h=Yy;break;default:h=su}r=h.bind(null,s,r,t),h=void 0,!oh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,r,{capture:!0,passive:h}):t.addEventListener(s,r,!0):h!==void 0?t.addEventListener(s,r,{passive:h}):t.addEventListener(s,r,!1)}function Gc(t,s,r,l,h){var u=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var v=l.stateNode.containerInfo;if(v===h)break;if(p===4)for(p=l.return;p!==null;){var x=p.tag;if((x===3||x===4)&&p.stateNode.containerInfo===h)return;p=p.return}for(;v!==null;){if(p=Hr(v),p===null)return;if(x=p.tag,x===5||x===6||x===26||x===27){l=u=p;continue e}v=v.parentNode}}l=l.return}of(function(){var L=u,K=ah(r),F=[];e:{var O=zf.get(t);if(O!==void 0){var P=cl,de=t;switch(t){case"keypress":if(ol(r)===0)break e;case"keydown":case"keyup":P=aS;break;case"focusin":de="focus",P=dh;break;case"focusout":de="blur",P=dh;break;case"beforeblur":case"afterblur":P=dh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=V0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=hS;break;case Nf:case Bf:case Lf:P=Z0;break;case Of:P=uS;break;case"scroll":case"scrollend":P=I0;break;case"wheel":P=fS;break;case"copy":case"cut":case"paste":P=J0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=ff;break;case"toggle":case"beforetoggle":P=mS}var Se=(s&4)!==0,Ke=!Se&&(t==="scroll"||t==="scrollend"),A=Se?O!==null?O+"Capture":null:O;Se=[];for(var R=L,B;R!==null;){var I=R;if(B=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||B===null||A===null||(I=Un(R,A),I!=null&&Se.push(va(R,I,B))),Ke)break;R=R.return}0<Se.length&&(O=new P(O,de,null,r,K),F.push({event:O,listeners:Se}))}}if((s&7)===0){e:{if(O=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",O&&r!==nh&&(de=r.relatedTarget||r.fromElement)&&(Hr(de)||de[zr]))break e;if((P||O)&&(O=K.window===K?K:(O=K.ownerDocument)?O.defaultView||O.parentWindow:window,P?(de=r.relatedTarget||r.toElement,P=L,de=de?Hr(de):null,de!==null&&(Ke=c(de),Se=de.tag,de!==Ke||Se!==5&&Se!==27&&Se!==6)&&(de=null)):(P=null,de=L),P!==de)){if(Se=uf,I="onMouseLeave",A="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(Se=ff,I="onPointerLeave",A="onPointerEnter",R="pointer"),Ke=P==null?O:jn(P),B=de==null?O:jn(de),O=new Se(I,R+"leave",P,r,K),O.target=Ke,O.relatedTarget=B,I=null,Hr(K)===L&&(Se=new Se(A,R+"enter",de,r,K),Se.target=B,Se.relatedTarget=Ke,I=Se),Ke=I,P&&de)t:{for(Se=_y,A=P,R=de,B=0,I=A;I;I=Se(I))B++;I=0;for(var pe=R;pe;pe=Se(pe))I++;for(;0<B-I;)A=Se(A),B--;for(;0<I-B;)R=Se(R),I--;for(;B--;){if(A===R||R!==null&&A===R.alternate){Se=A;break t}A=Se(A),R=Se(R)}Se=null}else Se=null;P!==null&&rp(F,O,P,Se,!1),de!==null&&Ke!==null&&rp(F,Ke,de,Se,!0)}}e:{if(O=L?jn(L):window,P=O.nodeName&&O.nodeName.toLowerCase(),P==="select"||P==="input"&&O.type==="file")var ze=bf;else if(Sf(O))if(wf)ze=ES;else{ze=xS;var fe=wS}else P=O.nodeName,!P||P.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?L&&rh(L.elementType)&&(ze=bf):ze=CS;if(ze&&(ze=ze(t,L))){yf(F,ze,r,K);break e}fe&&fe(t,O,L),t==="focusout"&&L&&O.type==="number"&&L.memoizedProps.value!=null&&sh(O,"number",O.value)}switch(fe=L?jn(L):window,t){case"focusin":(Sf(fe)||fe.contentEditable==="true")&&(Ir=fe,vh=L,Fn=null);break;case"focusout":Fn=vh=Ir=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,Df(F,r,K);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":Df(F,r,K)}var Ee;if(_h)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Kr?gf(t,r)&&(Be="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Be="onCompositionStart");Be&&(_f&&r.locale!=="ko"&&(Kr||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Kr&&(Ee=hf()):(ks=K,hh="value"in ks?ks.value:ks.textContent,Kr=!0)),fe=eo(L,Be),0<fe.length&&(Be=new df(Be,t,null,r,K),F.push({event:Be,listeners:fe}),Ee?Be.data=Ee:(Ee=vf(r),Ee!==null&&(Be.data=Ee)))),(Ee=gS?vS(t,r):SS(t,r))&&(Be=eo(L,"onBeforeInput"),0<Be.length&&(fe=new df("onBeforeInput","beforeinput",null,r,K),F.push({event:fe,listeners:Be}),fe.data=Ee)),cy(F,t,L,r,K)}ip(F,s)})}function va(t,s,r){return{instance:t,listener:s,currentTarget:r}}function eo(t,s){for(var r=s+"Capture",l=[];t!==null;){var h=t,u=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||u===null||(h=Un(t,r),h!=null&&l.unshift(va(t,h,u)),h=Un(t,s),h!=null&&l.push(va(t,h,u))),t.tag===3)return l;t=t.return}return[]}function _y(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function rp(t,s,r,l,h){for(var u=s._reactName,p=[];r!==null&&r!==l;){var v=r,x=v.alternate,L=v.stateNode;if(v=v.tag,x!==null&&x===l)break;v!==5&&v!==26&&v!==27||L===null||(x=L,h?(L=Un(r,u),L!=null&&p.unshift(va(r,L,x))):h||(L=Un(r,u),L!=null&&p.push(va(r,L,x)))),r=r.return}p.length!==0&&t.push({event:s,listeners:p})}var my=/\r\n?/g,py=/\u0000|\uFFFD/g;function np(t){return(typeof t=="string"?t:""+t).replace(my,`
`).replace(py,"")}function ap(t,s){return s=np(s),np(t)===s}function We(t,s,r,l,h,u){switch(r){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Yr(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Yr(t,""+l);break;case"className":rl(t,"class",l);break;case"tabIndex":rl(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":rl(t,r,l);break;case"style":af(t,l,u);break;case"data":if(s!=="object"){rl(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=al(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(r==="formAction"?(s!=="input"&&We(t,s,"name",h.name,h,null),We(t,s,"formEncType",h.formEncType,h,null),We(t,s,"formMethod",h.formMethod,h,null),We(t,s,"formTarget",h.formTarget,h,null)):(We(t,s,"encType",h.encType,h,null),We(t,s,"method",h.method,h,null),We(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=al(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Qi);break;case"onScroll":l!=null&&Ae("scroll",t);break;case"onScrollEnd":l!=null&&Ae("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=al(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":Ae("beforetoggle",t),Ae("toggle",t),sl(t,"popover",l);break;case"xlinkActuate":Zi(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Zi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Zi(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Zi(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Zi(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Zi(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Zi(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Zi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Zi(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":sl(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=W0.get(r)||r,sl(t,r,l))}}function Wc(t,s,r,l,h,u){switch(r){case"style":af(t,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?Yr(t,l):(typeof l=="number"||typeof l=="bigint")&&Yr(t,""+l);break;case"onScroll":l!=null&&Ae("scroll",t);break;case"onScrollEnd":l!=null&&Ae("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$d.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),s=r.slice(2,h?r.length-7:void 0),u=t[Zt]||null,u=u!=null?u[r]:null,typeof u=="function"&&t.removeEventListener(s,u,h),typeof l=="function")){typeof u!="function"&&u!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,l,h);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):sl(t,r,l)}}}function Ut(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",t),Ae("load",t);var l=!1,h=!1,u;for(u in r)if(r.hasOwnProperty(u)){var p=r[u];if(p!=null)switch(u){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:We(t,s,u,p,r,null)}}h&&We(t,s,"srcSet",r.srcSet,r,null),l&&We(t,s,"src",r.src,r,null);return;case"input":Ae("invalid",t);var v=u=p=h=null,x=null,L=null;for(l in r)if(r.hasOwnProperty(l)){var K=r[l];if(K!=null)switch(l){case"name":h=K;break;case"type":p=K;break;case"checked":x=K;break;case"defaultChecked":L=K;break;case"value":u=K;break;case"defaultValue":v=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,s));break;default:We(t,s,l,K,r,null)}}tf(t,u,v,x,L,p,h,!1);return;case"select":Ae("invalid",t),l=p=u=null;for(h in r)if(r.hasOwnProperty(h)&&(v=r[h],v!=null))switch(h){case"value":u=v;break;case"defaultValue":p=v;break;case"multiple":l=v;default:We(t,s,h,v,r,null)}s=u,r=p,t.multiple=!!l,s!=null?Pr(t,!!l,s,!1):r!=null&&Pr(t,!!l,r,!0);return;case"textarea":Ae("invalid",t),u=h=l=null;for(p in r)if(r.hasOwnProperty(p)&&(v=r[p],v!=null))switch(p){case"value":l=v;break;case"defaultValue":h=v;break;case"children":u=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(a(91));break;default:We(t,s,p,v,r,null)}rf(t,l,h,u);return;case"option":for(x in r)r.hasOwnProperty(x)&&(l=r[x],l!=null)&&(x==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":We(t,s,x,l,r,null));return;case"dialog":Ae("beforetoggle",t),Ae("toggle",t),Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":Ae("load",t);break;case"video":case"audio":for(l=0;l<ga.length;l++)Ae(ga[l],t);break;case"image":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"embed":case"source":case"link":Ae("error",t),Ae("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in r)if(r.hasOwnProperty(L)&&(l=r[L],l!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:We(t,s,L,l,r,null)}return;default:if(rh(s)){for(K in r)r.hasOwnProperty(K)&&(l=r[K],l!==void 0&&Wc(t,s,K,l,r,void 0));return}}for(v in r)r.hasOwnProperty(v)&&(l=r[v],l!=null&&We(t,s,v,l,r,null))}function gy(t,s,r,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,u=null,p=null,v=null,x=null,L=null,K=null;for(P in r){var F=r[P];if(r.hasOwnProperty(P)&&F!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":x=F;default:l.hasOwnProperty(P)||We(t,s,P,null,l,F)}}for(var O in l){var P=l[O];if(F=r[O],l.hasOwnProperty(O)&&(P!=null||F!=null))switch(O){case"type":u=P;break;case"name":h=P;break;case"checked":L=P;break;case"defaultChecked":K=P;break;case"value":p=P;break;case"defaultValue":v=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(137,s));break;default:P!==F&&We(t,s,O,P,l,F)}}ih(t,p,v,x,L,K,u,h);return;case"select":P=p=v=O=null;for(u in r)if(x=r[u],r.hasOwnProperty(u)&&x!=null)switch(u){case"value":break;case"multiple":P=x;default:l.hasOwnProperty(u)||We(t,s,u,null,l,x)}for(h in l)if(u=l[h],x=r[h],l.hasOwnProperty(h)&&(u!=null||x!=null))switch(h){case"value":O=u;break;case"defaultValue":v=u;break;case"multiple":p=u;default:u!==x&&We(t,s,h,u,l,x)}s=v,r=p,l=P,O!=null?Pr(t,!!r,O,!1):!!l!=!!r&&(s!=null?Pr(t,!!r,s,!0):Pr(t,!!r,r?[]:"",!1));return;case"textarea":P=O=null;for(v in r)if(h=r[v],r.hasOwnProperty(v)&&h!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:We(t,s,v,null,l,h)}for(p in l)if(h=l[p],u=r[p],l.hasOwnProperty(p)&&(h!=null||u!=null))switch(p){case"value":O=h;break;case"defaultValue":P=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==u&&We(t,s,p,h,l,u)}sf(t,O,P);return;case"option":for(var de in r)O=r[de],r.hasOwnProperty(de)&&O!=null&&!l.hasOwnProperty(de)&&(de==="selected"?t.selected=!1:We(t,s,de,null,l,O));for(x in l)O=l[x],P=r[x],l.hasOwnProperty(x)&&O!==P&&(O!=null||P!=null)&&(x==="selected"?t.selected=O&&typeof O!="function"&&typeof O!="symbol":We(t,s,x,O,l,P));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in r)O=r[Se],r.hasOwnProperty(Se)&&O!=null&&!l.hasOwnProperty(Se)&&We(t,s,Se,null,l,O);for(L in l)if(O=l[L],P=r[L],l.hasOwnProperty(L)&&O!==P&&(O!=null||P!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(137,s));break;default:We(t,s,L,O,l,P)}return;default:if(rh(s)){for(var Ke in r)O=r[Ke],r.hasOwnProperty(Ke)&&O!==void 0&&!l.hasOwnProperty(Ke)&&Wc(t,s,Ke,void 0,l,O);for(K in l)O=l[K],P=r[K],!l.hasOwnProperty(K)||O===P||O===void 0&&P===void 0||Wc(t,s,K,O,l,P);return}}for(var A in r)O=r[A],r.hasOwnProperty(A)&&O!=null&&!l.hasOwnProperty(A)&&We(t,s,A,null,l,O);for(F in l)O=l[F],P=r[F],!l.hasOwnProperty(F)||O===P||O==null&&P==null||We(t,s,F,O,l,P)}function lp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vy(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var h=r[l],u=h.transferSize,p=h.initiatorType,v=h.duration;if(u&&v&&lp(p)){for(p=0,v=h.responseEnd,l+=1;l<r.length;l++){var x=r[l],L=x.startTime;if(L>v)break;var K=x.transferSize,F=x.initiatorType;K&&lp(F)&&(x=x.responseEnd,p+=K*(x<v?1:(v-L)/(x-L)))}if(--l,s+=8*(u+p)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Kc=null,Ic=null;function to(t){return t.nodeType===9?t:t.ownerDocument}function op(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hp(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Fc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Vc=null;function Sy(){var t=window.event;return t&&t.type==="popstate"?t===Vc?!1:(Vc=t,!0):(Vc=null,!1)}var cp=typeof setTimeout=="function"?setTimeout:void 0,yy=typeof clearTimeout=="function"?clearTimeout:void 0,up=typeof Promise=="function"?Promise:void 0,by=typeof queueMicrotask=="function"?queueMicrotask:typeof up<"u"?function(t){return up.resolve(null).then(t).catch(wy)}:cp;function wy(t){setTimeout(function(){throw t})}function Gs(t){return t==="head"}function dp(t,s){var r=s,l=0;do{var h=r.nextSibling;if(t.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(h),yn(s);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Sa(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Sa(r);for(var u=r.firstChild;u;){var p=u.nextSibling,v=u.nodeName;u[Hn]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&u.rel.toLowerCase()==="stylesheet"||r.removeChild(u),u=p}}else r==="body"&&Sa(t.ownerDocument.body);r=h}while(r);yn(s)}function fp(t,s){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function Xc(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Xc(r),eh(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function xy(t,s,r,l){for(;t.nodeType===1;){var h=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Hn])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(u=t.getAttribute("rel"),u==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(u!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(u=t.getAttribute("src"),(u!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&u&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var u=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===u)return t}else return t;if(t=Ci(t.nextSibling),t===null)break}return null}function Cy(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ci(t.nextSibling),t===null))return null;return t}function _p(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ci(t.nextSibling),t===null))return null;return t}function $c(t){return t.data==="$?"||t.data==="$~"}function Zc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Ey(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var l=function(){s(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ci(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Qc=null;function mp(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return Ci(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function pp(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function gp(t,s,r){switch(s=to(r),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Sa(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);eh(t)}var Ei=new Map,vp=new Set;function io(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _s=G.d;G.d={f:ky,r:Ry,D:My,C:Ty,L:Dy,m:Ay,X:By,S:Ny,M:Ly};function ky(){var t=_s.f(),s=Fl();return t||s}function Ry(t){var s=jr(t);s!==null&&s.tag===5&&s.type==="form"?O_(s):_s.r(t)}var gn=typeof document>"u"?null:document;function Sp(t,s,r){var l=gn;if(l&&typeof s=="string"&&s){var h=gi(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),vp.has(h)||(vp.add(h),t={rel:t,crossOrigin:r,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),Ut(s,"link",t),Mt(s),l.head.appendChild(s)))}}function My(t){_s.D(t),Sp("dns-prefetch",t,null)}function Ty(t,s){_s.C(t,s),Sp("preconnect",t,s)}function Dy(t,s,r){_s.L(t,s,r);var l=gn;if(l&&t&&s){var h='link[rel="preload"][as="'+gi(s)+'"]';s==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+gi(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+gi(r.imageSizes)+'"]')):h+='[href="'+gi(t)+'"]';var u=h;switch(s){case"style":u=vn(t);break;case"script":u=Sn(t)}Ei.has(u)||(t=S({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),Ei.set(u,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(ya(u))||s==="script"&&l.querySelector(ba(u))||(s=l.createElement("link"),Ut(s,"link",t),Mt(s),l.head.appendChild(s)))}}function Ay(t,s){_s.m(t,s);var r=gn;if(r&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+gi(l)+'"][href="'+gi(t)+'"]',u=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Sn(t)}if(!Ei.has(u)&&(t=S({rel:"modulepreload",href:t},s),Ei.set(u,t),r.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ba(u)))return}l=r.createElement("link"),Ut(l,"link",t),Mt(l),r.head.appendChild(l)}}}function Ny(t,s,r){_s.S(t,s,r);var l=gn;if(l&&t){var h=Ur(l).hoistableStyles,u=vn(t);s=s||"default";var p=h.get(u);if(!p){var v={loading:0,preload:null};if(p=l.querySelector(ya(u)))v.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":s},r),(r=Ei.get(u))&&Jc(t,r);var x=p=l.createElement("link");Mt(x),Ut(x,"link",t),x._p=new Promise(function(L,K){x.onload=L,x.onerror=K}),x.addEventListener("load",function(){v.loading|=1}),x.addEventListener("error",function(){v.loading|=2}),v.loading|=4,so(p,s,l)}p={type:"stylesheet",instance:p,count:1,state:v},h.set(u,p)}}}function By(t,s){_s.X(t,s);var r=gn;if(r&&t){var l=Ur(r).hoistableScripts,h=Sn(t),u=l.get(h);u||(u=r.querySelector(ba(h)),u||(t=S({src:t,async:!0},s),(s=Ei.get(h))&&eu(t,s),u=r.createElement("script"),Mt(u),Ut(u,"link",t),r.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(h,u))}}function Ly(t,s){_s.M(t,s);var r=gn;if(r&&t){var l=Ur(r).hoistableScripts,h=Sn(t),u=l.get(h);u||(u=r.querySelector(ba(h)),u||(t=S({src:t,async:!0,type:"module"},s),(s=Ei.get(h))&&eu(t,s),u=r.createElement("script"),Mt(u),Ut(u,"link",t),r.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(h,u))}}function yp(t,s,r,l){var h=(h=oe.current)?io(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=vn(r.href),r=Ur(h).hoistableStyles,l=r.get(s),l||(l={type:"style",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=vn(r.href);var u=Ur(h).hoistableStyles,p=u.get(t);if(p||(h=h.ownerDocument||h,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(t,p),(u=h.querySelector(ya(t)))&&!u._p&&(p.instance=u,p.state.loading=5),Ei.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ei.set(t,r),u||Oy(h,t,r,p.state))),s&&l===null)throw Error(a(528,""));return p}if(s&&l!==null)throw Error(a(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Sn(r),r=Ur(h).hoistableScripts,l=r.get(s),l||(l={type:"script",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function vn(t){return'href="'+gi(t)+'"'}function ya(t){return'link[rel="stylesheet"]['+t+"]"}function bp(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Oy(t,s,r,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Ut(s,"link",r),Mt(s),t.head.appendChild(s))}function Sn(t){return'[src="'+gi(t)+'"]'}function ba(t){return"script[async]"+t}function wp(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+gi(r.href)+'"]');if(l)return s.instance=l,Mt(l),l;var h=S({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Mt(l),Ut(l,"style",h),so(l,r.precedence,t),s.instance=l;case"stylesheet":h=vn(r.href);var u=t.querySelector(ya(h));if(u)return s.state.loading|=4,s.instance=u,Mt(u),u;l=bp(r),(h=Ei.get(h))&&Jc(l,h),u=(t.ownerDocument||t).createElement("link"),Mt(u);var p=u;return p._p=new Promise(function(v,x){p.onload=v,p.onerror=x}),Ut(u,"link",l),s.state.loading|=4,so(u,r.precedence,t),s.instance=u;case"script":return u=Sn(r.src),(h=t.querySelector(ba(u)))?(s.instance=h,Mt(h),h):(l=r,(h=Ei.get(u))&&(l=S({},r),eu(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Mt(h),Ut(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,so(l,r.precedence,t));return s.instance}function so(t,s,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,u=h,p=0;p<l.length;p++){var v=l[p];if(v.dataset.precedence===s)u=v;else if(u!==h)break}u?u.parentNode.insertBefore(t,u.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function Jc(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function eu(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var ro=null;function xp(t,s,r){if(ro===null){var l=new Map,h=ro=new Map;h.set(r,l)}else h=ro,l=h.get(r),l||(l=new Map,h.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),h=0;h<r.length;h++){var u=r[h];if(!(u[Hn]||u[Ot]||t==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var p=u.getAttribute(s)||"";p=t+p;var v=l.get(p);v?v.push(u):l.set(p,[u])}}return l}function Cp(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function zy(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ep(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Hy(t,s,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=vn(l.href),u=s.querySelector(ya(h));if(u){s=u._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=no.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=u,Mt(u);return}u=s.ownerDocument||s,l=bp(l),(h=Ei.get(h))&&Jc(l,h),u=u.createElement("link"),Mt(u);var p=u;p._p=new Promise(function(v,x){p.onload=v,p.onerror=x}),Ut(u,"link",l),r.instance=u}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=no.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var tu=0;function jy(t,s){return t.stylesheets&&t.count===0&&lo(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&lo(t,t.stylesheets),t.unsuspend){var u=t.unsuspend;t.unsuspend=null,u()}},6e4+s);0<t.imgBytes&&tu===0&&(tu=62500*vy());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&lo(t,t.stylesheets),t.unsuspend)){var u=t.unsuspend;t.unsuspend=null,u()}},(t.imgBytes>tu?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function no(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lo(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ao=null;function lo(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ao=new Map,s.forEach(Uy,t),ao=null,no.call(t))}function Uy(t,s){if(!(s.state.loading&4)){var r=ao.get(t);if(r)var l=r.get(null);else{r=new Map,ao.set(t,r);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<h.length;u++){var p=h[u];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(r.set(p.dataset.precedence,p),l=p)}l&&r.set(null,l)}h=s.instance,p=h.getAttribute("data-precedence"),u=r.get(p)||l,u===l&&r.set(null,h),r.set(p,h),this.count++,l=no.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),u?u.parentNode.insertBefore(h,u.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var wa={$$typeof:Z,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function qy(t,s,r,l,h,u,p,v,x){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=u,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function kp(t,s,r,l,h,u,p,v,x,L,K,F){return t=new qy(t,s,r,p,x,L,K,F,v),s=1,u===!0&&(s|=24),u=ai(3,null,null,s),t.current=u,u.stateNode=t,s=Lh(),s.refCount++,t.pooledCache=s,s.refCount++,u.memoizedState={element:l,isDehydrated:r,cache:s},jh(u),t}function Rp(t){return t?(t=Xr,t):Xr}function Mp(t,s,r,l,h,u){h=Rp(h),l.context===null?l.context=h:l.pendingContext=h,l=Ns(s),l.payload={element:r},u=u===void 0?null:u,u!==null&&(l.callback=u),r=Bs(t,l,s),r!==null&&(si(r,t,s),ea(r,t,s))}function Tp(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function iu(t,s){Tp(t,s),(t=t.alternate)&&Tp(t,s)}function Dp(t){if(t.tag===13||t.tag===31){var s=or(t,67108864);s!==null&&si(s,t,67108864),iu(t,67108864)}}function Ap(t){if(t.tag===13||t.tag===31){var s=ui();s=Zo(s);var r=or(t,s);r!==null&&si(r,t,s),iu(t,s)}}var oo=!0;function Py(t,s,r,l){var h=T.T;T.T=null;var u=G.p;try{G.p=2,su(t,s,r,l)}finally{G.p=u,T.T=h}}function Yy(t,s,r,l){var h=T.T;T.T=null;var u=G.p;try{G.p=8,su(t,s,r,l)}finally{G.p=u,T.T=h}}function su(t,s,r,l){if(oo){var h=ru(l);if(h===null)Gc(t,s,l,ho,r),Bp(t,l);else if(Wy(h,t,s,r,l))l.stopPropagation();else if(Bp(t,l),s&4&&-1<Gy.indexOf(t)){for(;h!==null;){var u=jr(h);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var p=Ve(u.pendingLanes);if(p!==0){var v=u;for(v.pendingLanes|=2,v.entangledLanes|=2;p;){var x=1<<31-q(p);v.entanglements[1]|=x,p&=~x}qi(u),(je&6)===0&&(Kl=Rt()+500,pa(0))}}break;case 31:case 13:v=or(u,2),v!==null&&si(v,u,2),Fl(),iu(u,2)}if(u=ru(l),u===null&&Gc(t,s,l,ho,r),u===h)break;h=u}h!==null&&l.stopPropagation()}else Gc(t,s,l,null,r)}}function ru(t){return t=ah(t),nu(t)}var ho=null;function nu(t){if(ho=null,t=Hr(t),t!==null){var s=c(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=d(s),t!==null)return t;t=null}else if(r===31){if(t=_(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return ho=t,null}function Np(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lr()){case On:return 2;case tl:return 8;case Or:case zn:return 32;case il:return 268435456;default:return 32}default:return 32}}var au=!1,Ws=null,Ks=null,Is=null,xa=new Map,Ca=new Map,Fs=[],Gy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bp(t,s){switch(t){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":xa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(s.pointerId)}}function Ea(t,s,r,l,h,u){return t===null||t.nativeEvent!==u?(t={blockedOn:s,domEventName:r,eventSystemFlags:l,nativeEvent:u,targetContainers:[h]},s!==null&&(s=jr(s),s!==null&&Dp(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function Wy(t,s,r,l,h){switch(s){case"focusin":return Ws=Ea(Ws,t,s,r,l,h),!0;case"dragenter":return Ks=Ea(Ks,t,s,r,l,h),!0;case"mouseover":return Is=Ea(Is,t,s,r,l,h),!0;case"pointerover":var u=h.pointerId;return xa.set(u,Ea(xa.get(u)||null,t,s,r,l,h)),!0;case"gotpointercapture":return u=h.pointerId,Ca.set(u,Ea(Ca.get(u)||null,t,s,r,l,h)),!0}return!1}function Lp(t){var s=Hr(t.target);if(s!==null){var r=c(s);if(r!==null){if(s=r.tag,s===13){if(s=d(r),s!==null){t.blockedOn=s,Fd(t.priority,function(){Ap(r)});return}}else if(s===31){if(s=_(r),s!==null){t.blockedOn=s,Fd(t.priority,function(){Ap(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function co(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=ru(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);nh=l,r.target.dispatchEvent(l),nh=null}else return s=jr(r),s!==null&&Dp(s),t.blockedOn=r,!1;s.shift()}return!0}function Op(t,s,r){co(t)&&r.delete(s)}function Ky(){au=!1,Ws!==null&&co(Ws)&&(Ws=null),Ks!==null&&co(Ks)&&(Ks=null),Is!==null&&co(Is)&&(Is=null),xa.forEach(Op),Ca.forEach(Op)}function uo(t,s){t.blockedOn===s&&(t.blockedOn=null,au||(au=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ky)))}var fo=null;function zp(t){fo!==t&&(fo=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){fo===t&&(fo=null);for(var s=0;s<t.length;s+=3){var r=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(nu(l||r)===null)continue;break}var u=jr(r);u!==null&&(t.splice(s,3),s-=3,rc(u,{pending:!0,data:h,method:r.method,action:l},l,h))}}))}function yn(t){function s(x){return uo(x,t)}Ws!==null&&uo(Ws,t),Ks!==null&&uo(Ks,t),Is!==null&&uo(Is,t),xa.forEach(s),Ca.forEach(s);for(var r=0;r<Fs.length;r++){var l=Fs[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Fs.length&&(r=Fs[0],r.blockedOn===null);)Lp(r),r.blockedOn===null&&Fs.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var h=r[l],u=r[l+1],p=h[Zt]||null;if(typeof u=="function")p||zp(r);else if(p){var v=null;if(u&&u.hasAttribute("formAction")){if(h=u,p=u[Zt]||null)v=p.formAction;else if(nu(h)!==null)continue}else v=p.action;typeof v=="function"?r[l+1]=v:(r.splice(l,3),l-=3),zp(r)}}}function Hp(){function t(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(p){return h=p})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function lu(t){this._internalRoot=t}_o.prototype.render=lu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var r=s.current,l=ui();Mp(r,l,t,s,null,null)},_o.prototype.unmount=lu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Mp(t.current,2,null,t,null,null),Fl(),s[zr]=null}};function _o(t){this._internalRoot=t}_o.prototype.unstable_scheduleHydration=function(t){if(t){var s=Id();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Fs.length&&s!==0&&s<Fs[r].priority;r++);Fs.splice(r,0,t),r===0&&Lp(t)}};var jp=i.version;if(jp!=="19.2.4")throw Error(a(527,jp,"19.2.4"));G.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=f(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Iy={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mo.isDisabled&&mo.supportsFiber)try{Xi=mo.inject(Iy),Kt=mo}catch{}}return Ra.createRoot=function(t,s){if(!o(t))throw Error(a(299));var r=!1,l="",h=K_,u=I_,p=F_;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(u=s.onCaughtError),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=kp(t,1,!1,null,null,r,l,null,h,u,p,Hp),t[zr]=s.current,Yc(t),new lu(s)},Ra.hydrateRoot=function(t,s,r){if(!o(t))throw Error(a(299));var l=!1,h="",u=K_,p=I_,v=F_,x=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(u=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.formState!==void 0&&(x=r.formState)),s=kp(t,1,!0,s,r??null,l,h,x,u,p,v,Hp),s.context=Rp(null),r=s.current,l=ui(),l=Zo(l),h=Ns(l),h.callback=null,Bs(r,h,l),r=l,s.current.lanes=r,Cs(s,r),qi(s),t[zr]=s.current,Yc(t),new _o(s)},Ra.version="19.2.4",Ra}var Vp;function sb(){if(Vp)return cu.exports;Vp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),cu.exports=ib(),cu.exports}var rb=sb();const nb=Vy(rb);var Xp="popstate";function ab(e={}){function i(a,o){let{pathname:c,search:d,hash:_}=a.location;return ju("",{pathname:c,search:d,hash:_},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:Ga(o)}return ob(i,n,null,e)}function it(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function Fi(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function lb(){return Math.random().toString(36).substring(2,10)}function $p(e,i){return{usr:e.state,key:e.key,idx:i}}function ju(e,i,n=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof i=="string"?Rn(i):i,state:n,key:i&&i.key||a||lb()}}function Ga({pathname:e="/",search:i="",hash:n=""}){return i&&i!=="?"&&(e+=i.charAt(0)==="?"?i:"?"+i),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Rn(e){let i={};if(e){let n=e.indexOf("#");n>=0&&(i.hash=e.substring(n),e=e.substring(0,n));let a=e.indexOf("?");a>=0&&(i.search=e.substring(a),e=e.substring(0,a)),e&&(i.pathname=e)}return i}function ob(e,i,n,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,_="POP",m=null,f=y();f==null&&(f=0,d.replaceState({...d.state,idx:f},""));function y(){return(d.state||{idx:null}).idx}function S(){_="POP";let j=y(),z=j==null?null:j-f;f=j,m&&m({action:_,location:D.location,delta:z})}function b(j,z){_="PUSH";let H=ju(D.location,j,z);f=y()+1;let Z=$p(H,f),J=D.createHref(H);try{d.pushState(Z,"",J)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(J)}c&&m&&m({action:_,location:D.location,delta:1})}function M(j,z){_="REPLACE";let H=ju(D.location,j,z);f=y();let Z=$p(H,f),J=D.createHref(H);d.replaceState(Z,"",J),c&&m&&m({action:_,location:D.location,delta:0})}function E(j){return hb(j)}let D={get action(){return _},get location(){return e(o,d)},listen(j){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Xp,S),m=j,()=>{o.removeEventListener(Xp,S),m=null}},createHref(j){return i(o,j)},createURL:E,encodeLocation(j){let z=E(j);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:b,replace:M,go(j){return d.go(j)}};return D}function hb(e,i=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),it(n,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:Ga(e);return a=a.replace(/ $/,"%20"),!i&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function vv(e,i,n="/"){return cb(e,i,n,!1)}function cb(e,i,n,a){let o=typeof i=="string"?Rn(i):i,c=ys(o.pathname||"/",n);if(c==null)return null;let d=Sv(e);ub(d);let _=null;for(let m=0;_==null&&m<d.length;++m){let f=wb(c);_=yb(d[m],f,a)}return _}function Sv(e,i=[],n=[],a="",o=!1){let c=(d,_,m=o,f)=>{let y={relativePath:f===void 0?d.path||"":f,caseSensitive:d.caseSensitive===!0,childrenIndex:_,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(a)&&m)return;it(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length)}let S=Ss([a,y.relativePath]),b=n.concat(y);d.children&&d.children.length>0&&(it(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),Sv(d.children,i,b,S,m)),!(d.path==null&&!d.index)&&i.push({path:S,score:vb(S,d.index),routesMeta:b})};return e.forEach((d,_)=>{if(d.path===""||!d.path?.includes("?"))c(d,_);else for(let m of yv(d.path))c(d,_,!0,m)}),i}function yv(e){let i=e.split("/");if(i.length===0)return[];let[n,...a]=i,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=yv(a.join("/")),_=[];return _.push(...d.map(m=>m===""?c:[c,m].join("/"))),o&&_.push(...d),_.map(m=>e.startsWith("/")&&m===""?"/":m)}function ub(e){e.sort((i,n)=>i.score!==n.score?n.score-i.score:Sb(i.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var db=/^:[\w-]+$/,fb=3,_b=2,mb=1,pb=10,gb=-2,Zp=e=>e==="*";function vb(e,i){let n=e.split("/"),a=n.length;return n.some(Zp)&&(a+=gb),i&&(a+=_b),n.filter(o=>!Zp(o)).reduce((o,c)=>o+(db.test(c)?fb:c===""?mb:pb),a)}function Sb(e,i){return e.length===i.length&&e.slice(0,-1).every((a,o)=>a===i[o])?e[e.length-1]-i[i.length-1]:0}function yb(e,i,n=!1){let{routesMeta:a}=e,o={},c="/",d=[];for(let _=0;_<a.length;++_){let m=a[_],f=_===a.length-1,y=c==="/"?i:i.slice(c.length)||"/",S=Bo({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},y),b=m.route;if(!S&&f&&n&&!a[a.length-1].route.index&&(S=Bo({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!S)return null;Object.assign(o,S.params),d.push({params:o,pathname:Ss([c,S.pathname]),pathnameBase:kb(Ss([c,S.pathnameBase])),route:b}),S.pathnameBase!=="/"&&(c=Ss([c,S.pathnameBase]))}return d}function Bo(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=bb(e.path,e.caseSensitive,e.end),o=i.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),_=o.slice(1);return{params:a.reduce((f,{paramName:y,isOptional:S},b)=>{if(y==="*"){let E=_[b]||"";d=c.slice(0,c.length-E.length).replace(/(.)\/+$/,"$1")}const M=_[b];return S&&!M?f[y]=void 0:f[y]=(M||"").replace(/%2F/g,"/"),f},{}),pathname:c,pathnameBase:d,pattern:e}}function bb(e,i=!1,n=!0){Fi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,_,m)=>(a.push({paramName:_,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,i?void 0:"i"),a]}function wb(e){try{return e.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Fi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),e}}function ys(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let n=i.endsWith("/")?i.length-1:i.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}var xb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Cb(e,i="/"){let{pathname:n,search:a="",hash:o=""}=typeof e=="string"?Rn(e):e,c;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?c=Qp(n.substring(1),"/"):c=Qp(n,i)):c=i,{pathname:c,search:Rb(a),hash:Mb(o)}}function Qp(e,i){let n=i.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function _u(e,i,n,a){return`Cannot include a '${e}' character in a manually specified \`to.${i}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Eb(e){return e.filter((i,n)=>n===0||i.route.path&&i.route.path.length>0)}function bv(e){let i=Eb(e);return i.map((n,a)=>a===i.length-1?n.pathname:n.pathnameBase)}function wv(e,i,n,a=!1){let o;typeof e=="string"?o=Rn(e):(o={...e},it(!o.pathname||!o.pathname.includes("?"),_u("?","pathname","search",o)),it(!o.pathname||!o.pathname.includes("#"),_u("#","pathname","hash",o)),it(!o.search||!o.search.includes("#"),_u("#","search","hash",o)));let c=e===""||o.pathname==="",d=c?"/":o.pathname,_;if(d==null)_=n;else{let S=i.length-1;if(!a&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),S-=1;o.pathname=b.join("/")}_=S>=0?i[S]:"/"}let m=Cb(o,_),f=d&&d!=="/"&&d.endsWith("/"),y=(c||d===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(f||y)&&(m.pathname+="/"),m}var Ss=e=>e.join("/").replace(/\/\/+/g,"/"),kb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Rb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Mb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Tb=class{constructor(e,i,n,a=!1){this.status=e,this.statusText=i||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Db(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Ab(e){return e.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var xv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Cv(e,i){let n=e;if(typeof n!="string"||!xb.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,o=!1;if(xv)try{let c=new URL(window.location.href),d=n.startsWith("//")?new URL(c.protocol+n):new URL(n),_=ys(d.pathname,i);d.origin===c.origin&&_!=null?n=_+d.search+d.hash:o=!0}catch{Fi(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ev=["POST","PUT","PATCH","DELETE"];new Set(Ev);var Nb=["GET",...Ev];new Set(Nb);var Mn=C.createContext(null);Mn.displayName="DataRouter";var Yo=C.createContext(null);Yo.displayName="DataRouterState";var Bb=C.createContext(!1),kv=C.createContext({isTransitioning:!1});kv.displayName="ViewTransition";var Lb=C.createContext(new Map);Lb.displayName="Fetchers";var Ob=C.createContext(null);Ob.displayName="Await";var Ai=C.createContext(null);Ai.displayName="Navigation";var Fa=C.createContext(null);Fa.displayName="Location";var bs=C.createContext({outlet:null,matches:[],isDataRoute:!1});bs.displayName="Route";var kd=C.createContext(null);kd.displayName="RouteError";var Rv="REACT_ROUTER_ERROR",zb="REDIRECT",Hb="ROUTE_ERROR_RESPONSE";function jb(e){if(e.startsWith(`${Rv}:${zb}:{`))try{let i=JSON.parse(e.slice(28));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.location=="string"&&typeof i.reloadDocument=="boolean"&&typeof i.replace=="boolean")return i}catch{}}function Ub(e){if(e.startsWith(`${Rv}:${Hb}:{`))try{let i=JSON.parse(e.slice(40));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string")return new Tb(i.status,i.statusText,i.data)}catch{}}function qb(e,{relative:i}={}){it(Va(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=C.useContext(Ai),{hash:o,pathname:c,search:d}=Xa(e,{relative:i}),_=c;return n!=="/"&&(_=c==="/"?n:Ss([n,c])),a.createHref({pathname:_,search:d,hash:o})}function Va(){return C.useContext(Fa)!=null}function Dr(){return it(Va(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Fa).location}var Mv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Tv(e){C.useContext(Ai).static||C.useLayoutEffect(e)}function Pb(){let{isDataRoute:e}=C.useContext(bs);return e?e1():Yb()}function Yb(){it(Va(),"useNavigate() may be used only in the context of a <Router> component.");let e=C.useContext(Mn),{basename:i,navigator:n}=C.useContext(Ai),{matches:a}=C.useContext(bs),{pathname:o}=Dr(),c=JSON.stringify(bv(a)),d=C.useRef(!1);return Tv(()=>{d.current=!0}),C.useCallback((m,f={})=>{if(Fi(d.current,Mv),!d.current)return;if(typeof m=="number"){n.go(m);return}let y=wv(m,JSON.parse(c),o,f.relative==="path");e==null&&i!=="/"&&(y.pathname=y.pathname==="/"?i:Ss([i,y.pathname])),(f.replace?n.replace:n.push)(y,f.state,f)},[i,n,c,o,e])}C.createContext(null);function Xa(e,{relative:i}={}){let{matches:n}=C.useContext(bs),{pathname:a}=Dr(),o=JSON.stringify(bv(n));return C.useMemo(()=>wv(e,JSON.parse(o),a,i==="path"),[e,o,a,i])}function Gb(e,i){return Dv(e,i)}function Dv(e,i,n,a,o){it(Va(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=C.useContext(Ai),{matches:d}=C.useContext(bs),_=d[d.length-1],m=_?_.params:{},f=_?_.pathname:"/",y=_?_.pathnameBase:"/",S=_&&_.route;{let H=S&&S.path||"";Nv(f,!S||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let b=Dr(),M;if(i){let H=typeof i=="string"?Rn(i):i;it(y==="/"||H.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${H.pathname}" was given in the \`location\` prop.`),M=H}else M=b;let E=M.pathname||"/",D=E;if(y!=="/"){let H=y.replace(/^\//,"").split("/");D="/"+E.replace(/^\//,"").split("/").slice(H.length).join("/")}let j=vv(e,{pathname:D});Fi(S||j!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Fi(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=Vb(j&&j.map(H=>Object.assign({},H,{params:Object.assign({},m,H.params),pathname:Ss([y,c.encodeLocation?c.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?y:Ss([y,c.encodeLocation?c.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),d,n,a,o);return i&&z?C.createElement(Fa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},z):z}function Wb(){let e=Jb(),i=Db(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},i),n?C.createElement("pre",{style:o},n):null,d)}var Kb=C.createElement(Wb,null),Av=class extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,i){return i.location!==e.location||i.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:i.error,location:i.location,revalidation:e.revalidation||i.revalidation}}componentDidCatch(e,i){this.props.onError?this.props.onError(e,i):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=Ub(e.digest);n&&(e=n)}let i=e!==void 0?C.createElement(bs.Provider,{value:this.props.routeContext},C.createElement(kd.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?C.createElement(Ib,{error:e},i):i}};Av.contextType=Bb;var mu=new WeakMap;function Ib({children:e,error:i}){let{basename:n}=C.useContext(Ai);if(typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){let a=jb(i.digest);if(a){let o=mu.get(i);if(o)throw o;let c=Cv(a.location,n);if(xv&&!mu.get(i))if(c.isExternal||a.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:a.replace}));throw mu.set(i,d),d}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return e}function Fb({routeContext:e,match:i,children:n}){let a=C.useContext(Mn);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),C.createElement(bs.Provider,{value:e},n)}function Vb(e,i=[],n=null,a=null,o=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(i.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let c=e,d=n?.errors;if(d!=null){let y=c.findIndex(S=>S.route.id&&d?.[S.route.id]!==void 0);it(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let _=!1,m=-1;if(n)for(let y=0;y<c.length;y++){let S=c[y];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(m=y),S.route.id){let{loaderData:b,errors:M}=n,E=S.route.loader&&!b.hasOwnProperty(S.route.id)&&(!M||M[S.route.id]===void 0);if(S.route.lazy||E){_=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}let f=n&&a?(y,S)=>{a(y,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Ab(n.matches),errorInfo:S})}:void 0;return c.reduceRight((y,S,b)=>{let M,E=!1,D=null,j=null;n&&(M=d&&S.route.id?d[S.route.id]:void 0,D=S.route.errorElement||Kb,_&&(m<0&&b===0?(Nv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,j=null):m===b&&(E=!0,j=S.route.hydrateFallbackElement||null)));let z=i.concat(c.slice(0,b+1)),H=()=>{let Z;return M?Z=D:E?Z=j:S.route.Component?Z=C.createElement(S.route.Component,null):S.route.element?Z=S.route.element:Z=y,C.createElement(Fb,{match:S,routeContext:{outlet:y,matches:z,isDataRoute:n!=null},children:Z})};return n&&(S.route.ErrorBoundary||S.route.errorElement||b===0)?C.createElement(Av,{location:n.location,revalidation:n.revalidation,component:D,error:M,children:H(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:f}):H()},null)}function Rd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xb(e){let i=C.useContext(Mn);return it(i,Rd(e)),i}function $b(e){let i=C.useContext(Yo);return it(i,Rd(e)),i}function Zb(e){let i=C.useContext(bs);return it(i,Rd(e)),i}function Md(e){let i=Zb(e),n=i.matches[i.matches.length-1];return it(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Qb(){return Md("useRouteId")}function Jb(){let e=C.useContext(kd),i=$b("useRouteError"),n=Md("useRouteError");return e!==void 0?e:i.errors?.[n]}function e1(){let{router:e}=Xb("useNavigate"),i=Md("useNavigate"),n=C.useRef(!1);return Tv(()=>{n.current=!0}),C.useCallback(async(o,c={})=>{Fi(n.current,Mv),n.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:i,...c}))},[e,i])}var Jp={};function Nv(e,i,n){!i&&!Jp[e]&&(Jp[e]=!0,Fi(!1,n))}C.memo(t1);function t1({routes:e,future:i,state:n,onError:a}){return Dv(e,void 0,n,a,i)}function Gi(e){it(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function i1({basename:e="/",children:i=null,location:n,navigationType:a="POP",navigator:o,static:c=!1,unstable_useTransitions:d}){it(!Va(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let _=e.replace(/^\/*/,"/"),m=C.useMemo(()=>({basename:_,navigator:o,static:c,unstable_useTransitions:d,future:{}}),[_,o,c,d]);typeof n=="string"&&(n=Rn(n));let{pathname:f="/",search:y="",hash:S="",state:b=null,key:M="default"}=n,E=C.useMemo(()=>{let D=ys(f,_);return D==null?null:{location:{pathname:D,search:y,hash:S,state:b,key:M},navigationType:a}},[_,f,y,S,b,M,a]);return Fi(E!=null,`<Router basename="${_}"> is not able to match the URL "${f}${y}${S}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:C.createElement(Ai.Provider,{value:m},C.createElement(Fa.Provider,{children:i,value:E}))}function eg({children:e,location:i}){return Gb(Uu(e),i)}function Uu(e,i=[]){let n=[];return C.Children.forEach(e,(a,o)=>{if(!C.isValidElement(a))return;let c=[...i,o];if(a.type===C.Fragment){n.push.apply(n,Uu(a.props.children,c));return}it(a.type===Gi,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),it(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Uu(a.props.children,c)),n.push(d)}),n}var xo="get",Co="application/x-www-form-urlencoded";function Go(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function s1(e){return Go(e)&&e.tagName.toLowerCase()==="button"}function r1(e){return Go(e)&&e.tagName.toLowerCase()==="form"}function n1(e){return Go(e)&&e.tagName.toLowerCase()==="input"}function a1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function l1(e,i){return e.button===0&&(!i||i==="_self")&&!a1(e)}var po=null;function o1(){if(po===null)try{new FormData(document.createElement("form"),0),po=!1}catch{po=!0}return po}var h1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pu(e){return e!=null&&!h1.has(e)?(Fi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Co}"`),null):e}function c1(e,i){let n,a,o,c,d;if(r1(e)){let _=e.getAttribute("action");a=_?ys(_,i):null,n=e.getAttribute("method")||xo,o=pu(e.getAttribute("enctype"))||Co,c=new FormData(e)}else if(s1(e)||n1(e)&&(e.type==="submit"||e.type==="image")){let _=e.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||_.getAttribute("action");if(a=m?ys(m,i):null,n=e.getAttribute("formmethod")||_.getAttribute("method")||xo,o=pu(e.getAttribute("formenctype"))||pu(_.getAttribute("enctype"))||Co,c=new FormData(_,e),!o1()){let{name:f,type:y,value:S}=e;if(y==="image"){let b=f?`${f}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else f&&c.append(f,S)}}else{if(Go(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=xo,a=null,o=Co,d=e}return c&&o==="text/plain"&&(d=c,c=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Td(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function u1(e,i,n,a){let o=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${a}`:o.pathname=`${o.pathname}.${a}`:o.pathname==="/"?o.pathname=`_root.${a}`:i&&ys(o.pathname,i)==="/"?o.pathname=`${i.replace(/\/$/,"")}/_root.${a}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${a}`,o}async function d1(e,i){if(e.id in i)return i[e.id];try{let n=await import(e.module);return i[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function f1(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function _1(e,i,n){let a=await Promise.all(e.map(async o=>{let c=i.routes[o.route.id];if(c){let d=await d1(c,n);return d.links?d.links():[]}return[]}));return v1(a.flat(1).filter(f1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function tg(e,i,n,a,o,c){let d=(m,f)=>n[f]?m.route.id!==n[f].route.id:!0,_=(m,f)=>n[f].pathname!==m.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==m.params["*"];return c==="assets"?i.filter((m,f)=>d(m,f)||_(m,f)):c==="data"?i.filter((m,f)=>{let y=a.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(d(m,f)||_(m,f))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function m1(e,i,{includeHydrateFallback:n}={}){return p1(e.map(a=>{let o=i.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function p1(e){return[...new Set(e)]}function g1(e){let i={},n=Object.keys(e).sort();for(let a of n)i[a]=e[a];return i}function v1(e,i){let n=new Set;return new Set(i),e.reduce((a,o)=>{let c=JSON.stringify(g1(o));return n.has(c)||(n.add(c),a.push({key:c,link:o})),a},[])}function Bv(){let e=C.useContext(Mn);return Td(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function S1(){let e=C.useContext(Yo);return Td(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Dd=C.createContext(void 0);Dd.displayName="FrameworkContext";function Lv(){let e=C.useContext(Dd);return Td(e,"You must render this element inside a <HydratedRouter> element"),e}function y1(e,i){let n=C.useContext(Dd),[a,o]=C.useState(!1),[c,d]=C.useState(!1),{onFocus:_,onBlur:m,onMouseEnter:f,onMouseLeave:y,onTouchStart:S}=i,b=C.useRef(null);C.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let D=z=>{z.forEach(H=>{d(H.isIntersecting)})},j=new IntersectionObserver(D,{threshold:.5});return b.current&&j.observe(b.current),()=>{j.disconnect()}}},[e]),C.useEffect(()=>{if(a){let D=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(D)}}},[a]);let M=()=>{o(!0)},E=()=>{o(!1),d(!1)};return n?e!=="intent"?[c,b,{}]:[c,b,{onFocus:Ma(_,M),onBlur:Ma(m,E),onMouseEnter:Ma(f,M),onMouseLeave:Ma(y,E),onTouchStart:Ma(S,M)}]:[!1,b,{}]}function Ma(e,i){return n=>{e&&e(n),n.defaultPrevented||i(n)}}function b1({page:e,...i}){let{router:n}=Bv(),a=C.useMemo(()=>vv(n.routes,e,n.basename),[n.routes,e,n.basename]);return a?C.createElement(x1,{page:e,matches:a,...i}):null}function w1(e){let{manifest:i,routeModules:n}=Lv(),[a,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return _1(e,i,n).then(d=>{c||o(d)}),()=>{c=!0}},[e,i,n]),a}function x1({page:e,matches:i,...n}){let a=Dr(),{future:o,manifest:c,routeModules:d}=Lv(),{basename:_}=Bv(),{loaderData:m,matches:f}=S1(),y=C.useMemo(()=>tg(e,i,f,c,a,"data"),[e,i,f,c,a]),S=C.useMemo(()=>tg(e,i,f,c,a,"assets"),[e,i,f,c,a]),b=C.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let D=new Set,j=!1;if(i.forEach(H=>{let Z=c.routes[H.route.id];!Z||!Z.hasLoader||(!y.some(J=>J.route.id===H.route.id)&&H.route.id in m&&d[H.route.id]?.shouldRevalidate||Z.hasClientLoader?j=!0:D.add(H.route.id))}),D.size===0)return[];let z=u1(e,_,o.unstable_trailingSlashAwareDataRequests,"data");return j&&D.size>0&&z.searchParams.set("_routes",i.filter(H=>D.has(H.route.id)).map(H=>H.route.id).join(",")),[z.pathname+z.search]},[_,o.unstable_trailingSlashAwareDataRequests,m,a,c,y,i,e,d]),M=C.useMemo(()=>m1(S,c),[S,c]),E=w1(S);return C.createElement(C.Fragment,null,b.map(D=>C.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),M.map(D=>C.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),E.map(({key:D,link:j})=>C.createElement("link",{key:D,nonce:n.nonce,...j,crossOrigin:j.crossOrigin??n.crossOrigin})))}function C1(...e){return i=>{e.forEach(n=>{typeof n=="function"?n(i):n!=null&&(n.current=i)})}}var E1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E1&&(window.__reactRouterVersion="7.13.0")}catch{}function ig({basename:e,children:i,unstable_useTransitions:n,window:a}){let o=C.useRef();o.current==null&&(o.current=ab({window:a,v5Compat:!0}));let c=o.current,[d,_]=C.useState({action:c.action,location:c.location}),m=C.useCallback(f=>{n===!1?_(f):C.startTransition(()=>_(f))},[n]);return C.useLayoutEffect(()=>c.listen(m),[c,m]),C.createElement(i1,{basename:e,children:i,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:n})}var Ov=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lo=C.forwardRef(function({onClick:i,discover:n="render",prefetch:a="none",relative:o,reloadDocument:c,replace:d,state:_,target:m,to:f,preventScrollReset:y,viewTransition:S,unstable_defaultShouldRevalidate:b,...M},E){let{basename:D,unstable_useTransitions:j}=C.useContext(Ai),z=typeof f=="string"&&Ov.test(f),H=Cv(f,D);f=H.to;let Z=qb(f,{relative:o}),[J,ae,ie]=y1(a,M),re=T1(f,{replace:d,state:_,target:m,preventScrollReset:y,relative:o,viewTransition:S,unstable_defaultShouldRevalidate:b,unstable_useTransitions:j});function ve(_e){i&&i(_e),_e.defaultPrevented||re(_e)}let le=C.createElement("a",{...M,...ie,href:H.absoluteURL||Z,onClick:H.isExternal||c?i:ve,ref:C1(E,ae),target:m,"data-discover":!z&&n==="render"?"true":void 0});return J&&!z?C.createElement(C.Fragment,null,le,C.createElement(b1,{page:Z})):le});Lo.displayName="Link";var k1=C.forwardRef(function({"aria-current":i="page",caseSensitive:n=!1,className:a="",end:o=!1,style:c,to:d,viewTransition:_,children:m,...f},y){let S=Xa(d,{relative:f.relative}),b=Dr(),M=C.useContext(Yo),{navigator:E,basename:D}=C.useContext(Ai),j=M!=null&&L1(S)&&_===!0,z=E.encodeLocation?E.encodeLocation(S).pathname:S.pathname,H=b.pathname,Z=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;n||(H=H.toLowerCase(),Z=Z?Z.toLowerCase():null,z=z.toLowerCase()),Z&&D&&(Z=ys(Z,D)||Z);const J=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ae=H===z||!o&&H.startsWith(z)&&H.charAt(J)==="/",ie=Z!=null&&(Z===z||!o&&Z.startsWith(z)&&Z.charAt(z.length)==="/"),re={isActive:ae,isPending:ie,isTransitioning:j},ve=ae?i:void 0,le;typeof a=="function"?le=a(re):le=[a,ae?"active":null,ie?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let _e=typeof c=="function"?c(re):c;return C.createElement(Lo,{...f,"aria-current":ve,className:le,ref:y,style:_e,to:d,viewTransition:_},typeof m=="function"?m(re):m)});k1.displayName="NavLink";var R1=C.forwardRef(({discover:e="render",fetcherKey:i,navigate:n,reloadDocument:a,replace:o,state:c,method:d=xo,action:_,onSubmit:m,relative:f,preventScrollReset:y,viewTransition:S,unstable_defaultShouldRevalidate:b,...M},E)=>{let{unstable_useTransitions:D}=C.useContext(Ai),j=N1(),z=B1(_,{relative:f}),H=d.toLowerCase()==="get"?"get":"post",Z=typeof _=="string"&&Ov.test(_),J=ae=>{if(m&&m(ae),ae.defaultPrevented)return;ae.preventDefault();let ie=ae.nativeEvent.submitter,re=ie?.getAttribute("formmethod")||d,ve=()=>j(ie||ae.currentTarget,{fetcherKey:i,method:re,navigate:n,replace:o,state:c,relative:f,preventScrollReset:y,viewTransition:S,unstable_defaultShouldRevalidate:b});D&&n!==!1?C.startTransition(()=>ve()):ve()};return C.createElement("form",{ref:E,method:H,action:z,onSubmit:a?m:J,...M,"data-discover":!Z&&e==="render"?"true":void 0})});R1.displayName="Form";function M1(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zv(e){let i=C.useContext(Mn);return it(i,M1(e)),i}function T1(e,{target:i,replace:n,state:a,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:_,unstable_useTransitions:m}={}){let f=Pb(),y=Dr(),S=Xa(e,{relative:c});return C.useCallback(b=>{if(l1(b,i)){b.preventDefault();let M=n!==void 0?n:Ga(y)===Ga(S),E=()=>f(e,{replace:M,state:a,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:_});m?C.startTransition(()=>E()):E()}},[y,f,S,n,a,i,e,o,c,d,_,m])}var D1=0,A1=()=>`__${String(++D1)}__`;function N1(){let{router:e}=zv("useSubmit"),{basename:i}=C.useContext(Ai),n=Qb(),a=e.fetch,o=e.navigate;return C.useCallback(async(c,d={})=>{let{action:_,method:m,encType:f,formData:y,body:S}=c1(c,i);if(d.navigate===!1){let b=d.fetcherKey||A1();await a(b,n,d.action||_,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:S,formMethod:d.method||m,formEncType:d.encType||f,flushSync:d.flushSync})}else await o(d.action||_,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:S,formMethod:d.method||m,formEncType:d.encType||f,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,o,i,n])}function B1(e,{relative:i}={}){let{basename:n}=C.useContext(Ai),a=C.useContext(bs);it(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...Xa(e||".",{relative:i})},d=Dr();if(e==null){c.search=d.search;let _=new URLSearchParams(c.search),m=_.getAll("index");if(m.some(y=>y==="")){_.delete("index"),m.filter(S=>S).forEach(S=>_.append("index",S));let y=_.toString();c.search=y?`?${y}`:""}}return(!e||e===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Ss([n,c.pathname])),Ga(c)}function L1(e,{relative:i}={}){let n=C.useContext(kv);it(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=zv("useViewTransitionState"),o=Xa(e,{relative:i});if(!n.isTransitioning)return!1;let c=ys(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=ys(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Bo(o.pathname,d)!=null||Bo(o.pathname,c)!=null}const Hv="jihun-project-manager-store-v1";function Pt(){return typeof window<"u"&&typeof window.desktopApi<"u"}function O1(){try{const e=window.localStorage.getItem(Hv),i=e?JSON.parse(e):null;return!i||!Array.isArray(i.projects)?{projects:[]}:i}catch{return{projects:[]}}}function z1(e){const i=e&&Array.isArray(e.projects)?{projects:e.projects}:{projects:[]};return window.localStorage.setItem(Hv,JSON.stringify(i)),{ok:!0,store:i}}function ps(){return Pt()}async function jv(){if(Pt()){const e=await window.desktopApi.loadProjects();return!e||!Array.isArray(e.projects)?{projects:[]}:e}return O1()}async function H1(e){if(Pt()){const i=await window.desktopApi.saveProjects(e);return i&&i.store?i.store:e}return z1(e).store}async function qu(){if(!Pt())return[];const e=await window.desktopApi.discoverLocalProjects();return Array.isArray(e)?e:[]}async function j1(e){if(!e)return null;if(!Pt()){const i=e.split("/").filter(Boolean).pop()||"Web Project";return{id:`local-${i.toLowerCase().replace(/\s+/g,"-")}`,name:i,path:e,version:null,packageManager:"npm",scripts:[],engineType:"Web/Node",git:!1,lastModified:new Date().toISOString(),gamesRootRelative:"src/games",gameFolders:[]}}return window.desktopApi.scanProject(e)}async function U1(){return Pt()?window.desktopApi.getWorkspaceRoot():null}async function q1(e){return Pt()?window.desktopApi.createGameFolder(e):{gamesRootRelative:"src/games",gameFolders:[]}}async function P1(e){return Pt()?window.desktopApi.deleteGameFolder(e):{gamesRootRelative:"src/games",gameFolders:[]}}async function Y1(e){return Pt()?window.desktopApi.openExternalUrl(e):typeof window<"u"?(window.open(e,"_blank","noopener,noreferrer"),{ok:!0}):{ok:!1,error:"Desktop API unavailable."}}async function G1(e){return Pt()?window.desktopApi.deployProjectToVercel(e):{command:"vercel --prod --yes",exitCode:1,timedOut:!1,stdout:"",stderr:"Electron  Vercel  ."}}async function W1(e){if(!Pt())throw new Error("Desktop API unavailable.");return window.desktopApi.createGeminiTerminalSession(e)}async function K1(e){return Pt()?window.desktopApi.writeGeminiTerminalSession(e):{ok:!1}}async function I1(e){return Pt()?window.desktopApi.resizeGeminiTerminalSession(e):{ok:!1}}async function sg(e){return Pt()?window.desktopApi.closeGeminiTerminalSession(e):{ok:!1}}function F1(e){return Pt()?window.desktopApi.onGeminiTerminalData(e):()=>{}}function V1(e){return Pt()?window.desktopApi.onGeminiTerminalExit(e):()=>{}}function X1(e){return!Pt()||typeof window.desktopApi.onProjectDeployProgress!="function"?()=>{}:window.desktopApi.onProjectDeployProgress(e)}const gu=[{id:"defense",name:"  ",desc:"      .",color:"bg-slate-800",icon:"",path:"/defense"},{id:"zombie",name:":  ",desc:"    .",color:"bg-green-900",icon:"",path:"/zombie"},{id:"baseball",name:"",desc:"   !   .",color:"bg-blue-900",icon:"",path:"/baseball"},{id:"proverb",name:" ",desc:"   !   .",color:"bg-indigo-900",icon:"",path:"/proverb"}],rg=["","","","","","","","","",""],ng=["bg-indigo-900","bg-green-900","bg-blue-900","bg-slate-800","bg-red-900","bg-emerald-900","bg-cyan-900","bg-violet-900","bg-amber-900","bg-zinc-800"];function Uv(e){return Array.from(String(e||"")).reduce((i,n)=>i+n.charCodeAt(0),0)}function $1(e){return rg[Uv(e)%rg.length]}function Z1(e){return ng[Uv(e)%ng.length]}function Ad(e){const i=String(e||"").trim();if(!i)return"";const a=(i.startsWith("/")?i:`/${i}`).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9/_-]/g,"-").replace(/-+/g,"-").replace(/\/+/g,"/");return a==="/"?"":a}function Q1(e){return String(e||"").replace(/\\/g,"/")}function qv(e){const i=Q1(e?.path),n="/src/games/",a=i.indexOf(n);if(a===-1)return"";const o=i.slice(a+n.length).split("/")[0];return Ad(`/${o}`)}function J1(e){if(Array.isArray(e.tags)&&e.tags.includes("workspace"))return null;const i=Ad(e.routePath||e.pathAlias||qv(e));if(!i)return null;const n=e.name||i||e.id,a=String(e.description||e.desc||"").trim()||"  .";return{id:e.id||`${i}-${n}`,name:e.name||" ",desc:a,color:e.color||Z1(n),icon:e.icon||$1(n),path:i}}function ew(){const[e,i]=C.useState(gu);return C.useEffect(()=>{let n=!0;async function a(){try{const o=await jv();if(!n)return;let c=Array.isArray(o?.projects)?[...o.projects]:[];if(ps()){const _=await qu();if(!n)return;if(_.length>0){const m=new Map(c.map(f=>[f.id,f]));_.forEach(f=>{const y=m.get(f.id)||{},S=String(y.name||f.name||"").trim()||f.name,b=String(y.description||y.desc||f.description||f.desc||"").trim(),M=Ad(y.routePath||y.pathAlias||f.routePath||f.pathAlias||qv(f));m.set(f.id,{...f,...y,path:f.path,version:f.version,packageManager:f.packageManager,scripts:f.scripts,engineType:f.engineType,git:f.git,lastModified:f.lastModified,gamesRootRelative:f.gamesRootRelative,gameFolders:f.gameFolders,name:S,description:b,desc:b,routePath:M,pathAlias:M,icon:y.icon||f.icon,color:y.color||f.color,tags:Array.isArray(y.tags)&&y.tags.length>0?y.tags:f.tags})}),c=Array.from(m.values())}}const d=c.map(J1).filter(Boolean);i(d.length>0?d:gu)}catch{n&&i(gu)}}return a(),()=>{n=!1}},[]),g.jsxs("div",{"data-id":"home-container",className:"min-h-screen bg-slate-950 text-white p-8 flex flex-col items-center overflow-y-auto",children:[g.jsxs("header",{"data-id":"home-header",className:"mb-12 text-center animate-in fade-in slide-in-from-top-8 duration-700",children:[g.jsx("div",{className:"flex justify-center mb-6",children:g.jsx(Lo,{to:"/manager",className:"rounded-full border border-white/20 px-5 py-2 text-sm font-bold hover:border-white/60 transition-colors",children:" "})}),g.jsx("h1",{"data-id":"home-title",className:"text-5xl md:text-7xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-red-500 mb-4 drop-shadow-2xl",children:"JIHUN GAMES"})]}),g.jsx("div",{"data-id":"game-grid",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 max-w-4xl w-full",children:e.map(n=>g.jsxs(Lo,{to:n.path,"data-id":`game-card-${n.id}`,className:`group relative overflow-hidden rounded-3xl p-8 ${n.color} border-4 border-white/5 hover:border-white/20 transition-all hover:scale-[1.02] shadow-2xl hover:shadow-[0_0_30px_rgba(255,255,255,0.1)]`,children:[g.jsx("div",{"data-id":`game-bg-icon-${n.id}`,className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity text-9xl transform rotate-12 translate-x-4 -translate-y-4 select-none",children:n.icon}),g.jsxs("div",{"data-id":`game-content-${n.id}`,className:"relative z-10",children:[g.jsx("div",{"data-id":`game-icon-${n.id}`,className:"text-6xl mb-6",children:n.icon}),g.jsx("h2",{"data-id":`game-name-${n.id}`,className:"text-3xl font-black mb-3 italic uppercase tracking-tighter group-hover:text-yellow-400 transition-colors",children:n.name}),g.jsx("p",{"data-id":`game-desc-${n.id}`,className:"text-slate-300 font-bold leading-relaxed",children:n.desc})]}),g.jsx("div",{"data-id":`game-overlay-${n.id}`,className:"absolute inset-0 bg-gradient-to-r from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]},n.id))})]})}var Pv=Object.defineProperty,tw=Object.getOwnPropertyDescriptor,iw=(e,i)=>{for(var n in i)Pv(e,n,{get:i[n],enumerable:!0})},lt=(e,i,n,a)=>{for(var o=a>1?void 0:a?tw(i,n):i,c=e.length-1,d;c>=0;c--)(d=e[c])&&(o=(a?d(i,n,o):d(o))||o);return a&&o&&Pv(i,n,o),o},he=(e,i)=>(n,a)=>i(n,a,e),ag="Terminal input",Pu={get:()=>ag,set:e=>ag=e},lg="Too much output to announce, navigate to rows manually to read",Yu={get:()=>lg,set:e=>lg=e};function sw(e){return e.replace(/\r?\n/g,"\r")}function rw(e,i){return i?"\x1B[200~"+e+"\x1B[201~":e}function nw(e,i){e.clipboardData&&e.clipboardData.setData("text/plain",i.selectionText),e.preventDefault()}function aw(e,i,n,a){if(e.stopPropagation(),e.clipboardData){let o=e.clipboardData.getData("text/plain");Yv(o,i,n,a)}}function Yv(e,i,n,a){e=sw(e),e=rw(e,n.decPrivateModes.bracketedPasteMode&&a.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(e,!0),i.value=""}function Gv(e,i,n){let a=n.getBoundingClientRect(),o=e.clientX-a.left-10,c=e.clientY-a.top-10;i.style.width="20px",i.style.height="20px",i.style.left=`${o}px`,i.style.top=`${c}px`,i.style.zIndex="1000",i.focus()}function og(e,i,n,a,o){Gv(e,i,n),o&&a.rightClickSelect(e),i.value=a.selectionText,i.select()}function Js(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function Wo(e,i=0,n=e.length){let a="";for(let o=i;o<n;++o){let c=e[o];c>65535?(c-=65536,a+=String.fromCharCode((c>>10)+55296)+String.fromCharCode(c%1024+56320)):a+=String.fromCharCode(c)}return a}var lw=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,i){let n=e.length;if(!n)return 0;let a=0,o=0;if(this._interim){let c=e.charCodeAt(o++);56320<=c&&c<=57343?i[a++]=(this._interim-55296)*1024+c-56320+65536:(i[a++]=this._interim,i[a++]=c),this._interim=0}for(let c=o;c<n;++c){let d=e.charCodeAt(c);if(55296<=d&&d<=56319){if(++c>=n)return this._interim=d,a;let _=e.charCodeAt(c);56320<=_&&_<=57343?i[a++]=(d-55296)*1024+_-56320+65536:(i[a++]=d,i[a++]=_);continue}d!==65279&&(i[a++]=d)}return a}},ow=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,i){let n=e.length;if(!n)return 0;let a=0,o,c,d,_,m=0,f=0;if(this.interim[0]){let b=!1,M=this.interim[0];M&=(M&224)===192?31:(M&240)===224?15:7;let E=0,D;for(;(D=this.interim[++E]&63)&&E<4;)M<<=6,M|=D;let j=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,z=j-E;for(;f<z;){if(f>=n)return 0;if(D=e[f++],(D&192)!==128){f--,b=!0;break}else this.interim[E++]=D,M<<=6,M|=D&63}b||(j===2?M<128?f--:i[a++]=M:j===3?M<2048||M>=55296&&M<=57343||M===65279||(i[a++]=M):M<65536||M>1114111||(i[a++]=M)),this.interim.fill(0)}let y=n-4,S=f;for(;S<n;){for(;S<y&&!((o=e[S])&128)&&!((c=e[S+1])&128)&&!((d=e[S+2])&128)&&!((_=e[S+3])&128);)i[a++]=o,i[a++]=c,i[a++]=d,i[a++]=_,S+=4;if(o=e[S++],o<128)i[a++]=o;else if((o&224)===192){if(S>=n)return this.interim[0]=o,a;if(c=e[S++],(c&192)!==128){S--;continue}if(m=(o&31)<<6|c&63,m<128){S--;continue}i[a++]=m}else if((o&240)===224){if(S>=n)return this.interim[0]=o,a;if(c=e[S++],(c&192)!==128){S--;continue}if(S>=n)return this.interim[0]=o,this.interim[1]=c,a;if(d=e[S++],(d&192)!==128){S--;continue}if(m=(o&15)<<12|(c&63)<<6|d&63,m<2048||m>=55296&&m<=57343||m===65279)continue;i[a++]=m}else if((o&248)===240){if(S>=n)return this.interim[0]=o,a;if(c=e[S++],(c&192)!==128){S--;continue}if(S>=n)return this.interim[0]=o,this.interim[1]=c,a;if(d=e[S++],(d&192)!==128){S--;continue}if(S>=n)return this.interim[0]=o,this.interim[1]=c,this.interim[2]=d,a;if(_=e[S++],(_&192)!==128){S--;continue}if(m=(o&7)<<18|(c&63)<<12|(d&63)<<6|_&63,m<65536||m>1114111)continue;i[a++]=m}}return a}},Wv="",er=" ",$a=class Kv{constructor(){this.fg=0,this.bg=0,this.extended=new Oo}static toColorRGB(i){return[i>>>16&255,i>>>8&255,i&255]}static fromColorRGB(i){return(i[0]&255)<<16|(i[1]&255)<<8|i[2]&255}clone(){let i=new Kv;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},Oo=class Iv{constructor(i=0,n=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(i){this._ext&=-67108864,this._ext|=i&67108863}get urlId(){return this._urlId}set urlId(i){this._urlId=i}get underlineVariantOffset(){let i=(this._ext&3758096384)>>29;return i<0?i^4294967288:i}set underlineVariantOffset(i){this._ext&=536870911,this._ext|=i<<29&3758096384}clone(){return new Iv(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},Di=class Fv extends $a{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new Oo,this.combinedData=""}static fromCharData(i){let n=new Fv;return n.setFromCharData(i),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Js(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(i){this.fg=i[0],this.bg=0;let n=!1;if(i[1].length>2)n=!0;else if(i[1].length===2){let a=i[1].charCodeAt(0);if(55296<=a&&a<=56319){let o=i[1].charCodeAt(1);56320<=o&&o<=57343?this.content=(a-55296)*1024+o-56320+65536|i[2]<<22:n=!0}else n=!0}else this.content=i[1].charCodeAt(0)|i[2]<<22;n&&(this.combinedData=i[1],this.content=2097152|i[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},hg="di$target",Gu="di$dependencies",vu=new Map;function hw(e){return e[Gu]||[]}function Lt(e){if(vu.has(e))return vu.get(e);let i=function(n,a,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");cw(i,n,o)};return i._id=e,vu.set(e,i),i}function cw(e,i,n){i[hg]===i?i[Gu].push({id:e,index:n}):(i[Gu]=[{id:e,index:n}],i[hg]=i)}var Xt=Lt("BufferService"),Vv=Lt("CoreMouseService"),Ar=Lt("CoreService"),uw=Lt("CharsetService"),Nd=Lt("InstantiationService"),Xv=Lt("LogService"),$t=Lt("OptionsService"),$v=Lt("OscLinkService"),dw=Lt("UnicodeService"),Za=Lt("DecorationService"),Wu=class{constructor(e,i,n){this._bufferService=e,this._optionsService=i,this._oscLinkService=n}provideLinks(e,i){let n=this._bufferService.buffer.lines.get(e-1);if(!n){i(void 0);return}let a=[],o=this._optionsService.rawOptions.linkHandler,c=new Di,d=n.getTrimmedLength(),_=-1,m=-1,f=!1;for(let y=0;y<d;y++)if(!(m===-1&&!n.hasContent(y))){if(n.loadCell(y,c),c.hasExtendedAttrs()&&c.extended.urlId)if(m===-1){m=y,_=c.extended.urlId;continue}else f=c.extended.urlId!==_;else m!==-1&&(f=!0);if(f||m!==-1&&y===d-1){let S=this._oscLinkService.getLinkData(_)?.uri;if(S){let b={start:{x:m+1,y:e},end:{x:y+(!f&&y===d-1?1:0),y:e}},M=!1;if(!o?.allowNonHttpProtocols)try{let E=new URL(S);["http:","https:"].includes(E.protocol)||(M=!0)}catch{M=!0}M||a.push({text:S,range:b,activate:(E,D)=>o?o.activate(E,D,b):fw(E,D),hover:(E,D)=>o?.hover?.(E,D,b),leave:(E,D)=>o?.leave?.(E,D,b)})}f=!1,c.hasExtendedAttrs()&&c.extended.urlId?(m=y,_=c.extended.urlId):(m=-1,_=-1)}}i(a)}};Wu=lt([he(0,Xt),he(1,$t),he(2,$v)],Wu);function fw(e,i){if(confirm(`Do you want to navigate to ${i}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=i}else console.warn("Opening link blocked as opener could not be cleared")}}var Ko=Lt("CharSizeService"),ws=Lt("CoreBrowserService"),Bd=Lt("MouseService"),xs=Lt("RenderService"),_w=Lt("SelectionService"),Zv=Lt("CharacterJoinerService"),Tn=Lt("ThemeService"),Qv=Lt("LinkProviderService"),mw=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?cg.isErrorNoTelemetry(e)?new cg(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(i=>{i(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},pw=new mw;function Eo(e){gw(e)||pw.onUnexpectedError(e)}var Ku="Canceled";function gw(e){return e instanceof vw?!0:e instanceof Error&&e.name===Ku&&e.message===Ku}var vw=class extends Error{constructor(){super(Ku),this.name=this.message}};function Sw(e){return new Error(`Illegal argument: ${e}`)}var cg=class Iu extends Error{constructor(i){super(i),this.name="CodeExpectedError"}static fromError(i){if(i instanceof Iu)return i;let n=new Iu;return n.message=i.message,n.stack=i.stack,n}static isErrorNoTelemetry(i){return i.name==="CodeExpectedError"}},Fu=class Jv extends Error{constructor(i){super(i||"An unexpected bug occurred."),Object.setPrototypeOf(this,Jv.prototype)}};function di(e,i=0){return e[e.length-(1+i)]}var yw;(e=>{function i(c){return c<0}e.isLessThan=i;function n(c){return c<=0}e.isLessThanOrEqual=n;function a(c){return c>0}e.isGreaterThan=a;function o(c){return c===0}e.isNeitherLessOrGreaterThan=o,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(yw||={});function bw(e,i){let n=this,a=!1,o;return function(){return a||(a=!0,i||(o=e.apply(n,arguments))),o}}var e0;(e=>{function i(J){return J&&typeof J=="object"&&typeof J[Symbol.iterator]=="function"}e.is=i;let n=Object.freeze([]);function a(){return n}e.empty=a;function*o(J){yield J}e.single=o;function c(J){return i(J)?J:o(J)}e.wrap=c;function d(J){return J||n}e.from=d;function*_(J){for(let ae=J.length-1;ae>=0;ae--)yield J[ae]}e.reverse=_;function m(J){return!J||J[Symbol.iterator]().next().done===!0}e.isEmpty=m;function f(J){return J[Symbol.iterator]().next().value}e.first=f;function y(J,ae){let ie=0;for(let re of J)if(ae(re,ie++))return!0;return!1}e.some=y;function S(J,ae){for(let ie of J)if(ae(ie))return ie}e.find=S;function*b(J,ae){for(let ie of J)ae(ie)&&(yield ie)}e.filter=b;function*M(J,ae){let ie=0;for(let re of J)yield ae(re,ie++)}e.map=M;function*E(J,ae){let ie=0;for(let re of J)yield*ae(re,ie++)}e.flatMap=E;function*D(...J){for(let ae of J)yield*ae}e.concat=D;function j(J,ae,ie){let re=ie;for(let ve of J)re=ae(re,ve);return re}e.reduce=j;function*z(J,ae,ie=J.length){for(ae<0&&(ae+=J.length),ie<0?ie+=J.length:ie>J.length&&(ie=J.length);ae<ie;ae++)yield J[ae]}e.slice=z;function H(J,ae=Number.POSITIVE_INFINITY){let ie=[];if(ae===0)return[ie,J];let re=J[Symbol.iterator]();for(let ve=0;ve<ae;ve++){let le=re.next();if(le.done)return[ie,e.empty()];ie.push(le.value)}return[ie,{[Symbol.iterator](){return re}}]}e.consume=H;async function Z(J){let ae=[];for await(let ie of J)ae.push(ie);return Promise.resolve(ae)}e.asyncToArray=Z})(e0||={});function Mr(e){if(e0.is(e)){let i=[];for(let n of e)if(n)try{n.dispose()}catch(a){i.push(a)}if(i.length===1)throw i[0];if(i.length>1)throw new AggregateError(i,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function ww(...e){return Je(()=>Mr(e))}function Je(e){return{dispose:bw(()=>{e()})}}var t0=class i0{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Mr(this._toDispose)}finally{this._toDispose.clear()}}add(i){if(!i)return i;if(i===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?i0.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(i),i}delete(i){if(i){if(i===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(i),i.dispose()}}deleteAndLeak(i){i&&this._toDispose.has(i)&&(this._toDispose.delete(i),void 0)}};t0.DISABLE_DISPOSED_WARNING=!1;var tr=t0,Me=class{constructor(){this._store=new tr,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Me.None=Object.freeze({dispose(){}});var kn=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},vs=typeof window=="object"?window:globalThis,Vu=class Xu{constructor(i){this.element=i,this.next=Xu.Undefined,this.prev=Xu.Undefined}};Vu.Undefined=new Vu(void 0);var et=Vu,ug=class{constructor(){this._first=et.Undefined,this._last=et.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===et.Undefined}clear(){let e=this._first;for(;e!==et.Undefined;){let i=e.next;e.prev=et.Undefined,e.next=et.Undefined,e=i}this._first=et.Undefined,this._last=et.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,i){let n=new et(e);if(this._first===et.Undefined)this._first=n,this._last=n;else if(i){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let a=!1;return()=>{a||(a=!0,this._remove(n))}}shift(){if(this._first!==et.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==et.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==et.Undefined&&e.next!==et.Undefined){let i=e.prev;i.next=e.next,e.next.prev=i}else e.prev===et.Undefined&&e.next===et.Undefined?(this._first=et.Undefined,this._last=et.Undefined):e.next===et.Undefined?(this._last=this._last.prev,this._last.next=et.Undefined):e.prev===et.Undefined&&(this._first=this._first.next,this._first.prev=et.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==et.Undefined;)yield e.element,e=e.next}},xw=globalThis.performance&&typeof globalThis.performance.now=="function",Cw=class s0{static create(i){return new s0(i)}constructor(i){this._now=xw&&i===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},qt;(e=>{e.None=()=>Me.None;function i(ee,N){return S(ee,()=>{},0,void 0,!0,void 0,N)}e.defer=i;function n(ee){return(N,X=null,te)=>{let T=!1,G;return G=ee(W=>{if(!T)return G?G.dispose():T=!0,N.call(X,W)},null,te),T&&G.dispose(),G}}e.once=n;function a(ee,N,X){return f((te,T=null,G)=>ee(W=>te.call(T,N(W)),null,G),X)}e.map=a;function o(ee,N,X){return f((te,T=null,G)=>ee(W=>{N(W),te.call(T,W)},null,G),X)}e.forEach=o;function c(ee,N,X){return f((te,T=null,G)=>ee(W=>N(W)&&te.call(T,W),null,G),X)}e.filter=c;function d(ee){return ee}e.signal=d;function _(...ee){return(N,X=null,te)=>{let T=ww(...ee.map(G=>G(W=>N.call(X,W))));return y(T,te)}}e.any=_;function m(ee,N,X,te){let T=X;return a(ee,G=>(T=N(T,G),T),te)}e.reduce=m;function f(ee,N){let X,te={onWillAddFirstListener(){X=ee(T.fire,T)},onDidRemoveLastListener(){X?.dispose()}},T=new se(te);return N?.add(T),T.event}function y(ee,N){return N instanceof Array?N.push(ee):N&&N.add(ee),ee}function S(ee,N,X=100,te=!1,T=!1,G,W){let ce,U,w,k=0,Y,Q={leakWarningThreshold:G,onWillAddFirstListener(){ce=ee(oe=>{k++,U=N(U,oe),te&&!w&&(ne.fire(U),U=void 0),Y=()=>{let we=U;U=void 0,w=void 0,(!te||k>1)&&ne.fire(we),k=0},typeof X=="number"?(clearTimeout(w),w=setTimeout(Y,X)):w===void 0&&(w=0,queueMicrotask(Y))})},onWillRemoveListener(){T&&k>0&&Y?.()},onDidRemoveLastListener(){Y=void 0,ce.dispose()}},ne=new se(Q);return W?.add(ne),ne.event}e.debounce=S;function b(ee,N=0,X){return e.debounce(ee,(te,T)=>te?(te.push(T),te):[T],N,void 0,!0,void 0,X)}e.accumulate=b;function M(ee,N=(te,T)=>te===T,X){let te=!0,T;return c(ee,G=>{let W=te||!N(G,T);return te=!1,T=G,W},X)}e.latch=M;function E(ee,N,X){return[e.filter(ee,N,X),e.filter(ee,te=>!N(te),X)]}e.split=E;function D(ee,N=!1,X=[],te){let T=X.slice(),G=ee(U=>{T?T.push(U):ce.fire(U)});te&&te.add(G);let W=()=>{T?.forEach(U=>ce.fire(U)),T=null},ce=new se({onWillAddFirstListener(){G||(G=ee(U=>ce.fire(U)),te&&te.add(G))},onDidAddFirstListener(){T&&(N?setTimeout(W):W())},onDidRemoveLastListener(){G&&G.dispose(),G=null}});return te&&te.add(ce),ce.event}e.buffer=D;function j(ee,N){return(X,te,T)=>{let G=N(new H);return ee(function(W){let ce=G.evaluate(W);ce!==z&&X.call(te,ce)},void 0,T)}}e.chain=j;let z=Symbol("HaltChainable");class H{constructor(){this.steps=[]}map(N){return this.steps.push(N),this}forEach(N){return this.steps.push(X=>(N(X),X)),this}filter(N){return this.steps.push(X=>N(X)?X:z),this}reduce(N,X){let te=X;return this.steps.push(T=>(te=N(te,T),te)),this}latch(N=(X,te)=>X===te){let X=!0,te;return this.steps.push(T=>{let G=X||!N(T,te);return X=!1,te=T,G?T:z}),this}evaluate(N){for(let X of this.steps)if(N=X(N),N===z)break;return N}}function Z(ee,N,X=te=>te){let te=(...ce)=>W.fire(X(...ce)),T=()=>ee.on(N,te),G=()=>ee.removeListener(N,te),W=new se({onWillAddFirstListener:T,onDidRemoveLastListener:G});return W.event}e.fromNodeEventEmitter=Z;function J(ee,N,X=te=>te){let te=(...ce)=>W.fire(X(...ce)),T=()=>ee.addEventListener(N,te),G=()=>ee.removeEventListener(N,te),W=new se({onWillAddFirstListener:T,onDidRemoveLastListener:G});return W.event}e.fromDOMEventEmitter=J;function ae(ee){return new Promise(N=>n(ee)(N))}e.toPromise=ae;function ie(ee){let N=new se;return ee.then(X=>{N.fire(X)},()=>{N.fire(void 0)}).finally(()=>{N.dispose()}),N.event}e.fromPromise=ie;function re(ee,N){return ee(X=>N.fire(X))}e.forward=re;function ve(ee,N,X){return N(X),ee(te=>N(te))}e.runAndSubscribe=ve;class le{constructor(N,X){this._observable=N,this._counter=0,this._hasChanged=!1;let te={onWillAddFirstListener:()=>{N.addObserver(this)},onDidRemoveLastListener:()=>{N.removeObserver(this)}};this.emitter=new se(te),X&&X.add(this.emitter)}beginUpdate(N){this._counter++}handlePossibleChange(N){}handleChange(N,X){this._hasChanged=!0}endUpdate(N){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function _e(ee,N){return new le(ee,N).emitter.event}e.fromObservable=_e;function ye(ee){return(N,X,te)=>{let T=0,G=!1,W={beginUpdate(){T++},endUpdate(){T--,T===0&&(ee.reportChanges(),G&&(G=!1,N.call(X)))},handlePossibleChange(){},handleChange(){G=!0}};ee.addObserver(W),ee.reportChanges();let ce={dispose(){ee.removeObserver(W)}};return te instanceof tr?te.add(ce):Array.isArray(te)&&te.push(ce),ce}}e.fromObservableLight=ye})(qt||={});var $u=class Zu{constructor(i){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${i}_${Zu._idPool++}`,Zu.all.add(this)}start(i){this._stopWatch=new Cw,this.listenerCount=i}stop(){if(this._stopWatch){let i=this._stopWatch.elapsed();this.durations.push(i),this.elapsedOverall+=i,this.invocationCount+=1,this._stopWatch=void 0}}};$u.all=new Set,$u._idPool=0;var Ew=$u,kw=-1,r0=class n0{constructor(i,n,a=(n0._idPool++).toString(16).padStart(3,"0")){this._errorHandler=i,this.threshold=n,this.name=a,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(i,n){let a=this.threshold;if(a<=0||n<a)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(i.value)||0;if(this._stacks.set(i.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=a*.5;let[c,d]=this.getMostFrequentStack(),_=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${d}):`;console.warn(_),console.warn(c);let m=new Tw(_,c);this._errorHandler(m)}return()=>{let c=this._stacks.get(i.value)||0;this._stacks.set(i.value,c-1)}}getMostFrequentStack(){if(!this._stacks)return;let i,n=0;for(let[a,o]of this._stacks)(!i||n<o)&&(i=[a,o],n=o);return i}};r0._idPool=1;var Rw=r0,Mw=class a0{constructor(i){this.value=i}static create(){let i=new Error;return new a0(i.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Tw=class extends Error{constructor(e,i){super(e),this.name="ListenerLeakError",this.stack=i}},Dw=class extends Error{constructor(e,i){super(e),this.name="ListenerRefusalError",this.stack=i}},Aw=0,Su=class{constructor(e){this.value=e,this.id=Aw++}},Nw=2,Bw,se=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new Rw(e?.onListenerError??Eo,this._options?.leakWarningThreshold??kw):void 0,this._perfMon=this._options?._profName?new Ew(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,i,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let d=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(d);let _=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],m=new Dw(`${d}. HINT: Stack shows most frequent listener (${_[1]}-times)`,_[0]);return(this._options?.onListenerError||Eo)(m),Me.None}if(this._disposed)return Me.None;i&&(e=e.bind(i));let a=new Su(e),o;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(a.stack=Mw.create(),o=this._leakageMon.check(a.stack,this._size+1)),this._listeners?this._listeners instanceof Su?(this._deliveryQueue??=new Lw,this._listeners=[this._listeners,a]):this._listeners.push(a):(this._options?.onWillAddFirstListener?.(this),this._listeners=a,this._options?.onDidAddFirstListener?.(this)),this._size++;let c=Je(()=>{o?.(),this._removeListener(a)});return n instanceof tr?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let i=this._listeners,n=i.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,i[n]=void 0;let a=this._deliveryQueue.current===this;if(this._size*Nw<=i.length){let o=0;for(let c=0;c<i.length;c++)i[c]?i[o++]=i[c]:a&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);i.length=o}}_deliver(e,i){if(!e)return;let n=this._options?.onListenerError||Eo;if(!n){e.value(i);return}try{e.value(i)}catch(a){n(a)}}_deliverQueue(e){let i=e.current._listeners;for(;e.i<e.end;)this._deliver(i[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof Su)this._deliver(this._listeners,e);else{let i=this._deliveryQueue;i.enqueue(this,e,this._listeners.length),this._deliverQueue(i)}this._perfMon?.stop()}hasListeners(){return this._size>0}},Lw=class{constructor(){this.i=-1,this.end=0}enqueue(e,i,n){this.i=0,this.end=n,this.current=e,this.value=i}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Qu=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new se,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new se,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(i){return this.mapWindowIdToZoomLevel.get(this.getWindowId(i))??0}setZoomLevel(i,n){if(this.getZoomLevel(n)===i)return;let a=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(a,i),this._onDidChangeZoomLevel.fire(a)}getZoomFactor(i){return this.mapWindowIdToZoomFactor.get(this.getWindowId(i))??1}setZoomFactor(i,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),i)}setFullscreen(i,n){if(this.isFullscreen(n)===i)return;let a=this.getWindowId(n);this.mapWindowIdToFullScreen.set(a,i),this._onDidChangeFullscreen.fire(a)}isFullscreen(i){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(i))}getWindowId(i){return i.vscodeWindowId}};Qu.INSTANCE=new Qu;var Ld=Qu;function Ow(e,i,n){typeof i=="string"&&(i=e.matchMedia(i)),i.addEventListener("change",n)}Ld.INSTANCE.onDidChangeZoomLevel;function zw(e){return Ld.INSTANCE.getZoomFactor(e)}Ld.INSTANCE.onDidChangeFullscreen;var Dn=typeof navigator=="object"?navigator.userAgent:"",Ju=Dn.indexOf("Firefox")>=0,Hw=Dn.indexOf("AppleWebKit")>=0,Od=Dn.indexOf("Chrome")>=0,jw=!Od&&Dn.indexOf("Safari")>=0;Dn.indexOf("Electron/")>=0;Dn.indexOf("Android")>=0;var yu=!1;if(typeof vs.matchMedia=="function"){let e=vs.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),i=vs.matchMedia("(display-mode: fullscreen)");yu=e.matches,Ow(vs,e,({matches:n})=>{yu&&i.matches||(yu=n)})}var Cn="en",ed=!1,td=!1,ko=!1,l0=!1,go,Ro=Cn,dg=Cn,Uw,gs,Rr=globalThis,_i;typeof Rr.vscode<"u"&&typeof Rr.vscode.process<"u"?_i=Rr.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(_i=process);var qw=typeof _i?.versions?.electron=="string",Pw=qw&&_i?.type==="renderer";if(typeof _i=="object"){ed=_i.platform==="win32",td=_i.platform==="darwin",ko=_i.platform==="linux",ko&&_i.env.SNAP&&_i.env.SNAP_REVISION,_i.env.CI||_i.env.BUILD_ARTIFACTSTAGINGDIRECTORY,go=Cn,Ro=Cn;let e=_i.env.VSCODE_NLS_CONFIG;if(e)try{let i=JSON.parse(e);go=i.userLocale,dg=i.osLocale,Ro=i.resolvedLanguage||Cn,Uw=i.languagePack?.translationsConfigFile}catch{}l0=!0}else typeof navigator=="object"&&!Pw?(gs=navigator.userAgent,ed=gs.indexOf("Windows")>=0,td=gs.indexOf("Macintosh")>=0,(gs.indexOf("Macintosh")>=0||gs.indexOf("iPad")>=0||gs.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,ko=gs.indexOf("Linux")>=0,gs?.indexOf("Mobi")>=0,Ro=globalThis._VSCODE_NLS_LANGUAGE||Cn,go=navigator.language.toLowerCase(),dg=go):console.error("Unable to resolve platform.");var o0=ed,Ii=td,Yw=ko,fg=l0,Vi=gs,Xs=Ro,Gw;(e=>{function i(){return Xs}e.value=i;function n(){return Xs.length===2?Xs==="en":Xs.length>=3?Xs[0]==="e"&&Xs[1]==="n"&&Xs[2]==="-":!1}e.isDefaultVariant=n;function a(){return Xs==="en"}e.isDefault=a})(Gw||={});var Ww=typeof Rr.postMessage=="function"&&!Rr.importScripts;(()=>{if(Ww){let e=[];Rr.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let a=0,o=e.length;a<o;a++){let c=e[a];if(c.id===n.data.vscodeScheduleAsyncWork){e.splice(a,1),c.callback();return}}});let i=0;return n=>{let a=++i;e.push({id:a,callback:n}),Rr.postMessage({vscodeScheduleAsyncWork:a},"*")}}return e=>setTimeout(e)})();var Kw=!!(Vi&&Vi.indexOf("Chrome")>=0);Vi&&Vi.indexOf("Firefox")>=0;!Kw&&Vi&&Vi.indexOf("Safari")>=0;Vi&&Vi.indexOf("Edg/")>=0;Vi&&Vi.indexOf("Android")>=0;var bn=typeof navigator=="object"?navigator:{};fg||document.queryCommandSupported&&document.queryCommandSupported("copy")||bn&&bn.clipboard&&bn.clipboard.writeText,fg||bn&&bn.clipboard&&bn.clipboard.readText;var zd=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,i){this._keyCodeToStr[e]=i,this._strToKeyCode[i.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},bu=new zd,_g=new zd,mg=new zd,Iw=new Array(230),h0;(e=>{function i(_){return bu.keyCodeToStr(_)}e.toString=i;function n(_){return bu.strToKeyCode(_)}e.fromString=n;function a(_){return _g.keyCodeToStr(_)}e.toUserSettingsUS=a;function o(_){return mg.keyCodeToStr(_)}e.toUserSettingsGeneral=o;function c(_){return _g.strToKeyCode(_)||mg.strToKeyCode(_)}e.fromUserSettings=c;function d(_){if(_>=98&&_<=113)return null;switch(_){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return bu.keyCodeToStr(_)}e.toElectronAccelerator=d})(h0||={});var Fw=class c0{constructor(i,n,a,o,c){this.ctrlKey=i,this.shiftKey=n,this.altKey=a,this.metaKey=o,this.keyCode=c}equals(i){return i instanceof c0&&this.ctrlKey===i.ctrlKey&&this.shiftKey===i.shiftKey&&this.altKey===i.altKey&&this.metaKey===i.metaKey&&this.keyCode===i.keyCode}getHashCode(){let i=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",a=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${i}${n}${a}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Vw([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},Vw=class{constructor(e){if(e.length===0)throw Sw("chords");this.chords=e}getHashCode(){let e="";for(let i=0,n=this.chords.length;i<n;i++)i!==0&&(e+=";"),e+=this.chords[i].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let i=0;i<this.chords.length;i++)if(!this.chords[i].equals(e.chords[i]))return!1;return!0}};function Xw(e){if(e.charCode){let n=String.fromCharCode(e.charCode).toUpperCase();return h0.fromString(n)}let i=e.keyCode;if(i===3)return 7;if(Ju)switch(i){case 59:return 85;case 60:if(Yw)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Ii)return 57;break}else if(Hw&&(Ii&&i===93||!Ii&&i===92))return 57;return Iw[i]||0}var $w=Ii?256:2048,Zw=512,Qw=1024,Jw=Ii?2048:256,pg=class{constructor(e){this._standardKeyboardEventBrand=!0;let i=e;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=i.getModifierState?.("AltGraph"),this.keyCode=Xw(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let i=0;return this.ctrlKey&&(i|=$w),this.altKey&&(i|=Zw),this.shiftKey&&(i|=Qw),this.metaKey&&(i|=Jw),i|=e,i}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Fw(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},gg=new WeakMap;function ex(e){if(!e.parent||e.parent===e)return null;try{let i=e.location,n=e.parent.location;if(i.origin!=="null"&&n.origin!=="null"&&i.origin!==n.origin)return null}catch{return null}return e.parent}var tx=class{static getSameOriginWindowChain(e){let i=gg.get(e);if(!i){i=[],gg.set(e,i);let n=e,a;do a=ex(n),a?i.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):i.push({window:new WeakRef(n),iframeElement:null}),n=a;while(n)}return i.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,i){if(!i||e===i)return{top:0,left:0};let n=0,a=0,o=this.getSameOriginWindowChain(e);for(let c of o){let d=c.window.deref();if(n+=d?.scrollY??0,a+=d?.scrollX??0,d===i||!c.iframeElement)break;let _=c.iframeElement.getBoundingClientRect();n+=_.top,a+=_.left}return{top:n,left:a}}},vo=class{constructor(e,i){this.timestamp=Date.now(),this.browserEvent=i,this.leftButton=i.button===0,this.middleButton=i.button===1,this.rightButton=i.button===2,this.buttons=i.buttons,this.target=i.target,this.detail=i.detail||1,i.type==="dblclick"&&(this.detail=2),this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,typeof i.pageX=="number"?(this.posx=i.pageX,this.posy=i.pageY):(this.posx=i.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=i.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=tx.getPositionOfChildWindowRelativeToAncestorWindow(e,i.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},vg=class{constructor(e,i=0,n=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=i;let a=!1;if(Od){let o=navigator.userAgent.match(/Chrome\/(\d+)/);a=(o?parseInt(o[1]):123)<=122}if(e){let o=e,c=e,d=e.view?.devicePixelRatio||1;if(typeof o.wheelDeltaY<"u")a?this.deltaY=o.wheelDeltaY/(120*d):this.deltaY=o.wheelDeltaY/120;else if(typeof c.VERTICAL_AXIS<"u"&&c.axis===c.VERTICAL_AXIS)this.deltaY=-c.detail/3;else if(e.type==="wheel"){let _=e;_.deltaMode===_.DOM_DELTA_LINE?Ju&&!Ii?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")jw&&o0?this.deltaX=-(o.wheelDeltaX/120):a?this.deltaX=o.wheelDeltaX/(120*d):this.deltaX=o.wheelDeltaX/120;else if(typeof c.HORIZONTAL_AXIS<"u"&&c.axis===c.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let _=e;_.deltaMode===_.DOM_DELTA_LINE?Ju&&!Ii?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(a?this.deltaY=e.wheelDelta/(120*d):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},u0=Object.freeze(function(e,i){let n=setTimeout(e.bind(i),0);return{dispose(){clearTimeout(n)}}}),ix;(e=>{function i(n){return n===e.None||n===e.Cancelled||n instanceof sx?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}e.isCancellationToken=i,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:qt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:u0})})(ix||={});var sx=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?u0:(this._emitter||(this._emitter=new se),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Hd=class{constructor(e,i){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof i=="number"&&this.setIfNotSet(e,i)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,i){if(this._isDisposed)throw new Fu("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},i)}setIfNotSet(e,i){if(this._isDisposed)throw new Fu("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},i))}},rx=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,i,n=globalThis){if(this.isDisposed)throw new Fu("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let a=n.setInterval(()=>{e()},i);this.disposable=Je(()=>{n.clearInterval(a),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},nx;(e=>{async function i(a){let o,c=await Promise.all(a.map(d=>d.then(_=>_,_=>{o||(o=_)})));if(typeof o<"u")throw o;return c}e.settled=i;function n(a){return new Promise(async(o,c)=>{try{await a(o,c)}catch(d){c(d)}})}e.withAsyncBody=n})(nx||={});var Sg=class Ri{static fromArray(i){return new Ri(n=>{n.emitMany(i)})}static fromPromise(i){return new Ri(async n=>{n.emitMany(await i)})}static fromPromises(i){return new Ri(async n=>{await Promise.all(i.map(async a=>n.emitOne(await a)))})}static merge(i){return new Ri(async n=>{await Promise.all(i.map(async a=>{for await(let o of a)n.emitOne(o)}))})}constructor(i,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new se,queueMicrotask(async()=>{let a={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(i(a)),this.resolve()}catch(o){this.reject(o)}finally{a.emitOne=void 0,a.emitMany=void 0,a.reject=void 0}})}[Symbol.asyncIterator](){let i=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(i<this._results.length)return{done:!1,value:this._results[i++]};if(this._state===1)return{done:!0,value:void 0};await qt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(i,n){return new Ri(async a=>{for await(let o of i)a.emitOne(n(o))})}map(i){return Ri.map(this,i)}static filter(i,n){return new Ri(async a=>{for await(let o of i)n(o)&&a.emitOne(o)})}filter(i){return Ri.filter(this,i)}static coalesce(i){return Ri.filter(i,n=>!!n)}coalesce(){return Ri.coalesce(this)}static async toPromise(i){let n=[];for await(let a of i)n.push(a);return n}toPromise(){return Ri.toPromise(this)}emitOne(i){this._state===0&&(this._results.push(i),this._onStateChanged.fire())}emitMany(i){this._state===0&&(this._results=this._results.concat(i),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(i){this._state===0&&(this._state=2,this._error=i,this._onStateChanged.fire())}};Sg.EMPTY=Sg.fromArray([]);var{getWindow:Ki,getWindowId:ax,onDidRegisterWindow:lx}=(function(){let e=new Map,i={window:vs,disposables:new tr};e.set(vs.vscodeWindowId,i);let n=new se,a=new se,o=new se;function c(d,_){return(typeof d=="number"?e.get(d):void 0)??(_?i:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:a.event,registerWindow(d){if(e.has(d.vscodeWindowId))return Me.None;let _=new tr,m={window:d,disposables:_.add(new tr)};return e.set(d.vscodeWindowId,m),_.add(Je(()=>{e.delete(d.vscodeWindowId),a.fire(d)})),_.add(be(d,Dt.BEFORE_UNLOAD,()=>{o.fire(d)})),n.fire(m),_},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(d){return d.vscodeWindowId},hasWindow(d){return e.has(d)},getWindowById:c,getWindow(d){let _=d;if(_?.ownerDocument?.defaultView)return _.ownerDocument.defaultView.window;let m=d;return m?.view?m.view.window:vs},getDocument(d){return Ki(d).document}}})(),ox=class{constructor(e,i,n,a){this._node=e,this._type=i,this._handler=n,this._options=a||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function be(e,i,n,a){return new ox(e,i,n,a)}var yg=function(e,i,n,a){return be(e,i,n,a)},jd,hx=class extends rx{constructor(e){super(),this.defaultTarget=e&&Ki(e)}cancelAndSet(e,i,n){return super.cancelAndSet(e,i,n??this.defaultTarget)}},bg=class{constructor(e,i=0){this._runner=e,this.priority=i,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Eo(e)}}static sort(e,i){return i.priority-e.priority}};(function(){let e=new Map,i=new Map,n=new Map,a=new Map,o=c=>{n.set(c,!1);let d=e.get(c)??[];for(i.set(c,d),e.set(c,[]),a.set(c,!0);d.length>0;)d.sort(bg.sort),d.shift().execute();a.set(c,!1)};jd=(c,d,_=0)=>{let m=ax(c),f=new bg(d,_),y=e.get(m);return y||(y=[],e.set(m,y)),y.push(f),n.get(m)||(n.set(m,!0),c.requestAnimationFrame(()=>o(m))),f}})();function cx(e){let i=e.getBoundingClientRect(),n=Ki(e);return{left:i.left+n.scrollX,top:i.top+n.scrollY,width:i.width,height:i.height}}var Dt={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},ux=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let i=ri(e);this._maxWidth!==i&&(this._maxWidth=i,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let i=ri(e);this._width!==i&&(this._width=i,this.domNode.style.width=this._width)}setHeight(e){let i=ri(e);this._height!==i&&(this._height=i,this.domNode.style.height=this._height)}setTop(e){let i=ri(e);this._top!==i&&(this._top=i,this.domNode.style.top=this._top)}setLeft(e){let i=ri(e);this._left!==i&&(this._left=i,this.domNode.style.left=this._left)}setBottom(e){let i=ri(e);this._bottom!==i&&(this._bottom=i,this.domNode.style.bottom=this._bottom)}setRight(e){let i=ri(e);this._right!==i&&(this._right=i,this.domNode.style.right=this._right)}setPaddingTop(e){let i=ri(e);this._paddingTop!==i&&(this._paddingTop=i,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let i=ri(e);this._paddingLeft!==i&&(this._paddingLeft=i,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let i=ri(e);this._paddingBottom!==i&&(this._paddingBottom=i,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let i=ri(e);this._paddingRight!==i&&(this._paddingRight=i,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let i=ri(e);this._fontSize!==i&&(this._fontSize=i,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let i=ri(e);this._lineHeight!==i&&(this._lineHeight=i,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let i=ri(e);this._letterSpacing!==i&&(this._letterSpacing=i,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,i){this.domNode.classList.toggle(e,i),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,i){this.domNode.setAttribute(e,i)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function ri(e){return typeof e=="number"?`${e}px`:e}function Ya(e){return new ux(e)}var d0=class{constructor(){this._hooks=new tr,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,i){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(i)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,i,n,a,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=a,this._onStopCallback=o;let c=e;try{e.setPointerCapture(i),this._hooks.add(Je(()=>{try{e.releasePointerCapture(i)}catch{}}))}catch{c=Ki(e)}this._hooks.add(be(c,Dt.POINTER_MOVE,d=>{if(d.buttons!==n){this.stopMonitoring(!0);return}d.preventDefault(),this._pointerMoveCallback(d)})),this._hooks.add(be(c,Dt.POINTER_UP,d=>this.stopMonitoring(!0)))}};function dx(e,i,n){let a=null,o=null;if(typeof n.value=="function"?(a="value",o=n.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(a="get",o=n.get),!o)throw new Error("not supported");let c=`$memoize$${i}`;n[a]=function(...d){return this.hasOwnProperty(c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,d)}),this[c]}}var Wi;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Wi||={});var za=class Gt extends Me{constructor(){super(),this.dispatched=!1,this.targets=new ug,this.ignoreTargets=new ug,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(qt.runAndSubscribe(lx,({window:i,disposables:n})=>{n.add(be(i.document,"touchstart",a=>this.onTouchStart(a),{passive:!1})),n.add(be(i.document,"touchend",a=>this.onTouchEnd(i,a))),n.add(be(i.document,"touchmove",a=>this.onTouchMove(a),{passive:!1}))},{window:vs,disposables:this._store}))}static addTarget(i){if(!Gt.isTouchDevice())return Me.None;Gt.INSTANCE||(Gt.INSTANCE=new Gt);let n=Gt.INSTANCE.targets.push(i);return Je(n)}static ignoreTarget(i){if(!Gt.isTouchDevice())return Me.None;Gt.INSTANCE||(Gt.INSTANCE=new Gt);let n=Gt.INSTANCE.ignoreTargets.push(i);return Je(n)}static isTouchDevice(){return"ontouchstart"in vs||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(i){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let a=0,o=i.targetTouches.length;a<o;a++){let c=i.targetTouches.item(a);this.activeTouches[c.identifier]={id:c.identifier,initialTarget:c.target,initialTimeStamp:n,initialPageX:c.pageX,initialPageY:c.pageY,rollingTimestamps:[n],rollingPageX:[c.pageX],rollingPageY:[c.pageY]};let d=this.newGestureEvent(Wi.Start,c.target);d.pageX=c.pageX,d.pageY=c.pageY,this.dispatchEvent(d)}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}onTouchEnd(i,n){let a=Date.now(),o=Object.keys(this.activeTouches).length;for(let c=0,d=n.changedTouches.length;c<d;c++){let _=n.changedTouches.item(c);if(!this.activeTouches.hasOwnProperty(String(_.identifier))){console.warn("move of an UNKNOWN touch",_);continue}let m=this.activeTouches[_.identifier],f=Date.now()-m.initialTimeStamp;if(f<Gt.HOLD_DELAY&&Math.abs(m.initialPageX-di(m.rollingPageX))<30&&Math.abs(m.initialPageY-di(m.rollingPageY))<30){let y=this.newGestureEvent(Wi.Tap,m.initialTarget);y.pageX=di(m.rollingPageX),y.pageY=di(m.rollingPageY),this.dispatchEvent(y)}else if(f>=Gt.HOLD_DELAY&&Math.abs(m.initialPageX-di(m.rollingPageX))<30&&Math.abs(m.initialPageY-di(m.rollingPageY))<30){let y=this.newGestureEvent(Wi.Contextmenu,m.initialTarget);y.pageX=di(m.rollingPageX),y.pageY=di(m.rollingPageY),this.dispatchEvent(y)}else if(o===1){let y=di(m.rollingPageX),S=di(m.rollingPageY),b=di(m.rollingTimestamps)-m.rollingTimestamps[0],M=y-m.rollingPageX[0],E=S-m.rollingPageY[0],D=[...this.targets].filter(j=>m.initialTarget instanceof Node&&j.contains(m.initialTarget));this.inertia(i,D,a,Math.abs(M)/b,M>0?1:-1,y,Math.abs(E)/b,E>0?1:-1,S)}this.dispatchEvent(this.newGestureEvent(Wi.End,m.initialTarget)),delete this.activeTouches[_.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(i,n){let a=document.createEvent("CustomEvent");return a.initEvent(i,!1,!0),a.initialTarget=n,a.tapCount=0,a}dispatchEvent(i){if(i.type===Wi.Tap){let n=new Date().getTime(),a=0;n-this._lastSetTapCountTime>Gt.CLEAR_TAP_COUNT_TIME?a=1:a=2,this._lastSetTapCountTime=n,i.tapCount=a}else(i.type===Wi.Change||i.type===Wi.Contextmenu)&&(this._lastSetTapCountTime=0);if(i.initialTarget instanceof Node){for(let a of this.ignoreTargets)if(a.contains(i.initialTarget))return;let n=[];for(let a of this.targets)if(a.contains(i.initialTarget)){let o=0,c=i.initialTarget;for(;c&&c!==a;)o++,c=c.parentElement;n.push([o,a])}n.sort((a,o)=>a[0]-o[0]);for(let[a,o]of n)o.dispatchEvent(i),this.dispatched=!0}}inertia(i,n,a,o,c,d,_,m,f){this.handle=jd(i,()=>{let y=Date.now(),S=y-a,b=0,M=0,E=!0;o+=Gt.SCROLL_FRICTION*S,_+=Gt.SCROLL_FRICTION*S,o>0&&(E=!1,b=c*o*S),_>0&&(E=!1,M=m*_*S);let D=this.newGestureEvent(Wi.Change);D.translationX=b,D.translationY=M,n.forEach(j=>j.dispatchEvent(D)),E||this.inertia(i,n,y,o,c,d+b,_,m,f+M)})}onTouchMove(i){let n=Date.now();for(let a=0,o=i.changedTouches.length;a<o;a++){let c=i.changedTouches.item(a);if(!this.activeTouches.hasOwnProperty(String(c.identifier))){console.warn("end of an UNKNOWN touch",c);continue}let d=this.activeTouches[c.identifier],_=this.newGestureEvent(Wi.Change,d.initialTarget);_.translationX=c.pageX-di(d.rollingPageX),_.translationY=c.pageY-di(d.rollingPageY),_.pageX=c.pageX,_.pageY=c.pageY,this.dispatchEvent(_),d.rollingPageX.length>3&&(d.rollingPageX.shift(),d.rollingPageY.shift(),d.rollingTimestamps.shift()),d.rollingPageX.push(c.pageX),d.rollingPageY.push(c.pageY),d.rollingTimestamps.push(n)}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}};za.SCROLL_FRICTION=-.005,za.HOLD_DELAY=700,za.CLEAR_TAP_COUNT_TIME=400,lt([dx],za,"isTouchDevice",1);var fx=za,Ud=class extends Me{onclick(e,i){this._register(be(e,Dt.CLICK,n=>i(new vo(Ki(e),n))))}onmousedown(e,i){this._register(be(e,Dt.MOUSE_DOWN,n=>i(new vo(Ki(e),n))))}onmouseover(e,i){this._register(be(e,Dt.MOUSE_OVER,n=>i(new vo(Ki(e),n))))}onmouseleave(e,i){this._register(be(e,Dt.MOUSE_LEAVE,n=>i(new vo(Ki(e),n))))}onkeydown(e,i){this._register(be(e,Dt.KEY_DOWN,n=>i(new pg(n))))}onkeyup(e,i){this._register(be(e,Dt.KEY_UP,n=>i(new pg(n))))}oninput(e,i){this._register(be(e,Dt.INPUT,i))}onblur(e,i){this._register(be(e,Dt.BLUR,i))}onfocus(e,i){this._register(be(e,Dt.FOCUS,i))}onchange(e,i){this._register(be(e,Dt.CHANGE,i))}ignoreGesture(e){return fx.ignoreTarget(e)}},wg=11,_x=class extends Ud{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=wg+"px",this.domNode.style.height=wg+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new d0),this._register(yg(this.bgDomNode,Dt.POINTER_DOWN,i=>this._arrowPointerDown(i))),this._register(yg(this.domNode,Dt.POINTER_DOWN,i=>this._arrowPointerDown(i))),this._pointerdownRepeatTimer=this._register(new hx),this._pointerdownScheduleRepeatTimer=this._register(new Hd)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let i=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Ki(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(i,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},mx=class id{constructor(i,n,a,o,c,d,_){this._forceIntegerValues=i,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,a=a|0,o=o|0,c=c|0,d=d|0,_=_|0),this.rawScrollLeft=o,this.rawScrollTop=_,n<0&&(n=0),o+n>a&&(o=a-n),o<0&&(o=0),c<0&&(c=0),_+c>d&&(_=d-c),_<0&&(_=0),this.width=n,this.scrollWidth=a,this.scrollLeft=o,this.height=c,this.scrollHeight=d,this.scrollTop=_}equals(i){return this.rawScrollLeft===i.rawScrollLeft&&this.rawScrollTop===i.rawScrollTop&&this.width===i.width&&this.scrollWidth===i.scrollWidth&&this.scrollLeft===i.scrollLeft&&this.height===i.height&&this.scrollHeight===i.scrollHeight&&this.scrollTop===i.scrollTop}withScrollDimensions(i,n){return new id(this._forceIntegerValues,typeof i.width<"u"?i.width:this.width,typeof i.scrollWidth<"u"?i.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof i.height<"u"?i.height:this.height,typeof i.scrollHeight<"u"?i.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(i){return new id(this._forceIntegerValues,this.width,this.scrollWidth,typeof i.scrollLeft<"u"?i.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof i.scrollTop<"u"?i.scrollTop:this.rawScrollTop)}createScrollEvent(i,n){let a=this.width!==i.width,o=this.scrollWidth!==i.scrollWidth,c=this.scrollLeft!==i.scrollLeft,d=this.height!==i.height,_=this.scrollHeight!==i.scrollHeight,m=this.scrollTop!==i.scrollTop;return{inSmoothScrolling:n,oldWidth:i.width,oldScrollWidth:i.scrollWidth,oldScrollLeft:i.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:i.height,oldScrollHeight:i.scrollHeight,oldScrollTop:i.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:a,scrollWidthChanged:o,scrollLeftChanged:c,heightChanged:d,scrollHeightChanged:_,scrollTopChanged:m}}},px=class extends Me{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new mx(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,i){let n=this._state.withScrollDimensions(e,i);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let i=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(i,!1)}setScrollPositionSmooth(e,i){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let a;i?a=new Cg(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):a=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=a}else{let n=this._state.withScrollPosition(e);this._smoothScrolling=Cg.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),i=this._state.withScrollPosition(e);if(this._setState(i,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,i){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,i)))}},xg=class{constructor(e,i,n){this.scrollLeft=e,this.scrollTop=i,this.isDone=n}};function wu(e,i){let n=i-e;return function(a){return e+n*Sx(a)}}function gx(e,i,n){return function(a){return a<n?e(a/n):i((a-n)/(1-n))}}var Cg=class sd{constructor(i,n,a,o){this.from=i,this.to=n,this.duration=o,this.startTime=a,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(i,n,a){if(Math.abs(i-n)>2.5*a){let o,c;return i<n?(o=i+.75*a,c=n-.75*a):(o=i-.75*a,c=n+.75*a),gx(wu(i,o),wu(c,n),.33)}return wu(i,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(i){this.to=i.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(i){let n=(i-this.startTime)/this.duration;if(n<1){let a=this.scrollLeft(n),o=this.scrollTop(n);return new xg(a,o,!1)}return new xg(this.to.scrollLeft,this.to.scrollTop,!0)}combine(i,n,a){return sd.start(i,n,a)}static start(i,n,a){a=a+10;let o=Date.now()-10;return new sd(i,n,o,a)}};function vx(e){return Math.pow(e,3)}function Sx(e){return 1-vx(1-e)}var yx=class extends Me{constructor(e,i,n){super(),this._visibility=e,this._visibleClassName=i,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Hd)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}},bx=140,f0=class extends Ud{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new yx(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new d0),this._shouldRender=!0,this.domNode=Ya(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(be(this.domNode.domNode,Dt.POINTER_DOWN,i=>this._domNodePointerDown(i)))}_createArrow(e){let i=this._register(new _x(e));this.domNode.domNode.appendChild(i.bgDomNode),this.domNode.domNode.appendChild(i.domNode)}_createSlider(e,i,n,a){this.slider=Ya(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(i),typeof n=="number"&&this.slider.setWidth(n),typeof a=="number"&&this.slider.setHeight(a),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(be(this.slider.domNode,Dt.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let i=this.domNode.domNode.getClientRects()[0].top,n=i+this._scrollbarState.getSliderPosition(),a=i+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);n<=o&&o<=a?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let i,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")i=e.offsetX,n=e.offsetY;else{let o=cx(this.domNode.domNode);i=e.pageX-o.left,n=e.pageY-o.top}let a=this._pointerDownRelativePosition(i,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(a):this._scrollbarState.getDesiredScrollPositionFromOffset(a)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let i=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),a=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let c=this._sliderOrthogonalPointerPosition(o),d=Math.abs(c-n);if(o0&&d>bx){this._setDesiredScrollPositionNow(a.getScrollPosition());return}let _=this._sliderPointerPosition(o)-i;this._setDesiredScrollPositionNow(a.getDesiredScrollPositionFromDelta(_))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let i={};this.writeScrollPosition(i,e),this._scrollable.setScrollPositionNow(i)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},_0=class rd{constructor(i,n,a,o,c,d){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(a),this._arrowSize=Math.round(i),this._visibleSize=o,this._scrollSize=c,this._scrollPosition=d,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new rd(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(i){let n=Math.round(i);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(i){let n=Math.round(i);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(i){let n=Math.round(i);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(i){this._scrollbarSize=Math.round(i)}setOppositeScrollbarSize(i){this._oppositeScrollbarSize=Math.round(i)}static _computeValues(i,n,a,o,c){let d=Math.max(0,a-i),_=Math.max(0,d-2*n),m=o>0&&o>a;if(!m)return{computedAvailableSize:Math.round(d),computedIsNeeded:m,computedSliderSize:Math.round(_),computedSliderRatio:0,computedSliderPosition:0};let f=Math.round(Math.max(20,Math.floor(a*_/o))),y=(_-f)/(o-a),S=c*y;return{computedAvailableSize:Math.round(d),computedIsNeeded:m,computedSliderSize:Math.round(f),computedSliderRatio:y,computedSliderPosition:Math.round(S)}}_refreshComputedValues(){let i=rd._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=i.computedAvailableSize,this._computedIsNeeded=i.computedIsNeeded,this._computedSliderSize=i.computedSliderSize,this._computedSliderRatio=i.computedSliderRatio,this._computedSliderPosition=i.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(i){if(!this._computedIsNeeded)return 0;let n=i-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(i){if(!this._computedIsNeeded)return 0;let n=i-this._arrowSize,a=this._scrollPosition;return n<this._computedSliderPosition?a-=this._visibleSize:a+=this._visibleSize,a}getDesiredScrollPositionFromDelta(i){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+i;return Math.round(n/this._computedSliderRatio)}},wx=class extends f0{constructor(e,i,n){let a=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:n,scrollbarState:new _0(i.horizontalHasArrows?i.arrowSize:0,i.horizontal===2?0:i.horizontalScrollbarSize,i.vertical===2?0:i.verticalScrollbarSize,a.width,a.scrollWidth,o.scrollLeft),visibility:i.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:i.scrollByPage}),i.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((i.horizontalScrollbarSize-i.horizontalSliderSize)/2),0,void 0,i.horizontalSliderSize)}_updateSlider(e,i){this.slider.setWidth(e),this.slider.setLeft(i)}_renderDomNode(e,i){this.domNode.setWidth(e),this.domNode.setHeight(i),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,i){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,i){e.scrollLeft=i}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},xx=class extends f0{constructor(e,i,n){let a=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:n,scrollbarState:new _0(i.verticalHasArrows?i.arrowSize:0,i.vertical===2?0:i.verticalScrollbarSize,0,a.height,a.scrollHeight,o.scrollTop),visibility:i.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:i.scrollByPage}),i.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((i.verticalScrollbarSize-i.verticalSliderSize)/2),i.verticalSliderSize,void 0)}_updateSlider(e,i){this.slider.setHeight(e),this.slider.setTop(i)}_renderDomNode(e,i){this.domNode.setWidth(i),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,i){return i}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,i){e.scrollTop=i}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},Cx=500,Eg=50,Ex=class{constructor(e,i,n){this.timestamp=e,this.deltaX=i,this.deltaY=n,this.score=0}},nd=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let i=1,n=0,a=1,o=this._rear;do{let c=o===this._front?i:Math.pow(2,-a);if(i-=c,n+=this._memory[o].score*c,o===this._front)break;o=(this._capacity+o-1)%this._capacity,a++}while(!0);return n<=.5}acceptStandardWheelEvent(i){if(Od){let n=Ki(i.browserEvent),a=zw(n);this.accept(Date.now(),i.deltaX*a,i.deltaY*a)}else this.accept(Date.now(),i.deltaX,i.deltaY)}accept(i,n,a){let o=null,c=new Ex(i,n,a);this._front===-1&&this._rear===-1?(this._memory[0]=c,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=c),c.score=this._computeScore(c,o)}_computeScore(i,n){if(Math.abs(i.deltaX)>0&&Math.abs(i.deltaY)>0)return 1;let a=.5;if((!this._isAlmostInt(i.deltaX)||!this._isAlmostInt(i.deltaY))&&(a+=.25),n){let o=Math.abs(i.deltaX),c=Math.abs(i.deltaY),d=Math.abs(n.deltaX),_=Math.abs(n.deltaY),m=Math.max(Math.min(o,d),1),f=Math.max(Math.min(c,_),1),y=Math.max(o,d),S=Math.max(c,_);y%m===0&&S%f===0&&(a-=.5)}return Math.min(Math.max(a,0),1)}_isAlmostInt(i){return Math.abs(Math.round(i)-i)<.01}};nd.INSTANCE=new nd;var kx=nd,Rx=class extends Ud{constructor(e,i,n){super(),this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new se),this.onWillScroll=this._onWillScroll.event,this._options=Tx(i),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let a={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new xx(this._scrollable,this._options,a)),this._horizontalScrollbar=this._register(new wx(this._scrollable,this._options,a)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Ya(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Ya(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Ya(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new Hd),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Mr(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Ii&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new vg(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Mr(this._mouseWheelToDispose),e)){let i=n=>{this._onMouseWheel(new vg(n))};this._mouseWheelToDispose.push(be(this._listenOnDomNode,Dt.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let i=kx.INSTANCE;i.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,c=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&c+o===0?c=o=0:Math.abs(o)>=Math.abs(c)?c=0:o=0),this._options.flipAxes&&([o,c]=[c,o]);let d=!Ii&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||d)&&!c&&(c=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(c=c*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);let _=this._scrollable.getFutureScrollPosition(),m={};if(o){let f=Eg*o,y=_.scrollTop-(f<0?Math.floor(f):Math.ceil(f));this._verticalScrollbar.writeScrollPosition(m,y)}if(c){let f=Eg*c,y=_.scrollLeft-(f<0?Math.floor(f):Math.ceil(f));this._horizontalScrollbar.writeScrollPosition(m,y)}m=this._scrollable.validateScrollPosition(m),(_.scrollLeft!==m.scrollLeft||_.scrollTop!==m.scrollTop)&&(this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(m):this._scrollable.setScrollPositionNow(m),n=!0)}let a=n;!a&&this._options.alwaysConsumeMouseWheel&&(a=!0),!a&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(a=!0),a&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),i=e.scrollTop>0,n=e.scrollLeft>0,a=n?" left":"",o=i?" top":"",c=n||i?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${a}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${c}${o}${a}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Cx)}},Mx=class extends Rx{constructor(e,i,n){super(e,i,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function Tx(e){let i={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return i.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:i.horizontalScrollbarSize,i.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:i.verticalScrollbarSize,Ii&&(i.className+=" mac"),i}var ad=class extends Me{constructor(e,i,n,a,o,c,d,_){super(),this._bufferService=n,this._optionsService=d,this._renderService=_,this._onRequestScrollLines=this._register(new se),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let m=this._register(new px({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:f=>jd(a.window,f)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{m.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new Mx(i,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},m)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(o.onProtocolChange(f=>{this._scrollableElement.updateOptions({handleMouseWheel:!(f&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(qt.runAndSubscribe(c.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=c.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(Je(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=a.mainDocument.createElement("style"),i.appendChild(this._styleElement),this._register(Je(()=>this._styleElement.remove())),this._register(qt.runAndSubscribe(c.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${c.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${c.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${c.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(f=>this._handleScroll(f)))}scrollLines(e){let i=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:i.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,i){i&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!i,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let i=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),n=i-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=i,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};ad=lt([he(2,Xt),he(3,ws),he(4,Vv),he(5,Tn),he(6,$t),he(7,xs)],ad);var ld=class extends Me{constructor(e,i,n,a,o){super(),this._screenElement=e,this._bufferService=i,this._coreBrowserService=n,this._decorationService=a,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(c=>this._removeDecoration(c))),this._register(Je(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){let i=this._coreBrowserService.mainDocument.createElement("div");i.classList.add("xterm-decoration"),i.classList.toggle("xterm-decoration-top-layer",e?.options?.layer==="top"),i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,i.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=e.options.x??0;return n&&n>this._bufferService.cols&&(i.style.display="none"),this._refreshXPosition(e,i),i}_refreshStyle(e){let i=e.marker.line-this._bufferService.buffers.active.ydisp;if(i<0||i>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let n=this._decorationElements.get(e);n||(n=this._createElement(e),e.element=n,this._decorationElements.set(e,n),this._container.appendChild(n),e.onDispose(()=>{this._decorationElements.delete(e),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${i*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(n)}}_refreshXPosition(e,i=e.element){if(!i)return;let n=e.options.x??0;(e.options.anchor||"left")==="right"?i.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":i.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){this._decorationElements.get(e)?.remove(),this._decorationElements.delete(e),e.dispose()}};ld=lt([he(1,Xt),he(2,ws),he(3,Za),he(4,xs)],ld);var Dx=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let i of this._zones)if(i.color===e.options.overviewRulerOptions.color&&i.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(i,e.marker.line))return;if(this._lineAdjacentToZone(i,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(i,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,i){return i>=e.startBufferLine&&i<=e.endBufferLine}_lineAdjacentToZone(e,i,n){return i>=e.startBufferLine-this._linePadding[n||"full"]&&i<=e.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(e,i){e.startBufferLine=Math.min(e.startBufferLine,i),e.endBufferLine=Math.max(e.endBufferLine,i)}},Pi={full:0,left:0,center:0,right:0},$s={full:0,left:0,center:0,right:0},Ta={full:0,left:0,center:0,right:0},zo=class extends Me{constructor(e,i,n,a,o,c,d,_){super(),this._viewportElement=e,this._screenElement=i,this._bufferService=n,this._decorationService=a,this._renderService=o,this._optionsService=c,this._themeService=d,this._coreBrowserService=_,this._colorZoneStore=new Dx,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(Je(()=>this._canvas?.remove()));let m=this._canvas.getContext("2d");if(m)this._ctx=m;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),i=Math.ceil((this._canvas.width-1)/3);$s.full=this._canvas.width,$s.left=e,$s.center=i,$s.right=e,this._refreshDrawHeightConstants(),Ta.full=1,Ta.left=1,Ta.center=1+$s.left,Ta.right=1+$s.left+$s.center}_refreshDrawHeightConstants(){Pi.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,i=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);Pi.left=i,Pi.center=i,Pi.right=i}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pi.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pi.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pi.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pi.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let i of this._decorationService.decorations)this._colorZoneStore.addDecoration(i);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let i of e)i.position!=="full"&&this._renderColorZone(i);for(let i of e)i.position==="full"&&this._renderColorZone(i);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(Ta[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-Pi[e.position||"full"]/2),$s[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+Pi[e.position||"full"]))}_queueRefresh(e,i){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=i||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};zo=lt([he(2,Xt),he(3,Za),he(4,xs),he(5,$t),he(6,Tn),he(7,ws)],zo);var V;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(V||={});var Mo;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(Mo||={});var m0;(e=>e.ST=`${V.ESC}\\`)(m0||={});var od=class{constructor(e,i,n,a,o,c){this._textarea=e,this._compositionView=i,this._bufferService=n,this._optionsService=a,this._coreService=o,this._renderService=c,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let i={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;i.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(i.start,this._compositionPosition.start):n=this._textarea.value.substring(i.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let i=this._textarea.value,n=i.replace(e,"");this._dataAlreadySent=n,i.length>e.length?this._coreService.triggerDataEvent(n,!0):i.length<e.length?this._coreService.triggerDataEvent(`${V.DEL}`,!0):i.length===e.length&&i!==e&&this._coreService.triggerDataEvent(i,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=i*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let c=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(c.width,1)+"px",this._textarea.style.height=Math.max(c.height,1)+"px",this._textarea.style.lineHeight=c.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};od=lt([he(2,Xt),he(3,$t),he(4,Ar),he(5,xs)],od);var At=0,Nt=0,Bt=0,at=0,kg={css:"#00000000",rgba:0},St;(e=>{function i(o,c,d,_){return _!==void 0?`#${br(o)}${br(c)}${br(d)}${br(_)}`:`#${br(o)}${br(c)}${br(d)}`}e.toCss=i;function n(o,c,d,_=255){return(o<<24|c<<16|d<<8|_)>>>0}e.toRgba=n;function a(o,c,d,_){return{css:e.toCss(o,c,d,_),rgba:e.toRgba(o,c,d,_)}}e.toColor=a})(St||={});var Ze;(e=>{function i(m,f){if(at=(f.rgba&255)/255,at===1)return{css:f.css,rgba:f.rgba};let y=f.rgba>>24&255,S=f.rgba>>16&255,b=f.rgba>>8&255,M=m.rgba>>24&255,E=m.rgba>>16&255,D=m.rgba>>8&255;At=M+Math.round((y-M)*at),Nt=E+Math.round((S-E)*at),Bt=D+Math.round((b-D)*at);let j=St.toCss(At,Nt,Bt),z=St.toRgba(At,Nt,Bt);return{css:j,rgba:z}}e.blend=i;function n(m){return(m.rgba&255)===255}e.isOpaque=n;function a(m,f,y){let S=To.ensureContrastRatio(m.rgba,f.rgba,y);if(S)return St.toColor(S>>24&255,S>>16&255,S>>8&255)}e.ensureContrastRatio=a;function o(m){let f=(m.rgba|255)>>>0;return[At,Nt,Bt]=To.toChannels(f),{css:St.toCss(At,Nt,Bt),rgba:f}}e.opaque=o;function c(m,f){return at=Math.round(f*255),[At,Nt,Bt]=To.toChannels(m.rgba),{css:St.toCss(At,Nt,Bt,at),rgba:St.toRgba(At,Nt,Bt,at)}}e.opacity=c;function d(m,f){return at=m.rgba&255,c(m,at*f/255)}e.multiplyOpacity=d;function _(m){return[m.rgba>>24&255,m.rgba>>16&255,m.rgba>>8&255]}e.toColorRGB=_})(Ze||={});var tt;(e=>{let i,n;try{let o=document.createElement("canvas");o.width=1,o.height=1;let c=o.getContext("2d",{willReadFrequently:!0});c&&(i=c,i.globalCompositeOperation="copy",n=i.createLinearGradient(0,0,1,1))}catch{}function a(o){if(o.match(/#[\da-f]{3,8}/i))switch(o.length){case 4:return At=parseInt(o.slice(1,2).repeat(2),16),Nt=parseInt(o.slice(2,3).repeat(2),16),Bt=parseInt(o.slice(3,4).repeat(2),16),St.toColor(At,Nt,Bt);case 5:return At=parseInt(o.slice(1,2).repeat(2),16),Nt=parseInt(o.slice(2,3).repeat(2),16),Bt=parseInt(o.slice(3,4).repeat(2),16),at=parseInt(o.slice(4,5).repeat(2),16),St.toColor(At,Nt,Bt,at);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}let c=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(c)return At=parseInt(c[1]),Nt=parseInt(c[2]),Bt=parseInt(c[3]),at=Math.round((c[5]===void 0?1:parseFloat(c[5]))*255),St.toColor(At,Nt,Bt,at);if(!i||!n)throw new Error("css.toColor: Unsupported css format");if(i.fillStyle=n,i.fillStyle=o,typeof i.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(i.fillRect(0,0,1,1),[At,Nt,Bt,at]=i.getImageData(0,0,1,1).data,at!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:St.toRgba(At,Nt,Bt,at),css:o}}e.toColor=a})(tt||={});var Ft;(e=>{function i(a){return n(a>>16&255,a>>8&255,a&255)}e.relativeLuminance=i;function n(a,o,c){let d=a/255,_=o/255,m=c/255,f=d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4),y=_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4),S=m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4);return f*.2126+y*.7152+S*.0722}e.relativeLuminance2=n})(Ft||={});var To;(e=>{function i(d,_){if(at=(_&255)/255,at===1)return _;let m=_>>24&255,f=_>>16&255,y=_>>8&255,S=d>>24&255,b=d>>16&255,M=d>>8&255;return At=S+Math.round((m-S)*at),Nt=b+Math.round((f-b)*at),Bt=M+Math.round((y-M)*at),St.toRgba(At,Nt,Bt)}e.blend=i;function n(d,_,m){let f=Ft.relativeLuminance(d>>8),y=Ft.relativeLuminance(_>>8);if(ms(f,y)<m){if(y<f){let M=a(d,_,m),E=ms(f,Ft.relativeLuminance(M>>8));if(E<m){let D=o(d,_,m),j=ms(f,Ft.relativeLuminance(D>>8));return E>j?M:D}return M}let S=o(d,_,m),b=ms(f,Ft.relativeLuminance(S>>8));if(b<m){let M=a(d,_,m),E=ms(f,Ft.relativeLuminance(M>>8));return b>E?S:M}return S}}e.ensureContrastRatio=n;function a(d,_,m){let f=d>>24&255,y=d>>16&255,S=d>>8&255,b=_>>24&255,M=_>>16&255,E=_>>8&255,D=ms(Ft.relativeLuminance2(b,M,E),Ft.relativeLuminance2(f,y,S));for(;D<m&&(b>0||M>0||E>0);)b-=Math.max(0,Math.ceil(b*.1)),M-=Math.max(0,Math.ceil(M*.1)),E-=Math.max(0,Math.ceil(E*.1)),D=ms(Ft.relativeLuminance2(b,M,E),Ft.relativeLuminance2(f,y,S));return(b<<24|M<<16|E<<8|255)>>>0}e.reduceLuminance=a;function o(d,_,m){let f=d>>24&255,y=d>>16&255,S=d>>8&255,b=_>>24&255,M=_>>16&255,E=_>>8&255,D=ms(Ft.relativeLuminance2(b,M,E),Ft.relativeLuminance2(f,y,S));for(;D<m&&(b<255||M<255||E<255);)b=Math.min(255,b+Math.ceil((255-b)*.1)),M=Math.min(255,M+Math.ceil((255-M)*.1)),E=Math.min(255,E+Math.ceil((255-E)*.1)),D=ms(Ft.relativeLuminance2(b,M,E),Ft.relativeLuminance2(f,y,S));return(b<<24|M<<16|E<<8|255)>>>0}e.increaseLuminance=o;function c(d){return[d>>24&255,d>>16&255,d>>8&255,d&255]}e.toChannels=c})(To||={});function br(e){let i=e.toString(16);return i.length<2?"0"+i:i}function ms(e,i){return e<i?(i+.05)/(e+.05):(e+.05)/(i+.05)}var Ax=class extends $a{constructor(e,i,n){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=i,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Ho=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new Di}register(e){let i={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(i),i.id}deregister(e){for(let i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===e)return this._characterJoiners.splice(i,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let i=this._bufferService.buffer.lines.get(e);if(!i||i.length===0)return[];let n=[],a=i.translateToString(!0),o=0,c=0,d=0,_=i.getFg(0),m=i.getBg(0);for(let f=0;f<i.getTrimmedLength();f++)if(i.loadCell(f,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==_||this._workCell.bg!==m){if(f-o>1){let y=this._getJoinedRanges(a,d,c,i,o);for(let S=0;S<y.length;S++)n.push(y[S])}o=f,d=c,_=this._workCell.fg,m=this._workCell.bg}c+=this._workCell.getChars().length||er.length}if(this._bufferService.cols-o>1){let f=this._getJoinedRanges(a,d,c,i,o);for(let y=0;y<f.length;y++)n.push(f[y])}return n}_getJoinedRanges(e,i,n,a,o){let c=e.substring(i,n),d=[];try{d=this._characterJoiners[0].handler(c)}catch(_){console.error(_)}for(let _=1;_<this._characterJoiners.length;_++)try{let m=this._characterJoiners[_].handler(c);for(let f=0;f<m.length;f++)Ho._mergeRanges(d,m[f])}catch(m){console.error(m)}return this._stringRangesToCellRanges(d,a,o),d}_stringRangesToCellRanges(e,i,n){let a=0,o=!1,c=0,d=e[a];if(d){for(let _=n;_<this._bufferService.cols;_++){let m=i.getWidth(_),f=i.getString(_).length||er.length;if(m!==0){if(!o&&d[0]<=c&&(d[0]=_,o=!0),d[1]<=c){if(d[1]=_,d=e[++a],!d)break;d[0]<=c?(d[0]=_,o=!0):o=!1}c+=f}}d&&(d[1]=this._bufferService.cols)}}static _mergeRanges(e,i){let n=!1;for(let a=0;a<e.length;a++){let o=e[a];if(n){if(i[1]<=o[0])return e[a-1][1]=i[1],e;if(i[1]<=o[1])return e[a-1][1]=Math.max(i[1],o[1]),e.splice(a,1),e;e.splice(a,1),a--}else{if(i[1]<=o[0])return e.splice(a,0,i),e;if(i[1]<=o[1])return o[0]=Math.min(i[0],o[0]),e;i[0]<o[1]&&(o[0]=Math.min(i[0],o[0]),n=!0);continue}}return n?e[e.length-1][1]=i[1]:e.push(i),e}};Ho=lt([he(0,Xt)],Ho);function Nx(e){return 57508<=e&&e<=57558}function Bx(e){return 9472<=e&&e<=9631}function Lx(e){return Nx(e)||Bx(e)}function Ox(){return{css:{canvas:So(),cell:So()},device:{canvas:So(),cell:So(),char:{width:0,height:0,left:0,top:0}}}}function So(){return{width:0,height:0}}var hd=class{constructor(e,i,n,a,o,c,d){this._document=e,this._characterJoinerService=i,this._optionsService=n,this._coreBrowserService=a,this._coreService=o,this._decorationService=c,this._themeService=d,this._workCell=new Di,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,i,n){this._selectionStart=e,this._selectionEnd=i,this._columnSelectMode=n}createRow(e,i,n,a,o,c,d,_,m,f,y){let S=[],b=this._characterJoinerService.getJoinedCharacters(i),M=this._themeService.colors,E=e.getNoBgTrimmedLength();n&&E<c+1&&(E=c+1);let D,j=0,z="",H=0,Z=0,J=0,ae=0,ie=!1,re=0,ve=!1,le=0,_e=0,ye=[],ee=f!==-1&&y!==-1;for(let N=0;N<E;N++){e.loadCell(N,this._workCell);let X=this._workCell.getWidth();if(X===0)continue;let te=!1,T=N>=_e,G=N,W=this._workCell;if(b.length>0&&N===b[0][0]&&T){let ke=b.shift(),Wt=this._isCellInSelection(ke[0],i);for(H=ke[0]+1;H<ke[1];H++)T&&=Wt===this._isCellInSelection(H,i);T&&=!n||c<ke[0]||c>=ke[1],T?(te=!0,W=new Ax(this._workCell,e.translateToString(!0,ke[0],ke[1]),ke[1]-ke[0]),G=ke[1]-1,X=W.getWidth()):_e=ke[1]}let ce=this._isCellInSelection(N,i),U=n&&N===c,w=ee&&N>=f&&N<=y,k=!1;this._decorationService.forEachDecorationAtCell(N,i,void 0,ke=>{k=!0});let Y=W.getChars()||er;if(Y===" "&&(W.isUnderline()||W.isOverline())&&(Y=""),le=X*_-m.get(Y,W.isBold(),W.isItalic()),!D)D=this._document.createElement("span");else if(j&&(ce&&ve||!ce&&!ve&&W.bg===Z)&&(ce&&ve&&M.selectionForeground||W.fg===J)&&W.extended.ext===ae&&w===ie&&le===re&&!U&&!te&&!k&&T){W.isInvisible()?z+=er:z+=Y,j++;continue}else j&&(D.textContent=z),D=this._document.createElement("span"),j=0,z="";if(Z=W.bg,J=W.fg,ae=W.extended.ext,ie=w,re=le,ve=ce,te&&c>=N&&c<=G&&(c=N),!this._coreService.isCursorHidden&&U&&this._coreService.isCursorInitialized){if(ye.push("xterm-cursor"),this._coreBrowserService.isFocused)d&&ye.push("xterm-cursor-blink"),ye.push(a==="bar"?"xterm-cursor-bar":a==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(o)switch(o){case"outline":ye.push("xterm-cursor-outline");break;case"block":ye.push("xterm-cursor-block");break;case"bar":ye.push("xterm-cursor-bar");break;case"underline":ye.push("xterm-cursor-underline");break}}if(W.isBold()&&ye.push("xterm-bold"),W.isItalic()&&ye.push("xterm-italic"),W.isDim()&&ye.push("xterm-dim"),W.isInvisible()?z=er:z=W.getChars()||er,W.isUnderline()&&(ye.push(`xterm-underline-${W.extended.underlineStyle}`),z===" "&&(z=""),!W.isUnderlineColorDefault()))if(W.isUnderlineColorRGB())D.style.textDecorationColor=`rgb(${$a.toColorRGB(W.getUnderlineColor()).join(",")})`;else{let ke=W.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&W.isBold()&&ke<8&&(ke+=8),D.style.textDecorationColor=M.ansi[ke].css}W.isOverline()&&(ye.push("xterm-overline"),z===" "&&(z="")),W.isStrikethrough()&&ye.push("xterm-strikethrough"),w&&(D.style.textDecoration="underline");let Q=W.getFgColor(),ne=W.getFgColorMode(),oe=W.getBgColor(),we=W.getBgColorMode(),qe=!!W.isInverse();if(qe){let ke=Q;Q=oe,oe=ke;let Wt=ne;ne=we,we=Wt}let Oe,ot,yt=!1;this._decorationService.forEachDecorationAtCell(N,i,void 0,ke=>{ke.options.layer!=="top"&&yt||(ke.backgroundColorRGB&&(we=50331648,oe=ke.backgroundColorRGB.rgba>>8&16777215,Oe=ke.backgroundColorRGB),ke.foregroundColorRGB&&(ne=50331648,Q=ke.foregroundColorRGB.rgba>>8&16777215,ot=ke.foregroundColorRGB),yt=ke.options.layer==="top")}),!yt&&ce&&(Oe=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,oe=Oe.rgba>>8&16777215,we=50331648,yt=!0,M.selectionForeground&&(ne=50331648,Q=M.selectionForeground.rgba>>8&16777215,ot=M.selectionForeground)),yt&&ye.push("xterm-decoration-top");let bt;switch(we){case 16777216:case 33554432:bt=M.ansi[oe],ye.push(`xterm-bg-${oe}`);break;case 50331648:bt=St.toColor(oe>>16,oe>>8&255,oe&255),this._addStyle(D,`background-color:#${Rg((oe>>>0).toString(16),"0",6)}`);break;default:qe?(bt=M.foreground,ye.push("xterm-bg-257")):bt=M.background}switch(Oe||W.isDim()&&(Oe=Ze.multiplyOpacity(bt,.5)),ne){case 16777216:case 33554432:W.isBold()&&Q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(D,bt,M.ansi[Q],W,Oe,void 0)||ye.push(`xterm-fg-${Q}`);break;case 50331648:let ke=St.toColor(Q>>16&255,Q>>8&255,Q&255);this._applyMinimumContrast(D,bt,ke,W,Oe,ot)||this._addStyle(D,`color:#${Rg(Q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(D,bt,M.foreground,W,Oe,ot)||qe&&ye.push("xterm-fg-257")}ye.length&&(D.className=ye.join(" "),ye.length=0),!U&&!te&&!k&&T?j++:D.textContent=z,le!==this.defaultSpacing&&(D.style.letterSpacing=`${le}px`),S.push(D),N=G}return D&&j&&(D.textContent=z),S}_applyMinimumContrast(e,i,n,a,o,c){if(this._optionsService.rawOptions.minimumContrastRatio===1||Lx(a.getCode()))return!1;let d=this._getContrastCache(a),_;if(!o&&!c&&(_=d.getColor(i.rgba,n.rgba)),_===void 0){let m=this._optionsService.rawOptions.minimumContrastRatio/(a.isDim()?2:1);_=Ze.ensureContrastRatio(o||i,c||n,m),d.setColor((o||i).rgba,(c||n).rgba,_??null)}return _?(this._addStyle(e,`color:${_.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,i){e.setAttribute("style",`${e.getAttribute("style")||""}${i};`)}_isCellInSelection(e,i){let n=this._selectionStart,a=this._selectionEnd;return!n||!a?!1:this._columnSelectMode?n[0]<=a[0]?e>=n[0]&&i>=n[1]&&e<a[0]&&i<=a[1]:e<n[0]&&i>=n[1]&&e>=a[0]&&i<=a[1]:i>n[1]&&i<a[1]||n[1]===a[1]&&i===n[1]&&e>=n[0]&&e<a[0]||n[1]<a[1]&&i===a[1]&&e<a[0]||n[1]<a[1]&&i===n[1]&&e>=n[0]}};hd=lt([he(1,Zv),he(2,$t),he(3,ws),he(4,Ar),he(5,Za),he(6,Tn)],hd);function Rg(e,i,n){for(;e.length<n;)e=i+e;return e}var zx=class{constructor(e,i){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=e.createElement("span");n.classList.add("xterm-char-measure-element");let a=e.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontWeight="bold";let o=e.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontStyle="italic";let c=e.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontWeight="bold",c.style.fontStyle="italic",this._measureElements=[n,a,o,c],this._container.appendChild(n),this._container.appendChild(a),this._container.appendChild(o),this._container.appendChild(c),i.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,i,n,a){e===this._font&&i===this._fontSize&&n===this._weight&&a===this._weightBold||(this._font=e,this._fontSize=i,this._weight=n,this._weightBold=a,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${a}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${a}`,this.clear())}get(e,i,n){let a=0;if(!i&&!n&&e.length===1&&(a=e.charCodeAt(0))<256){if(this._flat[a]!==-9999)return this._flat[a];let d=this._measure(e,0);return d>0&&(this._flat[a]=d),d}let o=e;i&&(o+="B"),n&&(o+="I");let c=this._holey.get(o);if(c===void 0){let d=0;i&&(d|=1),n&&(d|=2),c=this._measure(e,d),c>0&&this._holey.set(o,c)}return c}_measure(e,i){let n=this._measureElements[i];return n.textContent=e.repeat(32),n.offsetWidth/32}},Hx=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,i,n,a=!1){if(this.selectionStart=i,this.selectionEnd=n,!i||!n||i[0]===n[0]&&i[1]===n[1]){this.clear();return}let o=e.buffers.active.ydisp,c=i[1]-o,d=n[1]-o,_=Math.max(c,0),m=Math.min(d,e.rows-1);if(_>=e.rows||m<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=a,this.viewportStartRow=c,this.viewportEndRow=d,this.viewportCappedStartRow=_,this.viewportCappedEndRow=m,this.startCol=i[0],this.endCol=n[0]}isCellSelected(e,i,n){return this.hasSelection?(n-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?i>=this.startCol&&n>=this.viewportCappedStartRow&&i<this.endCol&&n<=this.viewportCappedEndRow:i<this.startCol&&n>=this.viewportCappedStartRow&&i>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&i>=this.startCol&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&i>=this.startCol):!1}};function jx(){return new Hx}var xu="xterm-dom-renderer-owner-",ki="xterm-rows",yo="xterm-fg-",Mg="xterm-bg-",Da="xterm-focus",bo="xterm-selection",Ux=1,cd=class extends Me{constructor(e,i,n,a,o,c,d,_,m,f,y,S,b,M){super(),this._terminal=e,this._document=i,this._element=n,this._screenElement=a,this._viewportElement=o,this._helperContainer=c,this._linkifier2=d,this._charSizeService=m,this._optionsService=f,this._bufferService=y,this._coreService=S,this._coreBrowserService=b,this._themeService=M,this._terminalClass=Ux++,this._rowElements=[],this._selectionRenderModel=jx(),this.onRequestRedraw=this._register(new se).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(ki),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(bo),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=Ox(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(E=>this._injectCss(E))),this._injectCss(this._themeService.colors),this._rowFactory=_.createInstance(hd,document),this._element.classList.add(xu+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(E=>this._handleLinkHover(E))),this._register(this._linkifier2.onHideLinkUnderline(E=>this._handleLinkLeave(E))),this._register(Je(()=>{this._element.classList.remove(xu+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new zx(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let i=`${this._terminalSelector} .${ki} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=i,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let i=`${this._terminalSelector} .${ki} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;i+=`${this._terminalSelector} .${ki} .xterm-dim { color: ${Ze.multiplyOpacity(e.foreground,.5).css};}`,i+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,a=`blink_bar_${this._terminalClass}`,o=`blink_block_${this._terminalClass}`;i+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,i+=`@keyframes ${a} { 50% {  box-shadow: none; }}`,i+=`@keyframes ${o} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,i+=`${this._terminalSelector} .${ki}.${Da} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${ki}.${Da} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${a} 1s step-end infinite;}${this._terminalSelector} .${ki}.${Da} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${ki} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${ki} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${ki} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${ki} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${ki} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,i+=`${this._terminalSelector} .${bo} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${bo} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${bo} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[c,d]of e.ansi.entries())i+=`${this._terminalSelector} .${yo}${c} { color: ${d.css}; }${this._terminalSelector} .${yo}${c}.xterm-dim { color: ${Ze.multiplyOpacity(d,.5).css}; }${this._terminalSelector} .${Mg}${c} { background-color: ${d.css}; }`;i+=`${this._terminalSelector} .${yo}257 { color: ${Ze.opaque(e.background).css}; }${this._terminalSelector} .${yo}257.xterm-dim { color: ${Ze.multiplyOpacity(Ze.opaque(e.background),.5).css}; }${this._terminalSelector} .${Mg}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=i}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,i){for(let n=this._rowElements.length;n<=i;n++){let a=this._document.createElement("div");this._rowContainer.appendChild(a),this._rowElements.push(a)}for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,i){this._refreshRowElements(e,i),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Da),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Da),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,i,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,i,n),this.renderRows(0,this._bufferService.rows-1),!e||!i||(this._selectionRenderModel.update(this._terminal,e,i,n),!this._selectionRenderModel.hasSelection))return;let a=this._selectionRenderModel.viewportStartRow,o=this._selectionRenderModel.viewportEndRow,c=this._selectionRenderModel.viewportCappedStartRow,d=this._selectionRenderModel.viewportCappedEndRow,_=this._document.createDocumentFragment();if(n){let m=e[0]>i[0];_.appendChild(this._createSelectionElement(c,m?i[0]:e[0],m?e[0]:i[0],d-c+1))}else{let m=a===c?e[0]:0,f=c===o?i[0]:this._bufferService.cols;_.appendChild(this._createSelectionElement(c,m,f));let y=d-c-1;if(_.appendChild(this._createSelectionElement(c+1,0,this._bufferService.cols,y)),c!==d){let S=o===d?i[0]:this._bufferService.cols;_.appendChild(this._createSelectionElement(d,0,S))}}this._selectionContainer.appendChild(_)}_createSelectionElement(e,i,n,a=1){let o=this._document.createElement("div"),c=i*this.dimensions.css.cell.width,d=this.dimensions.css.cell.width*(n-i);return c+d>this.dimensions.css.canvas.width&&(d=this.dimensions.css.canvas.width-c),o.style.height=`${a*this.dimensions.css.cell.height}px`,o.style.top=`${e*this.dimensions.css.cell.height}px`,o.style.left=`${c}px`,o.style.width=`${d}px`,o}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,i){let n=this._bufferService.buffer,a=n.ybase+n.y,o=Math.min(n.x,this._bufferService.cols-1),c=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,d=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,_=this._optionsService.rawOptions.cursorInactiveStyle;for(let m=e;m<=i;m++){let f=m+n.ydisp,y=this._rowElements[m],S=n.lines.get(f);if(!y||!S)break;y.replaceChildren(...this._rowFactory.createRow(S,f,f===a,d,_,o,c,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${xu}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,i,n,a,o,c){n<0&&(e=0),a<0&&(i=0);let d=this._bufferService.rows-1;n=Math.max(Math.min(n,d),0),a=Math.max(Math.min(a,d),0),o=Math.min(o,this._bufferService.cols);let _=this._bufferService.buffer,m=_.ybase+_.y,f=Math.min(_.x,o-1),y=this._optionsService.rawOptions.cursorBlink,S=this._optionsService.rawOptions.cursorStyle,b=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=n;M<=a;++M){let E=M+_.ydisp,D=this._rowElements[M],j=_.lines.get(E);if(!D||!j)break;D.replaceChildren(...this._rowFactory.createRow(j,E,E===m,S,b,f,y,this.dimensions.css.cell.width,this._widthCache,c?M===n?e:0:-1,c?(M===a?i:o)-1:-1))}}};cd=lt([he(7,Nd),he(8,Ko),he(9,$t),he(10,Xt),he(11,Ar),he(12,ws),he(13,Tn)],cd);var ud=class extends Me{constructor(e,i,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new se),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new Px(this._optionsService))}catch{this._measureStrategy=this._register(new qx(e,i,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};ud=lt([he(2,$t)],ud);var p0=class extends Me{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,i){e!==void 0&&e>0&&i!==void 0&&i>0&&(this._result.width=e,this._result.height=i)}},qx=class extends p0{constructor(e,i,n){super(),this._document=e,this._parentElement=i,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},Px=class extends p0{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let i=this._ctx.measureText("W");if(!("width"in i&&"fontBoundingBoxAscent"in i&&"fontBoundingBoxDescent"in i))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},Yx=class extends Me{constructor(e,i,n){super(),this._textarea=e,this._window=i,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new Gx(this._window)),this._onDprChange=this._register(new se),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new se),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(a=>this._screenDprMonitor.setWindow(a))),this._register(qt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(be(this._textarea,"focus",()=>this._isFocused=!0)),this._register(be(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},Gx=class extends Me{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new kn),this._onDprChange=this._register(new se),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(Je(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=be(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},Wx=class extends Me{constructor(){super(),this.linkProviders=[],this._register(Je(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let i=this.linkProviders.indexOf(e);i!==-1&&this.linkProviders.splice(i,1)}}}};function qd(e,i,n){let a=n.getBoundingClientRect(),o=e.getComputedStyle(n),c=parseInt(o.getPropertyValue("padding-left")),d=parseInt(o.getPropertyValue("padding-top"));return[i.clientX-a.left-c,i.clientY-a.top-d]}function Kx(e,i,n,a,o,c,d,_,m){if(!c)return;let f=qd(e,i,n);if(f)return f[0]=Math.ceil((f[0]+(m?d/2:0))/d),f[1]=Math.ceil(f[1]/_),f[0]=Math.min(Math.max(f[0],1),a+(m?1:0)),f[1]=Math.min(Math.max(f[1],1),o),f}var dd=class{constructor(e,i){this._renderService=e,this._charSizeService=i}getCoords(e,i,n,a,o){return Kx(window,e,i,n,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(e,i){let n=qd(window,e,i);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};dd=lt([he(0,xs),he(1,Ko)],dd);var Ix=class{constructor(e,i){this._renderCallback=e,this._coreBrowserService=i,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,i,n){this._rowCount=n,e=e!==void 0?e:0,i=i!==void 0?i:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,i):i,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let e=Math.max(this._rowStart,0),i=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,i),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}},g0={};iw(g0,{getSafariVersion:()=>Vx,isChromeOS:()=>b0,isFirefox:()=>v0,isIpad:()=>Xx,isIphone:()=>$x,isLegacyEdge:()=>Fx,isLinux:()=>Pd,isMac:()=>jo,isNode:()=>Io,isSafari:()=>S0,isWindows:()=>y0});var Io=typeof process<"u"&&"title"in process,Qa=Io?"node":navigator.userAgent,Ja=Io?"node":navigator.platform,v0=Qa.includes("Firefox"),Fx=Qa.includes("Edge"),S0=/^((?!chrome|android).)*safari/i.test(Qa);function Vx(){if(!S0)return 0;let e=Qa.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var jo=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Ja),Xx=Ja==="iPad",$x=Ja==="iPhone",y0=["Windows","Win16","Win32","WinCE"].includes(Ja),Pd=Ja.indexOf("Linux")>=0,b0=/\bCrOS\b/.test(Qa),w0=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let i=0,n=0,a=e.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(i=performance.now(),this._tasks[this._i]()||this._i++,i=Math.max(1,performance.now()-i),n=Math.max(i,n),o=e.timeRemaining(),n*1.5>o){a-i<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-i))}ms`),this._start();return}a=o}this.clear()}},Zx=class extends w0{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let i=performance.now()+e;return{timeRemaining:()=>Math.max(0,i-performance.now())}}},Qx=class extends w0{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},Uo=!Io&&"requestIdleCallback"in window?Qx:Zx,Jx=class{constructor(){this._queue=new Uo}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},fd=class extends Me{constructor(e,i,n,a,o,c,d,_,m){super(),this._rowCount=e,this._optionsService=n,this._charSizeService=a,this._coreService=o,this._coreBrowserService=_,this._renderer=this._register(new kn),this._pausedResizeTask=new Jx,this._observerDisposable=this._register(new kn),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new se),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new se),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new se),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new se),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new Ix((f,y)=>this._renderRows(f,y),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new eC(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(Je(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(d.onResize(()=>this._fullRefresh())),this._register(d.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(c.onDecorationRegistered(()=>this._fullRefresh())),this._register(c.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(d.cols,d.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(d.buffer.y,d.buffer.y,!0))),this._register(m.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,i),this._register(this._coreBrowserService.onWindowChange(f=>this._registerIntersectionObserver(f,i)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,i){if("IntersectionObserver"in e){let n=new e.IntersectionObserver(a=>this._handleIntersectionChange(a[a.length-1]),{threshold:0});n.observe(i),this._observerDisposable.value=Je(()=>n.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,i,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,i);return}let a=this._syncOutputHandler.flush();a&&(e=Math.min(e,a.start),i=Math.max(i,a.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,i,this._rowCount)}_renderRows(e,i){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,i);return}e=Math.min(e,this._rowCount-1),i=Math.min(i,this._rowCount-1),this._renderer.value.renderRows(e,i),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:i}),this._onRender.fire({start:e,end:i}),this._isNextRenderRedrawOnly=!0}}resize(e,i){this._rowCount=i,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(i=>this.refreshRows(i.start,i.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,i){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(e,i)):this._renderer.value.handleResize(e,i),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,i,n){this._selectionState.start=e,this._selectionState.end=i,this._selectionState.columnSelectMode=n,this._renderer.value?.handleSelectionChanged(e,i,n)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};fd=lt([he(2,$t),he(3,Ko),he(4,Ar),he(5,Za),he(6,Xt),he(7,ws),he(8,Tn)],fd);var eC=class{constructor(e,i,n){this._coreBrowserService=e,this._coreService=i,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,i){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,i)):(this._start=e,this._end=i,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function tC(e,i,n,a){let o=n.buffer.x,c=n.buffer.y;if(!n.buffer.hasScrollback)return rC(o,c,e,i,n,a)+Fo(c,i,n,a)+nC(o,c,e,i,n,a);let d;if(c===i)return d=o>e?"D":"C",Ka(Math.abs(o-e),Wa(d,a));d=c>i?"D":"C";let _=Math.abs(c-i),m=sC(c>i?e:o,n)+(_-1)*n.cols+1+iC(c>i?o:e);return Ka(m,Wa(d,a))}function iC(e,i){return e-1}function sC(e,i){return i.cols-e}function rC(e,i,n,a,o,c){return Fo(i,a,o,c).length===0?"":Ka(C0(e,i,e,i-Tr(i,o),!1,o).length,Wa("D",c))}function Fo(e,i,n,a){let o=e-Tr(e,n),c=i-Tr(i,n),d=Math.abs(o-c)-aC(e,i,n);return Ka(d,Wa(x0(e,i),a))}function nC(e,i,n,a,o,c){let d;Fo(i,a,o,c).length>0?d=a-Tr(a,o):d=i;let _=a,m=lC(e,i,n,a,o,c);return Ka(C0(e,d,n,_,m==="C",o).length,Wa(m,c))}function aC(e,i,n){let a=0,o=e-Tr(e,n),c=i-Tr(i,n);for(let d=0;d<Math.abs(o-c);d++){let _=x0(e,i)==="A"?-1:1;n.buffer.lines.get(o+_*d)?.isWrapped&&a++}return a}function Tr(e,i){let n=0,a=i.buffer.lines.get(e),o=a?.isWrapped;for(;o&&e>=0&&e<i.rows;)n++,a=i.buffer.lines.get(--e),o=a?.isWrapped;return n}function lC(e,i,n,a,o,c){let d;return Fo(n,a,o,c).length>0?d=a-Tr(a,o):d=i,e<n&&d<=a||e>=n&&d<a?"C":"D"}function x0(e,i){return e>i?"A":"B"}function C0(e,i,n,a,o,c){let d=e,_=i,m="";for(;(d!==n||_!==a)&&_>=0&&_<c.buffer.lines.length;)d+=o?1:-1,o&&d>c.cols-1?(m+=c.buffer.translateBufferLineToString(_,!1,e,d),d=0,e=0,_++):!o&&d<0&&(m+=c.buffer.translateBufferLineToString(_,!1,0,e+1),d=c.cols-1,e=d,_--);return m+c.buffer.translateBufferLineToString(_,!1,e,d)}function Wa(e,i){let n=i?"O":"[";return V.ESC+n+e}function Ka(e,i){e=Math.floor(e);let n="";for(let a=0;a<e;a++)n+=i;return n}var oC=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,i=this.selectionEnd;return!e||!i?!1:e[1]>i[1]||e[1]===i[1]&&e[0]>i[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function Tg(e,i){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return i*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var Cu=50,hC=15,cC=50,uC=500,dC="",fC=new RegExp(dC,"g"),_d=class extends Me{constructor(e,i,n,a,o,c,d,_,m){super(),this._element=e,this._screenElement=i,this._linkifier=n,this._bufferService=a,this._coreService=o,this._mouseService=c,this._optionsService=d,this._renderService=_,this._coreBrowserService=m,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new Di,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new se),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new se),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new se),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new se),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=f=>this._handleMouseMove(f),this._mouseUpListener=f=>this._handleMouseUp(f),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(f=>this._handleTrim(f)),this._register(this._bufferService.buffers.onBufferActivate(f=>this._handleBufferActivate(f))),this.enable(),this._model=new oC(this._bufferService),this._activeSelectionMode=0,this._register(Je(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(f=>{f.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!e||!i?!1:e[0]!==i[0]||e[1]!==i[1]}get selectionText(){let e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;if(!e||!i)return"";let n=this._bufferService.buffer,a=[];if(this._activeSelectionMode===3){if(e[0]===i[0])return"";let o=e[0]<i[0]?e[0]:i[0],c=e[0]<i[0]?i[0]:e[0];for(let d=e[1];d<=i[1];d++){let _=n.translateBufferLineToString(d,!0,o,c);a.push(_)}}else{let o=e[1]===i[1]?i[0]:void 0;a.push(n.translateBufferLineToString(e[1],!0,e[0],o));for(let c=e[1]+1;c<=i[1]-1;c++){let d=n.lines.get(c),_=n.translateBufferLineToString(c,!0);d?.isWrapped?a[a.length-1]+=_:a.push(_)}if(e[1]!==i[1]){let c=n.lines.get(i[1]),d=n.translateBufferLineToString(i[1],!0,0,i[0]);c&&c.isWrapped?a[a.length-1]+=d:a.push(d)}}return a.map(o=>o.replace(fC," ")).join(y0?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),Pd&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let i=this._getMouseBufferCoords(e),n=this._model.finalSelectionStart,a=this._model.finalSelectionEnd;return!n||!a||!i?!1:this._areCoordsInSelection(i,n,a)}isCellInSelection(e,i){let n=this._model.finalSelectionStart,a=this._model.finalSelectionEnd;return!n||!a?!1:this._areCoordsInSelection([e,i],n,a)}_areCoordsInSelection(e,i,n){return e[1]>i[1]&&e[1]<n[1]||i[1]===n[1]&&e[1]===i[1]&&e[0]>=i[0]&&e[0]<n[0]||i[1]<n[1]&&e[1]===n[1]&&e[0]<n[0]||i[1]<n[1]&&e[1]===i[1]&&e[0]>=i[0]}_selectWordAtCursor(e,i){let n=this._linkifier.currentLink?.link?.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=Tg(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let a=this._getMouseBufferCoords(e);return a?(this._selectWordAt(a,i),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,i){this._model.clearSelection(),e=Math.max(e,0),i=Math.min(i,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,i],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let i=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(i)return i[0]--,i[1]--,i[1]+=this._bufferService.buffer.ydisp,i}_getMouseEventScrollAmount(e){let i=qd(this._coreBrowserService.window,e,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return i>=0&&i<=n?0:(i>n&&(i-=n),i=Math.min(Math.max(i,-Cu),Cu),i/=Cu,i/Math.abs(i)+Math.round(i*(hC-1)))}shouldForceSelection(e){return jo?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),cC)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let i=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);i&&i.length!==this._model.selectionStart[0]&&i.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let i=this._getMouseBufferCoords(e);i&&(this._activeSelectionMode=2,this._selectLineAt(i[1]))}shouldColumnSelect(e){return e.altKey&&!(jo&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let i=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let a=n.lines.get(this._model.selectionEnd[1]);a&&a.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!i||i[0]!==this._model.selectionEnd[0]||i[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let i=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&i<uC&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let a=tC(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(a,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd,n=!!e&&!!i&&(e[0]!==i[0]||e[1]!==i[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(e,i,n);return}!e||!i||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||i[0]!==this._oldSelectionEnd[0]||i[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,i,n)}_fireOnSelectionChange(e,i,n){this._oldSelectionStart=e,this._oldSelectionEnd=i,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(i=>this._handleTrim(i))}_convertViewportColToCharacterIndex(e,i){let n=i;for(let a=0;i>=a;a++){let o=e.loadCell(a,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:o>1&&i!==a&&(n+=o-1)}return n}setSelection(e,i,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,i],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,i,n=!0,a=!0){if(e[0]>=this._bufferService.cols)return;let o=this._bufferService.buffer,c=o.lines.get(e[1]);if(!c)return;let d=o.translateBufferLineToString(e[1],!1),_=this._convertViewportColToCharacterIndex(c,e[0]),m=_,f=e[0]-_,y=0,S=0,b=0,M=0;if(d.charAt(_)===" "){for(;_>0&&d.charAt(_-1)===" ";)_--;for(;m<d.length&&d.charAt(m+1)===" ";)m++}else{let j=e[0],z=e[0];c.getWidth(j)===0&&(y++,j--),c.getWidth(z)===2&&(S++,z++);let H=c.getString(z).length;for(H>1&&(M+=H-1,m+=H-1);j>0&&_>0&&!this._isCharWordSeparator(c.loadCell(j-1,this._workCell));){c.loadCell(j-1,this._workCell);let Z=this._workCell.getChars().length;this._workCell.getWidth()===0?(y++,j--):Z>1&&(b+=Z-1,_-=Z-1),_--,j--}for(;z<c.length&&m+1<d.length&&!this._isCharWordSeparator(c.loadCell(z+1,this._workCell));){c.loadCell(z+1,this._workCell);let Z=this._workCell.getChars().length;this._workCell.getWidth()===2?(S++,z++):Z>1&&(M+=Z-1,m+=Z-1),m++,z++}}m++;let E=_+f-y+b,D=Math.min(this._bufferService.cols,m-_+y+S-b-M);if(!(!i&&d.slice(_,m).trim()==="")){if(n&&E===0&&c.getCodePoint(0)!==32){let j=o.lines.get(e[1]-1);if(j&&c.isWrapped&&j.getCodePoint(this._bufferService.cols-1)!==32){let z=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(z){let H=this._bufferService.cols-z.start;E-=H,D+=H}}}if(a&&E+D===this._bufferService.cols&&c.getCodePoint(this._bufferService.cols-1)!==32){let j=o.lines.get(e[1]+1);if(j?.isWrapped&&j.getCodePoint(0)!==32){let z=this._getWordAt([0,e[1]+1],!1,!1,!0);z&&(D+=z.length)}}return{start:E,length:D}}}_selectWordAt(e,i){let n=this._getWordAt(e,i);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[n.start,e[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(e){let i=this._getWordAt(e,!0);if(i){let n=e[1];for(;i.start<0;)i.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;i.start+i.length>this._bufferService.cols;)i.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?i.start:i.start+i.length,n]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let i=this._bufferService.buffer.getWrappedRangeForLine(e),n={start:{x:0,y:i.first},end:{x:this._bufferService.cols-1,y:i.last}};this._model.selectionStart=[0,i.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=Tg(n,this._bufferService.cols)}};_d=lt([he(3,Xt),he(4,Ar),he(5,Bd),he(6,$t),he(7,xs),he(8,ws)],_d);var Dg=class{constructor(){this._data={}}set(e,i,n){this._data[e]||(this._data[e]={}),this._data[e][i]=n}get(e,i){return this._data[e]?this._data[e][i]:void 0}clear(){this._data={}}},Ag=class{constructor(){this._color=new Dg,this._css=new Dg}setCss(e,i,n){this._css.set(e,i,n)}getCss(e,i){return this._css.get(e,i)}setColor(e,i,n){this._color.set(e,i,n)}getColor(e,i){return this._color.get(e,i)}clear(){this._color.clear(),this._css.clear()}},xt=Object.freeze((()=>{let e=[tt.toColor("#2e3436"),tt.toColor("#cc0000"),tt.toColor("#4e9a06"),tt.toColor("#c4a000"),tt.toColor("#3465a4"),tt.toColor("#75507b"),tt.toColor("#06989a"),tt.toColor("#d3d7cf"),tt.toColor("#555753"),tt.toColor("#ef2929"),tt.toColor("#8ae234"),tt.toColor("#fce94f"),tt.toColor("#729fcf"),tt.toColor("#ad7fa8"),tt.toColor("#34e2e2"),tt.toColor("#eeeeec")],i=[0,95,135,175,215,255];for(let n=0;n<216;n++){let a=i[n/36%6|0],o=i[n/6%6|0],c=i[n%6];e.push({css:St.toCss(a,o,c),rgba:St.toRgba(a,o,c)})}for(let n=0;n<24;n++){let a=8+n*10;e.push({css:St.toCss(a,a,a),rgba:St.toRgba(a,a,a)})}return e})()),wr=tt.toColor("#ffffff"),Ha=tt.toColor("#000000"),Ng=tt.toColor("#ffffff"),Bg=Ha,Aa={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},_C=wr,md=class extends Me{constructor(e){super(),this._optionsService=e,this._contrastCache=new Ag,this._halfContrastCache=new Ag,this._onChangeColors=this._register(new se),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:wr,background:Ha,cursor:Ng,cursorAccent:Bg,selectionForeground:void 0,selectionBackgroundTransparent:Aa,selectionBackgroundOpaque:Ze.blend(Ha,Aa),selectionInactiveBackgroundTransparent:Aa,selectionInactiveBackgroundOpaque:Ze.blend(Ha,Aa),scrollbarSliderBackground:Ze.opacity(wr,.2),scrollbarSliderHoverBackground:Ze.opacity(wr,.4),scrollbarSliderActiveBackground:Ze.opacity(wr,.5),overviewRulerBorder:wr,ansi:xt.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let i=this._colors;if(i.foreground=Ie(e.foreground,wr),i.background=Ie(e.background,Ha),i.cursor=Ze.blend(i.background,Ie(e.cursor,Ng)),i.cursorAccent=Ze.blend(i.background,Ie(e.cursorAccent,Bg)),i.selectionBackgroundTransparent=Ie(e.selectionBackground,Aa),i.selectionBackgroundOpaque=Ze.blend(i.background,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundTransparent=Ie(e.selectionInactiveBackground,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundOpaque=Ze.blend(i.background,i.selectionInactiveBackgroundTransparent),i.selectionForeground=e.selectionForeground?Ie(e.selectionForeground,kg):void 0,i.selectionForeground===kg&&(i.selectionForeground=void 0),Ze.isOpaque(i.selectionBackgroundTransparent)&&(i.selectionBackgroundTransparent=Ze.opacity(i.selectionBackgroundTransparent,.3)),Ze.isOpaque(i.selectionInactiveBackgroundTransparent)&&(i.selectionInactiveBackgroundTransparent=Ze.opacity(i.selectionInactiveBackgroundTransparent,.3)),i.scrollbarSliderBackground=Ie(e.scrollbarSliderBackground,Ze.opacity(i.foreground,.2)),i.scrollbarSliderHoverBackground=Ie(e.scrollbarSliderHoverBackground,Ze.opacity(i.foreground,.4)),i.scrollbarSliderActiveBackground=Ie(e.scrollbarSliderActiveBackground,Ze.opacity(i.foreground,.5)),i.overviewRulerBorder=Ie(e.overviewRulerBorder,_C),i.ansi=xt.slice(),i.ansi[0]=Ie(e.black,xt[0]),i.ansi[1]=Ie(e.red,xt[1]),i.ansi[2]=Ie(e.green,xt[2]),i.ansi[3]=Ie(e.yellow,xt[3]),i.ansi[4]=Ie(e.blue,xt[4]),i.ansi[5]=Ie(e.magenta,xt[5]),i.ansi[6]=Ie(e.cyan,xt[6]),i.ansi[7]=Ie(e.white,xt[7]),i.ansi[8]=Ie(e.brightBlack,xt[8]),i.ansi[9]=Ie(e.brightRed,xt[9]),i.ansi[10]=Ie(e.brightGreen,xt[10]),i.ansi[11]=Ie(e.brightYellow,xt[11]),i.ansi[12]=Ie(e.brightBlue,xt[12]),i.ansi[13]=Ie(e.brightMagenta,xt[13]),i.ansi[14]=Ie(e.brightCyan,xt[14]),i.ansi[15]=Ie(e.brightWhite,xt[15]),e.extendedAnsi){let n=Math.min(i.ansi.length-16,e.extendedAnsi.length);for(let a=0;a<n;a++)i.ansi[a+16]=Ie(e.extendedAnsi[a],xt[a+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let i=0;i<this._restoreColors.ansi.length;++i)this._colors.ansi[i]=this._restoreColors.ansi[i];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};md=lt([he(0,$t)],md);function Ie(e,i){if(e!==void 0)try{return tt.toColor(e)}catch{}return i}var mC=class{constructor(...e){this._entries=new Map;for(let[i,n]of e)this.set(i,n)}set(e,i){let n=this._entries.get(e);return this._entries.set(e,i),n}forEach(e){for(let[i,n]of this._entries.entries())e(i,n)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},pC=class{constructor(){this._services=new mC,this._services.set(Nd,this)}setService(e,i){this._services.set(e,i)}getService(e){return this._services.get(e)}createInstance(e,...i){let n=hw(e).sort((c,d)=>c.index-d.index),a=[];for(let c of n){let d=this._services.get(c.id);if(!d)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id._id}.`);a.push(d)}let o=n.length>0?n[0].index:i.length;if(i.length!==o)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${i.length} static arguments`);return new e(...i,...a)}},gC={trace:0,debug:1,info:2,warn:3,error:4,off:5},vC="xterm.js: ",pd=class extends Me{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=gC[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let i=0;i<e.length;i++)typeof e[i]=="function"&&(e[i]=e[i]())}_log(e,i,n){this._evalLazyOptionalParams(n),e.call(console,(this._optionsService.options.logger?"":vC)+i,...n)}trace(e,...i){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,e,i)}debug(e,...i){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,e,i)}info(e,...i){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,e,i)}warn(e,...i){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,e,i)}error(e,...i){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,e,i)}};pd=lt([he(0,$t)],pd);var Lg=class extends Me{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new se),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new se),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new se),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let i=new Array(e);for(let n=0;n<Math.min(e,this.length);n++)i[n]=this._array[this._getCyclicIndex(n)];this._array=i,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let i=this._length;i<e;i++)this._array[i]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,i){this._array[this._getCyclicIndex(e)]=i}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,i,...n){if(i){for(let a=e;a<this._length-i;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+i)];this._length-=i,this.onDeleteEmitter.fire({index:e,amount:i})}for(let a=this._length-1;a>=e;a--)this._array[this._getCyclicIndex(a+n.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<n.length;a++)this._array[this._getCyclicIndex(e+a)]=n[a];if(n.length&&this.onInsertEmitter.fire({index:e,amount:n.length}),this._length+n.length>this._maxLength){let a=this._length+n.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=n.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,i,n){if(!(i<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let o=i-1;o>=0;o--)this.set(e+o+n,this.get(e+o));let a=e+i+n-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<i;a++)this.set(e+a+n,this.get(e+a))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},Re=3,vt=Object.freeze(new $a),wo=0,Eu=2,ja=class E0{constructor(i,n,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(i*Re);let o=n||Di.fromCharData([0,Wv,1,0]);for(let c=0;c<i;++c)this.setCell(c,o);this.length=i}get(i){let n=this._data[i*Re+0],a=n&2097151;return[this._data[i*Re+1],n&2097152?this._combined[i]:a?Js(a):"",n>>22,n&2097152?this._combined[i].charCodeAt(this._combined[i].length-1):a]}set(i,n){this._data[i*Re+1]=n[0],n[1].length>1?(this._combined[i]=n[1],this._data[i*Re+0]=i|2097152|n[2]<<22):this._data[i*Re+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(i){return this._data[i*Re+0]>>22}hasWidth(i){return this._data[i*Re+0]&12582912}getFg(i){return this._data[i*Re+1]}getBg(i){return this._data[i*Re+2]}hasContent(i){return this._data[i*Re+0]&4194303}getCodePoint(i){let n=this._data[i*Re+0];return n&2097152?this._combined[i].charCodeAt(this._combined[i].length-1):n&2097151}isCombined(i){return this._data[i*Re+0]&2097152}getString(i){let n=this._data[i*Re+0];return n&2097152?this._combined[i]:n&2097151?Js(n&2097151):""}isProtected(i){return this._data[i*Re+2]&536870912}loadCell(i,n){return wo=i*Re,n.content=this._data[wo+0],n.fg=this._data[wo+1],n.bg=this._data[wo+2],n.content&2097152&&(n.combinedData=this._combined[i]),n.bg&268435456&&(n.extended=this._extendedAttrs[i]),n}setCell(i,n){n.content&2097152&&(this._combined[i]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[i]=n.extended),this._data[i*Re+0]=n.content,this._data[i*Re+1]=n.fg,this._data[i*Re+2]=n.bg}setCellFromCodepoint(i,n,a,o){o.bg&268435456&&(this._extendedAttrs[i]=o.extended),this._data[i*Re+0]=n|a<<22,this._data[i*Re+1]=o.fg,this._data[i*Re+2]=o.bg}addCodepointToCell(i,n,a){let o=this._data[i*Re+0];o&2097152?this._combined[i]+=Js(n):o&2097151?(this._combined[i]=Js(o&2097151)+Js(n),o&=-2097152,o|=2097152):o=n|1<<22,a&&(o&=-12582913,o|=a<<22),this._data[i*Re+0]=o}insertCells(i,n,a){if(i%=this.length,i&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i-1,0,1,a),n<this.length-i){let o=new Di;for(let c=this.length-i-n-1;c>=0;--c)this.setCell(i+n+c,this.loadCell(i+c,o));for(let c=0;c<n;++c)this.setCell(i+c,a)}else for(let o=i;o<this.length;++o)this.setCell(o,a);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,a)}deleteCells(i,n,a){if(i%=this.length,n<this.length-i){let o=new Di;for(let c=0;c<this.length-i-n;++c)this.setCell(i+c,this.loadCell(i+n+c,o));for(let c=this.length-n;c<this.length;++c)this.setCell(c,a)}else for(let o=i;o<this.length;++o)this.setCell(o,a);i&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i-1,0,1,a),this.getWidth(i)===0&&!this.hasContent(i)&&this.setCellFromCodepoint(i,0,1,a)}replaceCells(i,n,a,o=!1){if(o){for(i&&this.getWidth(i-1)===2&&!this.isProtected(i-1)&&this.setCellFromCodepoint(i-1,0,1,a),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,a);i<n&&i<this.length;)this.isProtected(i)||this.setCell(i,a),i++;return}for(i&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i-1,0,1,a),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,a);i<n&&i<this.length;)this.setCell(i++,a)}resize(i,n){if(i===this.length)return this._data.length*4*Eu<this._data.buffer.byteLength;let a=i*Re;if(i>this.length){if(this._data.buffer.byteLength>=a*4)this._data=new Uint32Array(this._data.buffer,0,a);else{let o=new Uint32Array(a);o.set(this._data),this._data=o}for(let o=this.length;o<i;++o)this.setCell(o,n)}else{this._data=this._data.subarray(0,a);let o=Object.keys(this._combined);for(let d=0;d<o.length;d++){let _=parseInt(o[d],10);_>=i&&delete this._combined[_]}let c=Object.keys(this._extendedAttrs);for(let d=0;d<c.length;d++){let _=parseInt(c[d],10);_>=i&&delete this._extendedAttrs[_]}}return this.length=i,a*4*Eu<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*Eu<this._data.buffer.byteLength){let i=new Uint32Array(this._data.length);return i.set(this._data),this._data=i,1}return 0}fill(i,n=!1){if(n){for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,i);return}this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,i)}copyFrom(i){this.length!==i.length?this._data=new Uint32Array(i._data):this._data.set(i._data),this.length=i.length,this._combined={};for(let n in i._combined)this._combined[n]=i._combined[n];this._extendedAttrs={};for(let n in i._extendedAttrs)this._extendedAttrs[n]=i._extendedAttrs[n];this.isWrapped=i.isWrapped}clone(){let i=new E0(0);i._data=new Uint32Array(this._data),i.length=this.length;for(let n in this._combined)i._combined[n]=this._combined[n];for(let n in this._extendedAttrs)i._extendedAttrs[n]=this._extendedAttrs[n];return i.isWrapped=this.isWrapped,i}getTrimmedLength(){for(let i=this.length-1;i>=0;--i)if(this._data[i*Re+0]&4194303)return i+(this._data[i*Re+0]>>22);return 0}getNoBgTrimmedLength(){for(let i=this.length-1;i>=0;--i)if(this._data[i*Re+0]&4194303||this._data[i*Re+2]&50331648)return i+(this._data[i*Re+0]>>22);return 0}copyCellsFrom(i,n,a,o,c){let d=i._data;if(c)for(let m=o-1;m>=0;m--){for(let f=0;f<Re;f++)this._data[(a+m)*Re+f]=d[(n+m)*Re+f];d[(n+m)*Re+2]&268435456&&(this._extendedAttrs[a+m]=i._extendedAttrs[n+m])}else for(let m=0;m<o;m++){for(let f=0;f<Re;f++)this._data[(a+m)*Re+f]=d[(n+m)*Re+f];d[(n+m)*Re+2]&268435456&&(this._extendedAttrs[a+m]=i._extendedAttrs[n+m])}let _=Object.keys(i._combined);for(let m=0;m<_.length;m++){let f=parseInt(_[m],10);f>=n&&(this._combined[f-n+a]=i._combined[f])}}translateToString(i,n,a,o){n=n??0,a=a??this.length,i&&(a=Math.min(a,this.getTrimmedLength())),o&&(o.length=0);let c="";for(;n<a;){let d=this._data[n*Re+0],_=d&2097151,m=d&2097152?this._combined[n]:_?Js(_):er;if(c+=m,o)for(let f=0;f<m.length;++f)o.push(n);n+=d>>22||1}return o&&o.push(n),c}};function SC(e,i,n,a,o,c){let d=[];for(let _=0;_<e.length-1;_++){let m=_,f=e.get(++m);if(!f.isWrapped)continue;let y=[e.get(_)];for(;m<e.length&&f.isWrapped;)y.push(f),f=e.get(++m);if(!c&&a>=_&&a<m){_+=y.length-1;continue}let S=0,b=Ia(y,S,i),M=1,E=0;for(;M<y.length;){let j=Ia(y,M,i),z=j-E,H=n-b,Z=Math.min(z,H);y[S].copyCellsFrom(y[M],E,b,Z,!1),b+=Z,b===n&&(S++,b=0),E+=Z,E===j&&(M++,E=0),b===0&&S!==0&&y[S-1].getWidth(n-1)===2&&(y[S].copyCellsFrom(y[S-1],n-1,b++,1,!1),y[S-1].setCell(n-1,o))}y[S].replaceCells(b,n,o);let D=0;for(let j=y.length-1;j>0&&(j>S||y[j].getTrimmedLength()===0);j--)D++;D>0&&(d.push(_+y.length-D),d.push(D)),_+=y.length-1}return d}function yC(e,i){let n=[],a=0,o=i[a],c=0;for(let d=0;d<e.length;d++)if(o===d){let _=i[++a];e.onDeleteEmitter.fire({index:d-c,amount:_}),d+=_-1,c+=_,o=i[++a]}else n.push(d);return{layout:n,countRemoved:c}}function bC(e,i){let n=[];for(let a=0;a<i.length;a++)n.push(e.get(i[a]));for(let a=0;a<n.length;a++)e.set(a,n[a]);e.length=i.length}function wC(e,i,n){let a=[],o=e.map((m,f)=>Ia(e,f,i)).reduce((m,f)=>m+f),c=0,d=0,_=0;for(;_<o;){if(o-_<n){a.push(o-_);break}c+=n;let m=Ia(e,d,i);c>m&&(c-=m,d++);let f=e[d].getWidth(c-1)===2;f&&c--;let y=f?n-1:n;a.push(y),_+=y}return a}function Ia(e,i,n){if(i===e.length-1)return e[i].getTrimmedLength();let a=!e[i].hasContent(n-1)&&e[i].getWidth(n-1)===1,o=e[i+1].getWidth(0)===2;return a&&o?n-1:n}var k0=class R0{constructor(i){this.line=i,this.isDisposed=!1,this._disposables=[],this._id=R0._nextId++,this._onDispose=this.register(new se),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Mr(this._disposables),this._disposables.length=0)}register(i){return this._disposables.push(i),i}};k0._nextId=1;var xC=k0,kt={},xr=kt.B;kt[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};kt.A={"#":""};kt.B=void 0;kt[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};kt.C=kt[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};kt.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};kt.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};kt.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};kt.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};kt.E=kt[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};kt.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};kt.H=kt[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};kt["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var Og=4294967295,zg=class{constructor(e,i,n){this._hasScrollback=e,this._optionsService=i,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=vt.clone(),this.savedCharset=xr,this.markers=[],this._nullCell=Di.fromCharData([0,Wv,1,0]),this._whitespaceCell=Di.fromCharData([0,er,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new Uo,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new Lg(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new Oo),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new Oo),this._whitespaceCell}getBlankLine(e,i){return new ja(this._bufferService.cols,this.getNullCell(e),i)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let i=e+this._optionsService.rawOptions.scrollback;return i>Og?Og:i}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=vt);let i=this._rows;for(;i--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new Lg(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,i){let n=this.getNullCell(vt),a=0,o=this._getCorrectBufferLength(i);if(o>this.lines.maxLength&&(this.lines.maxLength=o),this.lines.length>0){if(this._cols<e)for(let d=0;d<this.lines.length;d++)a+=+this.lines.get(d).resize(e,n);let c=0;if(this._rows<i)for(let d=this._rows;d<i;d++)this.lines.length<i+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new ja(e,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+c+1?(this.ybase--,c++,this.ydisp>0&&this.ydisp--):this.lines.push(new ja(e,n)));else for(let d=this._rows;d>i;d--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){let d=this.lines.length-o;d>0&&(this.lines.trimStart(d),this.ybase=Math.max(this.ybase-d,0),this.ydisp=Math.max(this.ydisp-d,0),this.savedY=Math.max(this.savedY-d,0)),this.lines.maxLength=o}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,i-1),c&&(this.y+=c),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(e,i),this._cols>e))for(let c=0;c<this.lines.length;c++)a+=+this.lines.get(c).resize(e,n);this._cols=e,this._rows=i,this._memoryCleanupQueue.clear(),a>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let i=0;for(;this._memoryCleanupPosition<this.lines.length;)if(i+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),i>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,i){this._cols!==e&&(e>this._cols?this._reflowLarger(e,i):this._reflowSmaller(e,i))}_reflowLarger(e,i){let n=this._optionsService.rawOptions.reflowCursorLine,a=SC(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(vt),n);if(a.length>0){let o=yC(this.lines,a);bC(this.lines,o.layout),this._reflowLargerAdjustViewport(e,i,o.countRemoved)}}_reflowLargerAdjustViewport(e,i,n){let a=this.getNullCell(vt),o=n;for(;o-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new ja(e,a))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(e,i){let n=this._optionsService.rawOptions.reflowCursorLine,a=this.getNullCell(vt),o=[],c=0;for(let d=this.lines.length-1;d>=0;d--){let _=this.lines.get(d);if(!_||!_.isWrapped&&_.getTrimmedLength()<=e)continue;let m=[_];for(;_.isWrapped&&d>0;)_=this.lines.get(--d),m.unshift(_);if(!n){let Z=this.ybase+this.y;if(Z>=d&&Z<d+m.length)continue}let f=m[m.length-1].getTrimmedLength(),y=wC(m,this._cols,e),S=y.length-m.length,b;this.ybase===0&&this.y!==this.lines.length-1?b=Math.max(0,this.y-this.lines.maxLength+S):b=Math.max(0,this.lines.length-this.lines.maxLength+S);let M=[];for(let Z=0;Z<S;Z++){let J=this.getBlankLine(vt,!0);M.push(J)}M.length>0&&(o.push({start:d+m.length+c,newLines:M}),c+=M.length),m.push(...M);let E=y.length-1,D=y[E];D===0&&(E--,D=y[E]);let j=m.length-S-1,z=f;for(;j>=0;){let Z=Math.min(z,D);if(m[E]===void 0)break;if(m[E].copyCellsFrom(m[j],z-Z,D-Z,Z,!0),D-=Z,D===0&&(E--,D=y[E]),z-=Z,z===0){j--;let J=Math.max(j,0);z=Ia(m,J,this._cols)}}for(let Z=0;Z<m.length;Z++)y[Z]<e&&m[Z].setCell(y[Z],a);let H=S-b;for(;H-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+c)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+S,this.ybase+i-1)}if(o.length>0){let d=[],_=[];for(let D=0;D<this.lines.length;D++)_.push(this.lines.get(D));let m=this.lines.length,f=m-1,y=0,S=o[y];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+c);let b=0;for(let D=Math.min(this.lines.maxLength-1,m+c-1);D>=0;D--)if(S&&S.start>f+b){for(let j=S.newLines.length-1;j>=0;j--)this.lines.set(D--,S.newLines[j]);D++,d.push({index:f+1,amount:S.newLines.length}),b+=S.newLines.length,S=o[++y]}else this.lines.set(D,_[f--]);let M=0;for(let D=d.length-1;D>=0;D--)d[D].index+=M,this.lines.onInsertEmitter.fire(d[D]),M+=d[D].amount;let E=Math.max(0,m+c-this.lines.maxLength);E>0&&this.lines.onTrimEmitter.fire(E)}}translateBufferLineToString(e,i,n=0,a){let o=this.lines.get(e);return o?o.translateToString(i,n,a):""}getWrappedRangeForLine(e){let i=e,n=e;for(;i>0&&this.lines.get(i).isWrapped;)i--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:i,last:n}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].line===e&&(this.markers[i].dispose(),this.markers.splice(i--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let i=new xC(e);return this.markers.push(i),i.register(this.lines.onTrim(n=>{i.line-=n,i.line<0&&i.dispose()})),i.register(this.lines.onInsert(n=>{i.line>=n.index&&(i.line+=n.amount)})),i.register(this.lines.onDelete(n=>{i.line>=n.index&&i.line<n.index+n.amount&&i.dispose(),i.line>n.index&&(i.line-=n.amount)})),i.register(i.onDispose(()=>this._removeMarker(i))),i}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},CC=class extends Me{constructor(e,i){super(),this._optionsService=e,this._bufferService=i,this._onBufferActivate=this._register(new se),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new zg(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new zg(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,i){this._normal.resize(e,i),this._alt.resize(e,i),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},M0=2,T0=1,gd=class extends Me{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new se),this.onResize=this._onResize.event,this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,M0),this.rows=Math.max(e.rawOptions.rows||0,T0),this.buffers=this._register(new CC(e,this)),this._register(this.buffers.onBufferActivate(i=>{this._onScroll.fire(i.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,i){let n=this.cols!==e,a=this.rows!==i;this.cols=e,this.rows=i,this.buffers.resize(e,i),this._onResize.fire({cols:e,rows:i,colsChanged:n,rowsChanged:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,i=!1){let n=this.buffer,a;a=this._cachedBlankLine,(!a||a.length!==this.cols||a.getFg(0)!==e.fg||a.getBg(0)!==e.bg)&&(a=n.getBlankLine(e,i),this._cachedBlankLine=a),a.isWrapped=i;let o=n.ybase+n.scrollTop,c=n.ybase+n.scrollBottom;if(n.scrollTop===0){let d=n.lines.isFull;c===n.lines.length-1?d?n.lines.recycle().copyFrom(a):n.lines.push(a.clone()):n.lines.splice(c+1,0,a.clone()),d?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let d=c-o+1;n.lines.shiftElements(o+1,d-1,-1),n.lines.set(c,a.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(e,i){let n=this.buffer;if(e<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let a=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),a!==n.ydisp&&(i||this._onScroll.fire(n.ydisp))}};gd=lt([he(0,$t)],gd);var wn={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:jo,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},EC=["normal","bold","100","200","300","400","500","600","700","800","900"],kC=class extends Me{constructor(e){super(),this._onOptionChange=this._register(new se),this.onOptionChange=this._onOptionChange.event;let i={...wn};for(let n in e)if(n in i)try{let a=e[n];i[n]=this._sanitizeAndValidateOption(n,a)}catch(a){console.error(a)}this.rawOptions=i,this.options={...i},this._setupOptions(),this._register(Je(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,i){return this.onOptionChange(n=>{n===e&&i(this.rawOptions[e])})}onMultipleOptionChange(e,i){return this.onOptionChange(n=>{e.indexOf(n)!==-1&&i()})}_setupOptions(){let e=n=>{if(!(n in wn))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},i=(n,a)=>{if(!(n in wn))throw new Error(`No option with key "${n}"`);a=this._sanitizeAndValidateOption(n,a),this.rawOptions[n]!==a&&(this.rawOptions[n]=a,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let a={get:e.bind(this,n),set:i.bind(this,n)};Object.defineProperty(this.options,n,a)}}_sanitizeAndValidateOption(e,i){switch(e){case"cursorStyle":if(i||(i=wn[e]),!RC(i))throw new Error(`"${i}" is not a valid value for ${e}`);break;case"wordSeparator":i||(i=wn[e]);break;case"fontWeight":case"fontWeightBold":if(typeof i=="number"&&1<=i&&i<=1e3)break;i=EC.includes(i)?i:wn[e];break;case"cursorWidth":i=Math.floor(i);case"lineHeight":case"tabStopWidth":if(i<1)throw new Error(`${e} cannot be less than 1, value: ${i}`);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(i*10)/10));break;case"scrollback":if(i=Math.min(i,4294967295),i<0)throw new Error(`${e} cannot be less than 0, value: ${i}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(i<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);break;case"rows":case"cols":if(!i&&i!==0)throw new Error(`${e} must be numeric, value: ${i}`);break;case"windowsPty":i=i??{};break}return i}};function RC(e){return e==="block"||e==="underline"||e==="bar"}function Ua(e,i=5){if(typeof e!="object")return e;let n=Array.isArray(e)?[]:{};for(let a in e)n[a]=i<=1?e[a]:e[a]&&Ua(e[a],i-1);return n}var Hg=Object.freeze({insertMode:!1}),jg=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),vd=class extends Me{constructor(e,i,n){super(),this._bufferService=e,this._logService=i,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new se),this.onData=this._onData.event,this._onUserInput=this._register(new se),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new se),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new se),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Ua(Hg),this.decPrivateModes=Ua(jg)}reset(){this.modes=Ua(Hg),this.decPrivateModes=Ua(jg)}triggerDataEvent(e,i=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;i&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),i&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(a=>a.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(i=>i.charCodeAt(0))),this._onBinary.fire(e))}};vd=lt([he(0,Xt),he(1,Xv),he(2,$t)],vd);var Ug={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function ku(e,i){let n=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(n|=64,n|=e.action):(n|=e.button&3,e.button&4&&(n|=64),e.button&8&&(n|=128),e.action===32?n|=32:e.action===0&&!i&&(n|=3)),n}var Ru=String.fromCharCode,qg={DEFAULT:e=>{let i=[ku(e,!1)+32,e.col+32,e.row+32];return i[0]>255||i[1]>255||i[2]>255?"":`\x1B[M${Ru(i[0])}${Ru(i[1])}${Ru(i[2])}`},SGR:e=>{let i=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${ku(e,!0)};${e.col};${e.row}${i}`},SGR_PIXELS:e=>{let i=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${ku(e,!0)};${e.x};${e.y}${i}`}},Sd=class extends Me{constructor(e,i,n){super(),this._bufferService=e,this._coreService=i,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new se),this.onProtocolChange=this._onProtocolChange.event;for(let a of Object.keys(Ug))this.addProtocol(a,Ug[a]);for(let a of Object.keys(qg))this.addEncoding(a,qg[a]);this.reset()}addProtocol(e,i){this._protocols[e]=i}addEncoding(e,i){this._encodings[e]=i}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,i,n){if(e.deltaY===0||e.shiftKey||i===void 0||n===void 0)return 0;let a=i/n,o=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=a+0,Math.abs(e.deltaY)<50&&(o*=.3),this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(e,i){return i.altKey||i.ctrlKey||i.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let i=this._encodings[this._activeEncoding](e);return i&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(i):this._coreService.triggerDataEvent(i,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,i,n){if(n){if(e.x!==i.x||e.y!==i.y)return!1}else if(e.col!==i.col||e.row!==i.row)return!1;return!(e.button!==i.button||e.action!==i.action||e.ctrl!==i.ctrl||e.alt!==i.alt||e.shift!==i.shift)}};Sd=lt([he(0,Xt),he(1,Ar),he(2,$t)],Sd);var Mu=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],MC=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],Ct;function TC(e,i){let n=0,a=i.length-1,o;if(e<i[0][0]||e>i[a][1])return!1;for(;a>=n;)if(o=n+a>>1,e>i[o][1])n=o+1;else if(e<i[o][0])a=o-1;else return!0;return!1}var DC=class{constructor(){if(this.version="6",!Ct){Ct=new Uint8Array(65536),Ct.fill(1),Ct[0]=0,Ct.fill(0,1,32),Ct.fill(0,127,160),Ct.fill(2,4352,4448),Ct[9001]=2,Ct[9002]=2,Ct.fill(2,11904,42192),Ct[12351]=1,Ct.fill(2,44032,55204),Ct.fill(2,63744,64256),Ct.fill(2,65040,65050),Ct.fill(2,65072,65136),Ct.fill(2,65280,65377),Ct.fill(2,65504,65511);for(let e=0;e<Mu.length;++e)Ct.fill(0,Mu[e][0],Mu[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?Ct[e]:TC(e,MC)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,i){let n=this.wcwidth(e),a=n===0&&i!==0;if(a){let o=Er.extractWidth(i);o===0?a=!1:o>n&&(n=o)}return Er.createPropertyValue(0,n,a)}},Er=class Do{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new se,this.onChange=this._onChange.event;let i=new DC;this.register(i),this._active=i.version,this._activeProvider=i}static extractShouldJoin(i){return(i&1)!==0}static extractWidth(i){return i>>1&3}static extractCharKind(i){return i>>3}static createPropertyValue(i,n,a=!1){return(i&16777215)<<3|(n&3)<<1|(a?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(i){if(!this._providers[i])throw new Error(`unknown Unicode version "${i}"`);this._active=i,this._activeProvider=this._providers[i],this._onChange.fire(i)}register(i){this._providers[i.version]=i}wcwidth(i){return this._activeProvider.wcwidth(i)}getStringCellWidth(i){let n=0,a=0,o=i.length;for(let c=0;c<o;++c){let d=i.charCodeAt(c);if(55296<=d&&d<=56319){if(++c>=o)return n+this.wcwidth(d);let f=i.charCodeAt(c);56320<=f&&f<=57343?d=(d-55296)*1024+f-56320+65536:n+=this.wcwidth(f)}let _=this.charProperties(d,a),m=Do.extractWidth(_);Do.extractShouldJoin(_)&&(m-=Do.extractWidth(a)),n+=m,a=_}return n}charProperties(i,n){return this._activeProvider.charProperties(i,n)}},AC=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,i){this._charsets[e]=i,this.glevel===e&&(this.charset=i)}};function Pg(e){let i=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1)?.get(e.cols-1),n=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);n&&i&&(n.isWrapped=i[3]!==0&&i[3]!==32)}var Na=2147483647,NC=256,D0=class yd{constructor(i=32,n=32){if(this.maxLength=i,this.maxSubParamsLength=n,n>NC)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(i),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(i),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(i){let n=new yd;if(!i.length)return n;for(let a=Array.isArray(i[0])?1:0;a<i.length;++a){let o=i[a];if(Array.isArray(o))for(let c=0;c<o.length;++c)n.addSubParam(o[c]);else n.addParam(o)}return n}clone(){let i=new yd(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i._subParams.set(this._subParams),i._subParamsLength=this._subParamsLength,i._subParamsIdx.set(this._subParamsIdx),i._rejectDigits=this._rejectDigits,i._rejectSubDigits=this._rejectSubDigits,i._digitIsSub=this._digitIsSub,i}toArray(){let i=[];for(let n=0;n<this.length;++n){i.push(this.params[n]);let a=this._subParamsIdx[n]>>8,o=this._subParamsIdx[n]&255;o-a>0&&i.push(Array.prototype.slice.call(this._subParams,a,o))}return i}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(i){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=i>Na?Na:i}addSubParam(i){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=i>Na?Na:i,this._subParamsIdx[this.length-1]++}}hasSubParams(i){return(this._subParamsIdx[i]&255)-(this._subParamsIdx[i]>>8)>0}getSubParams(i){let n=this._subParamsIdx[i]>>8,a=this._subParamsIdx[i]&255;return a-n>0?this._subParams.subarray(n,a):null}getSubParamsAll(){let i={};for(let n=0;n<this.length;++n){let a=this._subParamsIdx[n]>>8,o=this._subParamsIdx[n]&255;o-a>0&&(i[n]=this._subParams.slice(a,o))}return i}addDigit(i){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let a=this._digitIsSub?this._subParams:this.params,o=a[n-1];a[n-1]=~o?Math.min(o*10+i,Na):i}},Ba=[],BC=class{constructor(){this._state=0,this._active=Ba,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,i){this._handlers[e]===void 0&&(this._handlers[e]=[]);let n=this._handlers[e];return n.push(i),{dispose:()=>{let a=n.indexOf(i);a!==-1&&n.splice(a,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Ba}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=Ba,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Ba,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,i,n){if(!this._active.length)this._handlerFb(this._id,"PUT",Wo(e,i,n));else for(let a=this._active.length-1;a>=0;a--)this._active[a].put(e,i,n)}start(){this.reset(),this._state=1}put(e,i,n){if(this._state!==3){if(this._state===1)for(;i<n;){let a=e[i++];if(a===59){this._state=2,this._start();break}if(a<48||57<a){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+a-48}this._state===2&&n-i>0&&this._put(e,i,n)}}end(e,i=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let n=!1,a=this._active.length-1,o=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,n=i,o=this._stack.fallThrough,this._stack.paused=!1),!o&&n===!1){for(;a>=0&&(n=this._active[a].end(e),n!==!0);a--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,n;a--}for(;a>=0;a--)if(n=this._active[a].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,n}this._active=Ba,this._id=-1,this._state=0}}},fi=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,i,n){this._hitLimit||(this._data+=Wo(e,i,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let i=!1;if(this._hitLimit)i=!1;else if(e&&(i=this._handler(this._data),i instanceof Promise))return i.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,i}},La=[],LC=class{constructor(){this._handlers=Object.create(null),this._active=La,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=La}registerHandler(e,i){this._handlers[e]===void 0&&(this._handlers[e]=[]);let n=this._handlers[e];return n.push(i),{dispose:()=>{let a=n.indexOf(i);a!==-1&&n.splice(a,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=La,this._ident=0}hook(e,i){if(this.reset(),this._ident=e,this._active=this._handlers[e]||La,!this._active.length)this._handlerFb(this._ident,"HOOK",i);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(i)}put(e,i,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",Wo(e,i,n));else for(let a=this._active.length-1;a>=0;a--)this._active[a].put(e,i,n)}unhook(e,i=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let n=!1,a=this._active.length-1,o=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,n=i,o=this._stack.fallThrough,this._stack.paused=!1),!o&&n===!1){for(;a>=0&&(n=this._active[a].unhook(e),n!==!0);a--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,n;a--}for(;a>=0;a--)if(n=this._active[a].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,n}this._active=La,this._ident=0}},qa=new D0;qa.addParam(0);var Yg=class{constructor(e){this._handler=e,this._data="",this._params=qa,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():qa,this._data="",this._hitLimit=!1}put(e,i,n){this._hitLimit||(this._data+=Wo(e,i,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let i=!1;if(this._hitLimit)i=!1;else if(e&&(i=this._handler(this._data,this._params),i instanceof Promise))return i.then(n=>(this._params=qa,this._data="",this._hitLimit=!1,n));return this._params=qa,this._data="",this._hitLimit=!1,i}},OC=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,i){this.table.fill(e<<4|i)}add(e,i,n,a){this.table[i<<8|e]=n<<4|a}addMany(e,i,n,a){for(let o=0;o<e.length;o++)this.table[i<<8|e[o]]=n<<4|a}},Ti=160,zC=(function(){let e=new OC(4095),i=Array.apply(null,Array(256)).map((_,m)=>m),n=(_,m)=>i.slice(_,m),a=n(32,127),o=n(0,24);o.push(25),o.push.apply(o,n(28,32));let c=n(0,14),d;e.setDefault(1,0),e.addMany(a,0,2,0);for(d in c)e.addMany([24,26,153,154],d,3,0),e.addMany(n(128,144),d,3,0),e.addMany(n(144,152),d,3,0),e.add(156,d,0,0),e.add(27,d,11,1),e.add(157,d,4,8),e.addMany([152,158,159],d,0,7),e.add(155,d,11,3),e.add(144,d,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(a,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(n(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(a,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(n(64,127),3,7,0),e.addMany(n(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(n(48,60),4,8,4),e.addMany(n(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(n(32,64),6,0,6),e.add(127,6,0,6),e.addMany(n(64,127),6,0,0),e.addMany(n(32,48),3,9,5),e.addMany(n(32,48),5,9,5),e.addMany(n(48,64),5,0,6),e.addMany(n(64,127),5,7,0),e.addMany(n(32,48),4,9,5),e.addMany(n(32,48),1,9,2),e.addMany(n(32,48),2,9,2),e.addMany(n(48,127),2,10,0),e.addMany(n(48,80),1,10,0),e.addMany(n(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(n(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(n(28,32),9,0,9),e.addMany(n(32,48),9,9,12),e.addMany(n(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(n(32,128),11,0,11),e.addMany(n(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(n(28,32),10,0,10),e.addMany(n(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(n(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(n(28,32),12,0,12),e.addMany(n(32,48),12,9,12),e.addMany(n(48,64),12,0,11),e.addMany(n(64,127),12,12,13),e.addMany(n(64,127),10,12,13),e.addMany(n(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(a,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(Ti,0,2,0),e.add(Ti,8,5,8),e.add(Ti,6,0,6),e.add(Ti,11,0,11),e.add(Ti,13,13,13),e})(),HC=class extends Me{constructor(e=zC){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new D0,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(i,n,a)=>{},this._executeHandlerFb=i=>{},this._csiHandlerFb=(i,n)=>{},this._escHandlerFb=i=>{},this._errorHandlerFb=i=>i,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(Je(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new BC),this._dcsParser=this._register(new LC),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,i=[64,126]){let n=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=e.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let o=0;o<e.intermediates.length;++o){let c=e.intermediates.charCodeAt(o);if(32>c||c>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=c}}if(e.final.length!==1)throw new Error("final must be a single byte");let a=e.final.charCodeAt(0);if(i[0]>a||a>i[1])throw new Error(`final must be in range ${i[0]} .. ${i[1]}`);return n<<=8,n|=a,n}identToString(e){let i=[];for(;e;)i.push(String.fromCharCode(e&255)),e>>=8;return i.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,i){let n=this._identifier(e,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let a=this._escHandlers[n];return a.push(i),{dispose:()=>{let o=a.indexOf(i);o!==-1&&a.splice(o,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,i){this._executeHandlers[e.charCodeAt(0)]=i}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,i){let n=this._identifier(e);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let a=this._csiHandlers[n];return a.push(i),{dispose:()=>{let o=a.indexOf(i);o!==-1&&a.splice(o,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,i){return this._dcsParser.registerHandler(this._identifier(e),i)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,i){return this._oscParser.registerHandler(e,i)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,i,n,a,o){this._parseStack.state=e,this._parseStack.handlers=i,this._parseStack.handlerPos=n,this._parseStack.transition=a,this._parseStack.chunkPos=o}parse(e,i,n){let a=0,o=0,c=0,d;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,c=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let _=this._parseStack.handlers,m=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&m>-1){for(;m>=0&&(d=_[m](this._params),d!==!0);m--)if(d instanceof Promise)return this._parseStack.handlerPos=m,d}this._parseStack.handlers=[];break;case 4:if(n===!1&&m>-1){for(;m>=0&&(d=_[m](),d!==!0);m--)if(d instanceof Promise)return this._parseStack.handlerPos=m,d}this._parseStack.handlers=[];break;case 6:if(a=e[this._parseStack.chunkPos],d=this._dcsParser.unhook(a!==24&&a!==26,n),d)return d;a===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(a=e[this._parseStack.chunkPos],d=this._oscParser.end(a!==24&&a!==26,n),d)return d;a===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,c=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let _=c;_<i;++_){switch(a=e[_],o=this._transitions.table[this.currentState<<8|(a<160?a:Ti)],o>>4){case 2:for(let b=_+1;;++b){if(b>=i||(a=e[b])<32||a>126&&a<Ti){this._printHandler(e,_,b),_=b-1;break}if(++b>=i||(a=e[b])<32||a>126&&a<Ti){this._printHandler(e,_,b),_=b-1;break}if(++b>=i||(a=e[b])<32||a>126&&a<Ti){this._printHandler(e,_,b),_=b-1;break}if(++b>=i||(a=e[b])<32||a>126&&a<Ti){this._printHandler(e,_,b),_=b-1;break}}break;case 3:this._executeHandlers[a]?this._executeHandlers[a]():this._executeHandlerFb(a),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:a,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let m=this._csiHandlers[this._collect<<8|a],f=m?m.length-1:-1;for(;f>=0&&(d=m[f](this._params),d!==!0);f--)if(d instanceof Promise)return this._preserveStack(3,m,f,o,_),d;f<0&&this._csiHandlerFb(this._collect<<8|a,this._params),this.precedingJoinState=0;break;case 8:do switch(a){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(a-48)}while(++_<i&&(a=e[_])>47&&a<60);_--;break;case 9:this._collect<<=8,this._collect|=a;break;case 10:let y=this._escHandlers[this._collect<<8|a],S=y?y.length-1:-1;for(;S>=0&&(d=y[S](),d!==!0);S--)if(d instanceof Promise)return this._preserveStack(4,y,S,o,_),d;S<0&&this._escHandlerFb(this._collect<<8|a),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|a,this._params);break;case 13:for(let b=_+1;;++b)if(b>=i||(a=e[b])===24||a===26||a===27||a>127&&a<Ti){this._dcsParser.put(e,_,b),_=b-1;break}break;case 14:if(d=this._dcsParser.unhook(a!==24&&a!==26),d)return this._preserveStack(6,[],0,o,_),d;a===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let b=_+1;;b++)if(b>=i||(a=e[b])<32||a>127&&a<Ti){this._oscParser.put(e,_,b),_=b-1;break}break;case 6:if(d=this._oscParser.end(a!==24&&a!==26),d)return this._preserveStack(5,[],0,o,_),d;a===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=o&15}}},jC=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,UC=/^[\da-f]+$/;function Gg(e){if(!e)return;let i=e.toLowerCase();if(i.indexOf("rgb:")===0){i=i.slice(4);let n=jC.exec(i);if(n){let a=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/a*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/a*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/a*255)]}}else if(i.indexOf("#")===0&&(i=i.slice(1),UC.exec(i)&&[3,6,9,12].includes(i.length))){let n=i.length/3,a=[0,0,0];for(let o=0;o<3;++o){let c=parseInt(i.slice(n*o,n*o+n),16);a[o]=n===1?c<<4:n===2?c:n===3?c>>4:c>>8}return a}}function Tu(e,i){let n=e.toString(16),a=n.length<2?"0"+n:n;switch(i){case 4:return n[0];case 8:return a;case 12:return(a+a).slice(0,3);default:return a+a}}function qC(e,i=16){let[n,a,o]=e;return`rgb:${Tu(n,i)}/${Tu(a,i)}/${Tu(o,i)}`}var PC={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Zs=131072,Wg=10;function Kg(e,i){if(e>24)return i.setWinLines||!1;switch(e){case 1:return!!i.restoreWin;case 2:return!!i.minimizeWin;case 3:return!!i.setWinPosition;case 4:return!!i.setWinSizePixels;case 5:return!!i.raiseWin;case 6:return!!i.lowerWin;case 7:return!!i.refreshWin;case 8:return!!i.setWinSizeChars;case 9:return!!i.maximizeWin;case 10:return!!i.fullscreenWin;case 11:return!!i.getWinState;case 13:return!!i.getWinPosition;case 14:return!!i.getWinSizePixels;case 15:return!!i.getScreenSizePixels;case 16:return!!i.getCellSizePixels;case 18:return!!i.getWinSizeChars;case 19:return!!i.getScreenSizeChars;case 20:return!!i.getIconTitle;case 21:return!!i.getWinTitle;case 22:return!!i.pushTitle;case 23:return!!i.popTitle;case 24:return!!i.setWinLines}return!1}var Ig=5e3,Fg=0,YC=class extends Me{constructor(e,i,n,a,o,c,d,_,m=new HC){super(),this._bufferService=e,this._charsetService=i,this._coreService=n,this._logService=a,this._optionsService=o,this._oscLinkService=c,this._coreMouseService=d,this._unicodeService=_,this._parser=m,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new lw,this._utf8Decoder=new ow,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=vt.clone(),this._eraseAttrDataInternal=vt.clone(),this._onRequestBell=this._register(new se),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new se),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new se),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new se),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new se),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new se),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new se),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new se),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new se),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new se),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new se),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new se),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new bd(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(f=>this._activeBuffer=f.activeBuffer)),this._parser.setCsiHandlerFallback((f,y)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(f),params:y.toArray()})}),this._parser.setEscHandlerFallback(f=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(f)})}),this._parser.setExecuteHandlerFallback(f=>{this._logService.debug("Unknown EXECUTE code: ",{code:f})}),this._parser.setOscHandlerFallback((f,y,S)=>{this._logService.debug("Unknown OSC code: ",{identifier:f,action:y,data:S})}),this._parser.setDcsHandlerFallback((f,y,S)=>{y==="HOOK"&&(S=S.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(f),action:y,payload:S})}),this._parser.setPrintHandler((f,y,S)=>this.print(f,y,S)),this._parser.registerCsiHandler({final:"@"},f=>this.insertChars(f)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},f=>this.scrollLeft(f)),this._parser.registerCsiHandler({final:"A"},f=>this.cursorUp(f)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},f=>this.scrollRight(f)),this._parser.registerCsiHandler({final:"B"},f=>this.cursorDown(f)),this._parser.registerCsiHandler({final:"C"},f=>this.cursorForward(f)),this._parser.registerCsiHandler({final:"D"},f=>this.cursorBackward(f)),this._parser.registerCsiHandler({final:"E"},f=>this.cursorNextLine(f)),this._parser.registerCsiHandler({final:"F"},f=>this.cursorPrecedingLine(f)),this._parser.registerCsiHandler({final:"G"},f=>this.cursorCharAbsolute(f)),this._parser.registerCsiHandler({final:"H"},f=>this.cursorPosition(f)),this._parser.registerCsiHandler({final:"I"},f=>this.cursorForwardTab(f)),this._parser.registerCsiHandler({final:"J"},f=>this.eraseInDisplay(f,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},f=>this.eraseInDisplay(f,!0)),this._parser.registerCsiHandler({final:"K"},f=>this.eraseInLine(f,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},f=>this.eraseInLine(f,!0)),this._parser.registerCsiHandler({final:"L"},f=>this.insertLines(f)),this._parser.registerCsiHandler({final:"M"},f=>this.deleteLines(f)),this._parser.registerCsiHandler({final:"P"},f=>this.deleteChars(f)),this._parser.registerCsiHandler({final:"S"},f=>this.scrollUp(f)),this._parser.registerCsiHandler({final:"T"},f=>this.scrollDown(f)),this._parser.registerCsiHandler({final:"X"},f=>this.eraseChars(f)),this._parser.registerCsiHandler({final:"Z"},f=>this.cursorBackwardTab(f)),this._parser.registerCsiHandler({final:"`"},f=>this.charPosAbsolute(f)),this._parser.registerCsiHandler({final:"a"},f=>this.hPositionRelative(f)),this._parser.registerCsiHandler({final:"b"},f=>this.repeatPrecedingCharacter(f)),this._parser.registerCsiHandler({final:"c"},f=>this.sendDeviceAttributesPrimary(f)),this._parser.registerCsiHandler({prefix:">",final:"c"},f=>this.sendDeviceAttributesSecondary(f)),this._parser.registerCsiHandler({final:"d"},f=>this.linePosAbsolute(f)),this._parser.registerCsiHandler({final:"e"},f=>this.vPositionRelative(f)),this._parser.registerCsiHandler({final:"f"},f=>this.hVPosition(f)),this._parser.registerCsiHandler({final:"g"},f=>this.tabClear(f)),this._parser.registerCsiHandler({final:"h"},f=>this.setMode(f)),this._parser.registerCsiHandler({prefix:"?",final:"h"},f=>this.setModePrivate(f)),this._parser.registerCsiHandler({final:"l"},f=>this.resetMode(f)),this._parser.registerCsiHandler({prefix:"?",final:"l"},f=>this.resetModePrivate(f)),this._parser.registerCsiHandler({final:"m"},f=>this.charAttributes(f)),this._parser.registerCsiHandler({final:"n"},f=>this.deviceStatus(f)),this._parser.registerCsiHandler({prefix:"?",final:"n"},f=>this.deviceStatusPrivate(f)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},f=>this.softReset(f)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},f=>this.setCursorStyle(f)),this._parser.registerCsiHandler({final:"r"},f=>this.setScrollRegion(f)),this._parser.registerCsiHandler({final:"s"},f=>this.saveCursor(f)),this._parser.registerCsiHandler({final:"t"},f=>this.windowOptions(f)),this._parser.registerCsiHandler({final:"u"},f=>this.restoreCursor(f)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},f=>this.insertColumns(f)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},f=>this.deleteColumns(f)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},f=>this.selectProtected(f)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},f=>this.requestMode(f,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},f=>this.requestMode(f,!1)),this._parser.setExecuteHandler(V.BEL,()=>this.bell()),this._parser.setExecuteHandler(V.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(V.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(V.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(V.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(V.BS,()=>this.backspace()),this._parser.setExecuteHandler(V.HT,()=>this.tab()),this._parser.setExecuteHandler(V.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(V.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Mo.IND,()=>this.index()),this._parser.setExecuteHandler(Mo.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Mo.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new fi(f=>(this.setTitle(f),this.setIconName(f),!0))),this._parser.registerOscHandler(1,new fi(f=>this.setIconName(f))),this._parser.registerOscHandler(2,new fi(f=>this.setTitle(f))),this._parser.registerOscHandler(4,new fi(f=>this.setOrReportIndexedColor(f))),this._parser.registerOscHandler(8,new fi(f=>this.setHyperlink(f))),this._parser.registerOscHandler(10,new fi(f=>this.setOrReportFgColor(f))),this._parser.registerOscHandler(11,new fi(f=>this.setOrReportBgColor(f))),this._parser.registerOscHandler(12,new fi(f=>this.setOrReportCursorColor(f))),this._parser.registerOscHandler(104,new fi(f=>this.restoreIndexedColor(f))),this._parser.registerOscHandler(110,new fi(f=>this.restoreFgColor(f))),this._parser.registerOscHandler(111,new fi(f=>this.restoreBgColor(f))),this._parser.registerOscHandler(112,new fi(f=>this.restoreCursorColor(f))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let f in kt)this._parser.registerEscHandler({intermediates:"(",final:f},()=>this.selectCharset("("+f)),this._parser.registerEscHandler({intermediates:")",final:f},()=>this.selectCharset(")"+f)),this._parser.registerEscHandler({intermediates:"*",final:f},()=>this.selectCharset("*"+f)),this._parser.registerEscHandler({intermediates:"+",final:f},()=>this.selectCharset("+"+f)),this._parser.registerEscHandler({intermediates:"-",final:f},()=>this.selectCharset("-"+f)),this._parser.registerEscHandler({intermediates:".",final:f},()=>this.selectCharset("."+f)),this._parser.registerEscHandler({intermediates:"/",final:f},()=>this.selectCharset("/"+f));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(f=>(this._logService.error("Parsing error: ",f),f)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Yg((f,y)=>this.requestStatusString(f,y)))}getAttrData(){return this._curAttrData}_preserveStack(e,i,n,a){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=i,this._parseStack.decodedLength=n,this._parseStack.position=a}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((i,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),Ig))]).catch(i=>{if(i!=="#SLOW_TIMEOUT")throw i;console.warn(`async parser handler taking longer than ${Ig} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,i){let n,a=this._activeBuffer.x,o=this._activeBuffer.y,c=0,d=this._parseStack.paused;if(d){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,i))return this._logSlowResolvingAsync(n),n;a=this._parseStack.cursorStartX,o=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>Zs&&(c=this._parseStack.position+Zs)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,f=>String.fromCharCode(f)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(f=>f.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<Zs&&(this._parseBuffer=new Uint32Array(Math.min(e.length,Zs))),d||this._dirtyRowTracker.clearRange(),e.length>Zs)for(let f=c;f<e.length;f+=Zs){let y=f+Zs<e.length?f+Zs:e.length,S=typeof e=="string"?this._stringDecoder.decode(e.substring(f,y),this._parseBuffer):this._utf8Decoder.decode(e.subarray(f,y),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,S))return this._preserveStack(a,o,S,f),this._logSlowResolvingAsync(n),n}else if(!d){let f=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,f))return this._preserveStack(a,o,f,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==a||this._activeBuffer.y!==o)&&this._onCursorMove.fire();let _=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),m=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);m<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(m,this._bufferService.rows-1),end:Math.min(_,this._bufferService.rows-1)})}print(e,i,n){let a,o,c=this._charsetService.charset,d=this._optionsService.rawOptions.screenReaderMode,_=this._bufferService.cols,m=this._coreService.decPrivateModes.wraparound,f=this._coreService.modes.insertMode,y=this._curAttrData,S=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-i>0&&S.getWidth(this._activeBuffer.x-1)===2&&S.setCellFromCodepoint(this._activeBuffer.x-1,0,1,y);let b=this._parser.precedingJoinState;for(let M=i;M<n;++M){if(a=e[M],a<127&&c){let z=c[String.fromCharCode(a)];z&&(a=z.charCodeAt(0))}let E=this._unicodeService.charProperties(a,b);o=Er.extractWidth(E);let D=Er.extractShouldJoin(E),j=D?Er.extractWidth(b):0;if(b=E,d&&this._onA11yChar.fire(Js(a)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+o-j>_){if(m){let z=S,H=this._activeBuffer.x-j;for(this._activeBuffer.x=j,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),S=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),j>0&&S instanceof ja&&S.copyCellsFrom(z,H,0,j,!1);H<_;)z.setCellFromCodepoint(H++,0,1,y)}else if(this._activeBuffer.x=_-1,o===2)continue}if(D&&this._activeBuffer.x){let z=S.getWidth(this._activeBuffer.x-1)?1:2;S.addCodepointToCell(this._activeBuffer.x-z,a,o);for(let H=o-j;--H>=0;)S.setCellFromCodepoint(this._activeBuffer.x++,0,0,y);continue}if(f&&(S.insertCells(this._activeBuffer.x,o-j,this._activeBuffer.getNullCell(y)),S.getWidth(_-1)===2&&S.setCellFromCodepoint(_-1,0,1,y)),S.setCellFromCodepoint(this._activeBuffer.x++,a,o,y),o>0)for(;--o;)S.setCellFromCodepoint(this._activeBuffer.x++,0,0,y)}this._parser.precedingJoinState=b,this._activeBuffer.x<_&&n-i>0&&S.getWidth(this._activeBuffer.x)===0&&!S.hasContent(this._activeBuffer.x)&&S.setCellFromCodepoint(this._activeBuffer.x,0,1,y),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,i){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,n=>Kg(n.params[0],this._optionsService.rawOptions.windowOptions)?i(n):!0):this._parser.registerCsiHandler(e,i)}registerDcsHandler(e,i){return this._parser.registerDcsHandler(e,new Yg(i))}registerEscHandler(e,i){return this._parser.registerEscHandler(e,i)}registerOscHandler(e,i){return this._parser.registerOscHandler(e,new fi(i))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,i){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+i):(this._activeBuffer.x=e,this._activeBuffer.y=i),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,i){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+i)}cursorUp(e){let i=this._activeBuffer.y-this._activeBuffer.scrollTop;return i>=0?this._moveCursor(0,-Math.min(i,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let i=this._activeBuffer.scrollBottom-this._activeBuffer.y;return i>=0?this._moveCursor(0,Math.min(i,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let i=e.params[0];return i===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:i===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let i=e.params[0]||1;for(;i--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let i=e.params[0]||1;for(;i--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let i=e.params[0];return i===1&&(this._curAttrData.bg|=536870912),(i===2||i===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,i,n,a=!1,o=!1){let c=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);c.replaceCells(i,n,this._activeBuffer.getNullCell(this._eraseAttrData()),o),a&&(c.isWrapped=!1)}_resetBufferLine(e,i=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),i),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),n.isWrapped=!1)}eraseInDisplay(e,i=!1){this._restrictCursor(this._bufferService.cols);let n;switch(e.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,i);n<this._bufferService.rows;n++)this._resetBufferLine(n,i);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,i),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,i);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+n)?.getTrimmedLength(););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,i);this._dirtyRowTracker.markDirty(0)}break;case 3:let a=this._activeBuffer.lines.length-this._bufferService.rows;a>0&&(this._activeBuffer.lines.trimStart(a),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-a,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-a,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,i=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,i);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,i);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,i);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let i=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,a=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-a+1;for(;i--;)this._activeBuffer.lines.splice(o-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let i=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,a;for(a=this._bufferService.rows-1-this._activeBuffer.scrollBottom,a=this._bufferService.rows-1+this._activeBuffer.ybase-a;i--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(a,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return i&&(i.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return i&&(i.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let i=e.params[0]||1;for(;i--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let i=e.params[0]||1;for(;i--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(vt));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);a.deleteCells(0,i,this._activeBuffer.getNullCell(this._eraseAttrData())),a.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);a.insertCells(0,i,this._activeBuffer.getNullCell(this._eraseAttrData())),a.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);a.insertCells(this._activeBuffer.x,i,this._activeBuffer.getNullCell(this._eraseAttrData())),a.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);a.deleteCells(this._activeBuffer.x,i,this._activeBuffer.getNullCell(this._eraseAttrData())),a.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return i&&(i.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let i=this._parser.precedingJoinState;if(!i)return!0;let n=e.params[0]||1,a=Er.extractWidth(i),o=this._activeBuffer.x-a,c=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(o),d=new Uint32Array(c.length*n),_=0;for(let f=0;f<c.length;){let y=c.codePointAt(f)||0;d[_++]=y,f+=y>65535?2:1}let m=_;for(let f=1;f<n;++f)d.copyWithin(m,0,_),m+=_;return this.print(d,0,m),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(V.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(V.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(V.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(V.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(V.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,xr),this._charsetService.setgCharset(1,xr),this._charsetService.setgCharset(2,xr),this._charsetService.setgCharset(3,xr);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[i]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,i){let n;(D=>(D[D.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",D[D.SET=1]="SET",D[D.RESET=2]="RESET",D[D.PERMANENTLY_SET=3]="PERMANENTLY_SET",D[D.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(n||={});let a=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:c}=this._coreMouseService,d=this._coreService,{buffers:_,cols:m}=this._bufferService,{active:f,alt:y}=_,S=this._optionsService.rawOptions,b=(D,j)=>(d.triggerDataEvent(`${V.ESC}[${i?"":"?"}${D};${j}$y`),!0),M=D=>D?1:2,E=e.params[0];return i?E===2?b(E,4):E===4?b(E,M(d.modes.insertMode)):E===12?b(E,3):E===20?b(E,M(S.convertEol)):b(E,0):E===1?b(E,M(a.applicationCursorKeys)):E===3?b(E,S.windowOptions.setWinLines?m===80?2:m===132?1:0:0):E===6?b(E,M(a.origin)):E===7?b(E,M(a.wraparound)):E===8?b(E,3):E===9?b(E,M(o==="X10")):E===12?b(E,M(S.cursorBlink)):E===25?b(E,M(!d.isCursorHidden)):E===45?b(E,M(a.reverseWraparound)):E===66?b(E,M(a.applicationKeypad)):E===67?b(E,4):E===1e3?b(E,M(o==="VT200")):E===1002?b(E,M(o==="DRAG")):E===1003?b(E,M(o==="ANY")):E===1004?b(E,M(a.sendFocus)):E===1005?b(E,4):E===1006?b(E,M(c==="SGR")):E===1015?b(E,4):E===1016?b(E,M(c==="SGR_PIXELS")):E===1048?b(E,1):E===47||E===1047||E===1049?b(E,M(f===y)):E===2004?b(E,M(a.bracketedPasteMode)):E===2026?b(E,M(a.synchronizedOutput)):b(E,0)}_updateAttrColor(e,i,n,a,o){return i===2?(e|=50331648,e&=-16777216,e|=$a.fromColorRGB([n,a,o])):i===5&&(e&=-50331904,e|=33554432|n&255),e}_extractColor(e,i,n){let a=[0,0,-1,0,0,0],o=0,c=0;do{if(a[c+o]=e.params[i+c],e.hasSubParams(i+c)){let d=e.getSubParams(i+c),_=0;do a[1]===5&&(o=1),a[c+_+1+o]=d[_];while(++_<d.length&&_+c+1+o<a.length);break}if(a[1]===5&&c+o>=2||a[1]===2&&c+o>=5)break;a[1]&&(o=1)}while(++c+i<e.length&&c+o<a.length);for(let d=2;d<a.length;++d)a[d]===-1&&(a[d]=0);switch(a[0]){case 38:n.fg=this._updateAttrColor(n.fg,a[1],a[3],a[4],a[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,a[1],a[3],a[4],a[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,a[1],a[3],a[4],a[5])}return c}_processUnderline(e,i){i.extended=i.extended.clone(),(!~e||e>5)&&(e=1),i.extended.underlineStyle=e,i.fg|=268435456,e===0&&(i.fg&=-268435457),i.updateExtended()}_processSGR0(e){e.fg=vt.fg,e.bg=vt.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let i=e.length,n,a=this._curAttrData;for(let o=0;o<i;o++)n=e.params[o],n>=30&&n<=37?(a.fg&=-50331904,a.fg|=16777216|n-30):n>=40&&n<=47?(a.bg&=-50331904,a.bg|=16777216|n-40):n>=90&&n<=97?(a.fg&=-50331904,a.fg|=16777216|n-90|8):n>=100&&n<=107?(a.bg&=-50331904,a.bg|=16777216|n-100|8):n===0?this._processSGR0(a):n===1?a.fg|=134217728:n===3?a.bg|=67108864:n===4?(a.fg|=268435456,this._processUnderline(e.hasSubParams(o)?e.getSubParams(o)[0]:1,a)):n===5?a.fg|=536870912:n===7?a.fg|=67108864:n===8?a.fg|=1073741824:n===9?a.fg|=2147483648:n===2?a.bg|=134217728:n===21?this._processUnderline(2,a):n===22?(a.fg&=-134217729,a.bg&=-134217729):n===23?a.bg&=-67108865:n===24?(a.fg&=-268435457,this._processUnderline(0,a)):n===25?a.fg&=-536870913:n===27?a.fg&=-67108865:n===28?a.fg&=-1073741825:n===29?a.fg&=2147483647:n===39?(a.fg&=-67108864,a.fg|=vt.fg&16777215):n===49?(a.bg&=-67108864,a.bg|=vt.bg&16777215):n===38||n===48||n===58?o+=this._extractColor(e,o,a):n===53?a.bg|=1073741824:n===55?a.bg&=-1073741825:n===59?(a.extended=a.extended.clone(),a.extended.underlineColor=-1,a.updateExtended()):n===100?(a.fg&=-67108864,a.fg|=vt.fg&16777215,a.bg&=-67108864,a.bg|=vt.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${V.ESC}[0n`);break;case 6:let i=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${V.ESC}[${i};${n}R`);break}return!0}deviceStatusPrivate(e){if(e.params[0]===6){let i=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${V.ESC}[?${i};${n}R`)}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=vt.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let i=e.length===0?1:e.params[0];if(i===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(i){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=i%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(e){let i=e.params[0]||1,n;return(e.length<2||(n=e.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>i&&(this._activeBuffer.scrollTop=i-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(e){if(!Kg(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let i=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:i!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${V.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(i===0||i===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>Wg&&this._windowTitleStack.shift()),(i===0||i===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>Wg&&this._iconNameStack.shift());break;case 23:(i===0||i===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(i===0||i===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let i=[],n=e.split(";");for(;n.length>1;){let a=n.shift(),o=n.shift();if(/^\d+$/.exec(a)){let c=parseInt(a);if(Vg(c))if(o==="?")i.push({type:0,index:c});else{let d=Gg(o);d&&i.push({type:1,index:c,color:d})}}}return i.length&&this._onColor.fire(i),!0}setHyperlink(e){let i=e.indexOf(";");if(i===-1)return!0;let n=e.slice(0,i).trim(),a=e.slice(i+1);return a?this._createHyperlink(n,a):n.trim()?!1:this._finishHyperlink()}_createHyperlink(e,i){this._getCurrentLinkId()&&this._finishHyperlink();let n=e.split(":"),a,o=n.findIndex(c=>c.startsWith("id="));return o!==-1&&(a=n[o].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:a,uri:i}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,i){let n=e.split(";");for(let a=0;a<n.length&&!(i>=this._specialColors.length);++a,++i)if(n[a]==="?")this._onColor.fire([{type:0,index:this._specialColors[i]}]);else{let o=Gg(n[a]);o&&this._onColor.fire([{type:1,index:this._specialColors[i],color:o}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let i=[],n=e.split(";");for(let a=0;a<n.length;++a)if(/^\d+$/.exec(n[a])){let o=parseInt(n[a]);Vg(o)&&i.push({type:2,index:o})}return i.length&&this._onColor.fire(i),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,xr),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(PC[e[0]],kt[e[1]]||xr),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=vt.clone(),this._eraseAttrDataInternal=vt.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new Di;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let i=0;i<this._bufferService.rows;++i){let n=this._activeBuffer.ybase+this._activeBuffer.y+i,a=this._activeBuffer.lines.get(n);a&&(a.fill(e),a.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,i){let n=d=>(this._coreService.triggerDataEvent(`${V.ESC}${d}${V.ESC}\\`),!0),a=this._bufferService.buffer,o=this._optionsService.rawOptions;return n(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${a.scrollTop+1};${a.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[o.cursorStyle]-(o.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,i){this._dirtyRowTracker.markRangeDirty(e,i)}},bd=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,i){e>i&&(Fg=e,e=i,i=Fg),e<this.start&&(this.start=e),i>this.end&&(this.end=i)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};bd=lt([he(0,Xt)],bd);function Vg(e){return 0<=e&&e<256}var GC=5e7,Xg=12,WC=50,KC=class extends Me{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new se),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,i){if(i!==void 0&&this._syncCalls>i){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,i){if(this._pendingData>GC)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(i),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(i)}_innerWrite(e=0,i=!0){let n=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let a=this._writeBuffer[this._bufferOffset],o=this._action(a,i);if(o){let d=_=>performance.now()-n>=Xg?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(n,_);o.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(d);return}let c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=a.length,performance.now()-n>=Xg)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>WC&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},wd=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let i=this._bufferService.buffer;if(e.id===void 0){let _=i.addMarker(i.ybase+i.y),m={data:e,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(m,_)),this._dataByLinkId.set(m.id,m),m.id}let n=e,a=this._getEntryIdKey(n),o=this._entriesWithId.get(a);if(o)return this.addLineToLink(o.id,i.ybase+i.y),o.id;let c=i.addMarker(i.ybase+i.y),d={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(d,c)),this._entriesWithId.set(d.key,d),this._dataByLinkId.set(d.id,d),d.id}addLineToLink(e,i){let n=this._dataByLinkId.get(e);if(n&&n.lines.every(a=>a.line!==i)){let a=this._bufferService.buffer.addMarker(i);n.lines.push(a),a.onDispose(()=>this._removeMarkerFromLink(n,a))}}getLinkData(e){return this._dataByLinkId.get(e)?.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,i){let n=e.lines.indexOf(i);n!==-1&&(e.lines.splice(n,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};wd=lt([he(0,Xt)],wd);var $g=!1,IC=class extends Me{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new kn),this._onBinary=this._register(new se),this.onBinary=this._onBinary.event,this._onData=this._register(new se),this.onData=this._onData.event,this._onLineFeed=this._register(new se),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new se),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new se),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new se),this._instantiationService=new pC,this.optionsService=this._register(new kC(e)),this._instantiationService.setService($t,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(gd)),this._instantiationService.setService(Xt,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(pd)),this._instantiationService.setService(Xv,this._logService),this.coreService=this._register(this._instantiationService.createInstance(vd)),this._instantiationService.setService(Ar,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(Sd)),this._instantiationService.setService(Vv,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Er)),this._instantiationService.setService(dw,this.unicodeService),this._charsetService=this._instantiationService.createInstance(AC),this._instantiationService.setService(uw,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(wd),this._instantiationService.setService($v,this._oscLinkService),this._inputHandler=this._register(new YC(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(qt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(qt.forward(this._bufferService.onResize,this._onResize)),this._register(qt.forward(this.coreService.onData,this._onData)),this._register(qt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new KC((i,n)=>this._inputHandler.parse(i,n))),this._register(qt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new se),this._onScroll.event(e=>{this._onScrollApi?.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let i in e)this.optionsService.options[i]=e[i]}write(e,i){this._writeBuffer.write(e,i)}writeSync(e,i){this._logService.logLevel<=3&&!$g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),$g=!0),this._writeBuffer.writeSync(e,i)}input(e,i=!0){this.coreService.triggerDataEvent(e,i)}resize(e,i){isNaN(e)||isNaN(i)||(e=Math.max(e,M0),i=Math.max(i,T0),this._bufferService.resize(e,i))}scroll(e,i=!1){this._bufferService.scroll(e,i)}scrollLines(e,i){this._bufferService.scrollLines(e,i)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let i=e-this._bufferService.buffer.ydisp;i!==0&&this.scrollLines(i)}registerEscHandler(e,i){return this._inputHandler.registerEscHandler(e,i)}registerDcsHandler(e,i){return this._inputHandler.registerDcsHandler(e,i)}registerCsiHandler(e,i){return this._inputHandler.registerCsiHandler(e,i)}registerOscHandler(e,i){return this._inputHandler.registerOscHandler(e,i)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,i=this.optionsService.rawOptions.windowsPty;i&&i.buildNumber!==void 0&&i.buildNumber!==void 0?e=i.backend==="conpty"&&i.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(Pg.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(Pg(this._bufferService),!1))),this._windowsWrappingHeuristics.value=Je(()=>{for(let i of e)i.dispose()})}}},FC={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function VC(e,i,n,a){let o={type:0,cancel:!1,key:void 0},c=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?i?o.key=V.ESC+"OA":o.key=V.ESC+"[A":e.key==="UIKeyInputLeftArrow"?i?o.key=V.ESC+"OD":o.key=V.ESC+"[D":e.key==="UIKeyInputRightArrow"?i?o.key=V.ESC+"OC":o.key=V.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(i?o.key=V.ESC+"OB":o.key=V.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\b":V.DEL,e.altKey&&(o.key=V.ESC+o.key);break;case 9:if(e.shiftKey){o.key=V.ESC+"[Z";break}o.key=V.HT,o.cancel=!0;break;case 13:o.key=e.altKey?V.ESC+V.CR:V.CR,o.cancel=!0;break;case 27:o.key=V.ESC,e.altKey&&(o.key=V.ESC+V.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;c?o.key=V.ESC+"[1;"+(c+1)+"D":i?o.key=V.ESC+"OD":o.key=V.ESC+"[D";break;case 39:if(e.metaKey)break;c?o.key=V.ESC+"[1;"+(c+1)+"C":i?o.key=V.ESC+"OC":o.key=V.ESC+"[C";break;case 38:if(e.metaKey)break;c?o.key=V.ESC+"[1;"+(c+1)+"A":i?o.key=V.ESC+"OA":o.key=V.ESC+"[A";break;case 40:if(e.metaKey)break;c?o.key=V.ESC+"[1;"+(c+1)+"B":i?o.key=V.ESC+"OB":o.key=V.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(o.key=V.ESC+"[2~");break;case 46:c?o.key=V.ESC+"[3;"+(c+1)+"~":o.key=V.ESC+"[3~";break;case 36:c?o.key=V.ESC+"[1;"+(c+1)+"H":i?o.key=V.ESC+"OH":o.key=V.ESC+"[H";break;case 35:c?o.key=V.ESC+"[1;"+(c+1)+"F":i?o.key=V.ESC+"OF":o.key=V.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=V.ESC+"[5;"+(c+1)+"~":o.key=V.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=V.ESC+"[6;"+(c+1)+"~":o.key=V.ESC+"[6~";break;case 112:c?o.key=V.ESC+"[1;"+(c+1)+"P":o.key=V.ESC+"OP";break;case 113:c?o.key=V.ESC+"[1;"+(c+1)+"Q":o.key=V.ESC+"OQ";break;case 114:c?o.key=V.ESC+"[1;"+(c+1)+"R":o.key=V.ESC+"OR";break;case 115:c?o.key=V.ESC+"[1;"+(c+1)+"S":o.key=V.ESC+"OS";break;case 116:c?o.key=V.ESC+"[15;"+(c+1)+"~":o.key=V.ESC+"[15~";break;case 117:c?o.key=V.ESC+"[17;"+(c+1)+"~":o.key=V.ESC+"[17~";break;case 118:c?o.key=V.ESC+"[18;"+(c+1)+"~":o.key=V.ESC+"[18~";break;case 119:c?o.key=V.ESC+"[19;"+(c+1)+"~":o.key=V.ESC+"[19~";break;case 120:c?o.key=V.ESC+"[20;"+(c+1)+"~":o.key=V.ESC+"[20~";break;case 121:c?o.key=V.ESC+"[21;"+(c+1)+"~":o.key=V.ESC+"[21~";break;case 122:c?o.key=V.ESC+"[23;"+(c+1)+"~":o.key=V.ESC+"[23~";break;case 123:c?o.key=V.ESC+"[24;"+(c+1)+"~":o.key=V.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?o.key=V.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?o.key=V.DEL:e.keyCode===219?o.key=V.ESC:e.keyCode===220?o.key=V.FS:e.keyCode===221&&(o.key=V.GS);else if((!n||a)&&e.altKey&&!e.metaKey){let d=FC[e.keyCode]?.[e.shiftKey?1:0];if(d)o.key=V.ESC+d;else if(e.keyCode>=65&&e.keyCode<=90){let _=e.ctrlKey?e.keyCode-64:e.keyCode+32,m=String.fromCharCode(_);e.shiftKey&&(m=m.toUpperCase()),o.key=V.ESC+m}else if(e.keyCode===32)o.key=V.ESC+(e.ctrlKey?V.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let _=e.code.slice(3,4);e.shiftKey||(_=_.toLowerCase()),o.key=V.ESC+_,o.cancel=!0}}else n&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(o.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?o.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(o.key=V.US),e.key==="@"&&(o.key=V.NUL));break}return o}var ft=0,XC=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new Uo,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new Uo,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((o,c)=>this._getKey(o)-this._getKey(c)),i=0,n=0,a=new Array(this._array.length+this._insertedValues.length);for(let o=0;o<a.length;o++)n>=this._array.length||this._getKey(e[i])<=this._getKey(this._array[n])?(a[o]=e[i],i++):a[o]=this._array[n++];this._array=a,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let i=this._getKey(e);if(i===void 0||(ft=this._search(i),ft===-1)||this._getKey(this._array[ft])!==i)return!1;do if(this._array[ft]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(ft),!0;while(++ft<this._array.length&&this._getKey(this._array[ft])===i);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((o,c)=>o-c),i=0,n=new Array(this._array.length-e.length),a=0;for(let o=0;o<this._array.length;o++)e[i]===o?i++:n[a++]=this._array[o];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(ft=this._search(e),!(ft<0||ft>=this._array.length)&&this._getKey(this._array[ft])===e))do yield this._array[ft];while(++ft<this._array.length&&this._getKey(this._array[ft])===e)}forEachByKey(e,i){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(ft=this._search(e),!(ft<0||ft>=this._array.length)&&this._getKey(this._array[ft])===e))do i(this._array[ft]);while(++ft<this._array.length&&this._getKey(this._array[ft])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let i=0,n=this._array.length-1;for(;n>=i;){let a=i+n>>1,o=this._getKey(this._array[a]);if(o>e)n=a-1;else if(o<e)i=a+1;else{for(;a>0&&this._getKey(this._array[a-1])===e;)a--;return a}}return i}},Du=0,Zg=0,$C=class extends Me{constructor(){super(),this._decorations=new XC(e=>e?.marker.line),this._onDecorationRegistered=this._register(new se),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new se),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(Je(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let i=new ZC(e);if(i){let n=i.marker.onDispose(()=>i.dispose()),a=i.onDispose(()=>{a.dispose(),i&&(this._decorations.delete(i)&&this._onDecorationRemoved.fire(i),n.dispose())});this._decorations.insert(i),this._onDecorationRegistered.fire(i)}return i}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,i,n){let a=0,o=0;for(let c of this._decorations.getKeyIterator(i))a=c.options.x??0,o=a+(c.options.width??1),e>=a&&e<o&&(!n||(c.options.layer??"bottom")===n)&&(yield c)}forEachDecorationAtCell(e,i,n,a){this._decorations.forEachByKey(i,o=>{Du=o.options.x??0,Zg=Du+(o.options.width??1),e>=Du&&e<Zg&&(!n||(o.options.layer??"bottom")===n)&&a(o)})}},ZC=class extends tr{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new se),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new se),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=tt.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=tt.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},QC=1e3,JC=class{constructor(e,i=QC){this._renderCallback=e,this._debounceThresholdMS=i,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,i,n){this._rowCount=n,e=e!==void 0?e:0,i=i!==void 0?i:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,i):i;let a=performance.now();if(a-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=a,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=a-this._lastRefreshMs,c=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},c)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),i=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,i)}},Qg=20,qo=class extends Me{constructor(e,i,n,a){super(),this._terminal=e,this._coreBrowserService=n,this._renderService=a,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let o=this._coreBrowserService.mainDocument;this._accessibilityContainer=o.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=o.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let c=0;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);if(this._topBoundaryFocusListener=c=>this._handleBoundaryFocus(c,0),this._bottomBoundaryFocusListener=c=>this._handleBoundaryFocus(c,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=o.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new JC(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(c=>this._handleResize(c.rows))),this._register(this._terminal.onRender(c=>this._refreshRows(c.start,c.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(c=>this._handleChar(c))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(c=>this._handleTab(c))),this._register(this._terminal.onKey(c=>this._handleKey(c.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(be(o,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(Je(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let i=0;i<e;i++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<Qg+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===Qg+1&&(this._liveRegion.textContent+=Yu.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,i){this._liveRegionDebouncer.refresh(e,i,this._terminal.rows)}_renderRows(e,i){let n=this._terminal.buffer,a=n.lines.length.toString();for(let o=e;o<=i;o++){let c=n.lines.get(n.ydisp+o),d=[],_=c?.translateToString(!0,void 0,void 0,d)||"",m=(n.ydisp+o+1).toString(),f=this._rowElements[o];f&&(_.length===0?(f.textContent="",this._rowColumns.set(f,[0,1])):(f.textContent=_,this._rowColumns.set(f,d)),f.setAttribute("aria-posinset",m),f.setAttribute("aria-setsize",a),this._alignRowWidth(f))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,i){let n=e.target,a=this._rowElements[i===0?1:this._rowElements.length-2],o=n.getAttribute("aria-posinset"),c=i===0?"1":`${this._terminal.buffer.lines.length}`;if(o===c||e.relatedTarget!==a)return;let d,_;if(i===0?(d=n,_=this._rowElements.pop(),this._rowContainer.removeChild(_)):(d=this._rowElements.shift(),_=n,this._rowContainer.removeChild(d)),d.removeEventListener("focus",this._topBoundaryFocusListener),_.removeEventListener("focus",this._bottomBoundaryFocusListener),i===0){let m=this._createAccessibilityTreeNode();this._rowElements.unshift(m),this._rowContainer.insertAdjacentElement("afterbegin",m)}else{let m=this._createAccessibilityTreeNode();this._rowElements.push(m),this._rowContainer.appendChild(m)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(i===0?-1:1),this._rowElements[i===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let i={node:e.anchorNode,offset:e.anchorOffset},n={node:e.focusNode,offset:e.focusOffset};if((i.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||i.node===n.node&&i.offset>n.offset)&&([i,n]=[n,i]),i.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(i={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(i.node))return;let a=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(a)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:a,offset:a.textContent?.length??0}),!this._rowContainer.contains(n.node))return;let o=({node:_,offset:m})=>{let f=_ instanceof Text?_.parentNode:_,y=parseInt(f?.getAttribute("aria-posinset"),10)-1;if(isNaN(y))return console.warn("row is invalid. Race condition?"),null;let S=this._rowColumns.get(f);if(!S)return console.warn("columns is null. Race condition?"),null;let b=m<S.length?S[m]:S.slice(-1)[0]+1;return b>=this._terminal.cols&&(++y,b=0),{row:y,column:b}},c=o(i),d=o(n);if(!(!c||!d)){if(c.row>d.row||c.row===d.row&&c.column>=d.column)throw new Error("invalid range");this._terminal.select(c.column,c.row,(d.row-c.row)*this._terminal.cols-c.column+d.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let i=this._rowContainer.children.length;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){e.style.transform="";let i=e.getBoundingClientRect().width,n=this._rowColumns.get(e)?.slice(-1)?.[0];if(!n)return;let a=n*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${a/i})`}};qo=lt([he(1,Nd),he(2,ws),he(3,xs)],qo);var xd=class extends Me{constructor(e,i,n,a,o){super(),this._element=e,this._mouseService=i,this._renderService=n,this._bufferService=a,this._linkProviderService=o,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new se),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new se),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(Je(()=>{Mr(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(be(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(be(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(be(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(be(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let i=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;let n=e.composedPath();for(let a=0;a<n.length;a++){let o=n[a];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}(!this._lastBufferCell||i.x!==this._lastBufferCell.x||i.y!==this._lastBufferCell.y)&&(this._handleHover(i),this._lastBufferCell=i)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,i){(!this._activeProviderReplies||!i)&&(this._activeProviderReplies?.forEach(a=>{a?.forEach(o=>{o.link.dispose&&o.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let n=!1;for(let[a,o]of this._linkProviderService.linkProviders.entries())i?this._activeProviderReplies?.get(a)&&(n=this._checkLinkProviderResult(a,e,n)):o.provideLinks(e.y,c=>{if(this._isMouseOut)return;let d=c?.map(_=>({link:_}));this._activeProviderReplies?.set(a,d),n=this._checkLinkProviderResult(a,e,n),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,i){let n=new Set;for(let a=0;a<i.size;a++){let o=i.get(a);if(o)for(let c=0;c<o.length;c++){let d=o[c],_=d.link.range.start.y<e?0:d.link.range.start.x,m=d.link.range.end.y>e?this._bufferService.cols:d.link.range.end.x;for(let f=_;f<=m;f++){if(n.has(f)){o.splice(c--,1);break}n.add(f)}}}}_checkLinkProviderResult(e,i,n){if(!this._activeProviderReplies)return n;let a=this._activeProviderReplies.get(e),o=!1;for(let c=0;c<e;c++)(!this._activeProviderReplies.has(c)||this._activeProviderReplies.get(c))&&(o=!0);if(!o&&a){let c=a.find(d=>this._linkAtPosition(d.link,i));c&&(n=!0,this._handleNewLink(c))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let c=0;c<this._activeProviderReplies.size;c++){let d=this._activeProviderReplies.get(c)?.find(_=>this._linkAtPosition(_.link,i));if(d){n=!0,this._handleNewLink(d);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let i=this._positionFromMouseEvent(e,this._element,this._mouseService);i&&this._mouseDownLink&&e2(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,i){!this._currentLink||!this._lastMouseEvent||(!e||!i||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Mr(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(e.link,i)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:n=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:n=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let a=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=o&&(this._clearCurrentLink(a,o),this._lastMouseEvent)){let c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._askForLink(c,!1)}})))}_linkHover(e,i,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(n,i.text)}_fireUnderlineEvent(e,i){let n=e.range,a=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-a-1,n.end.x,n.end.y-a-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)}_linkLeave(e,i,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(n,i.text)}_linkAtPosition(e,i){let n=e.range.start.y*this._bufferService.cols+e.range.start.x,a=e.range.end.y*this._bufferService.cols+e.range.end.x,o=i.y*this._bufferService.cols+i.x;return n<=o&&o<=a}_positionFromMouseEvent(e,i,n){let a=n.getCoords(e,i,this._bufferService.cols,this._bufferService.rows);if(a)return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,i,n,a,o){return{x1:e,y1:i,x2:n,y2:a,cols:this._bufferService.cols,fg:o}}};xd=lt([he(1,Bd),he(2,xs),he(3,Xt),he(4,Qv)],xd);function e2(e,i){return e.text===i.text&&e.range.start.x===i.range.start.x&&e.range.start.y===i.range.start.y&&e.range.end.x===i.range.end.x&&e.range.end.y===i.range.end.y}var t2=class extends IC{constructor(e={}){super(e),this._linkifier=this._register(new kn),this.browser=g0,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new kn),this._onCursorMove=this._register(new se),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new se),this.onKey=this._onKey.event,this._onRender=this._register(new se),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new se),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new se),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new se),this.onBell=this._onBell.event,this._onFocus=this._register(new se),this._onBlur=this._register(new se),this._onA11yCharEmitter=this._register(new se),this._onA11yTabEmitter=this._register(new se),this._onWillOpen=this._register(new se),this._setup(),this._decorationService=this._instantiationService.createInstance($C),this._instantiationService.setService(Za,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Wx),this._instantiationService.setService(Qv,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Wu)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(i=>this.refresh(i?.start??0,i?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(i=>this._reportWindowsOptions(i))),this._register(this._inputHandler.onColor(i=>this._handleColorEvent(i))),this._register(qt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(qt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(qt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(qt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(i=>this._afterResize(i.cols,i.rows))),this._register(Je(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let i of e){let n,a="";switch(i.index){case 256:n="foreground",a="10";break;case 257:n="background",a="11";break;case 258:n="cursor",a="12";break;default:n="ansi",a="4;"+i.index}switch(i.type){case 0:let o=Ze.toColorRGB(n==="ansi"?this._themeService.colors.ansi[i.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${V.ESC}]${a};${qC(o)}${m0.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(c=>c.ansi[i.index]=St.toColor(...i.color));else{let c=n;this._themeService.modifyColors(d=>d[c]=St.toColor(...i.color))}break;case 2:this._themeService.restoreColor(i.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(qo,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(V.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(V.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,i=this.buffer.lines.get(e);if(!i)return;let n=Math.min(this.buffer.x,this.cols-1),a=this._renderService.dimensions.css.cell.height,o=i.getWidth(n),c=this._renderService.dimensions.css.cell.width*o,d=this.buffer.y*this._renderService.dimensions.css.cell.height,_=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=_+"px",this.textarea.style.top=d+"px",this.textarea.style.width=c+"px",this.textarea.style.height=a+"px",this.textarea.style.lineHeight=a+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(be(this.element,"copy",i=>{this.hasSelection()&&nw(i,this._selectionService)}));let e=i=>aw(i,this.textarea,this.coreService,this.optionsService);this._register(be(this.textarea,"paste",e)),this._register(be(this.element,"paste",e)),v0?this._register(be(this.element,"mousedown",i=>{i.button===2&&og(i,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(be(this.element,"contextmenu",i=>{og(i,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),Pd&&this._register(be(this.element,"auxclick",i=>{i.button===1&&Gv(i,this.textarea,this.screenElement)}))}_bindKeys(){this._register(be(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(be(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(be(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(be(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(be(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(be(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(be(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let i=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),i.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(be(this.screenElement,"mousemove",o=>this.updateCursorStyle(o))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),i.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Pu.get()),b0||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(Yx,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(ws,this._coreBrowserService),this._register(be(this.textarea,"focus",o=>this._handleTextAreaFocus(o))),this._register(be(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(ud,this._document,this._helperContainer),this._instantiationService.setService(Ko,this._charSizeService),this._themeService=this._instantiationService.createInstance(md),this._instantiationService.setService(Tn,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(Ho),this._instantiationService.setService(Zv,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(fd,this.rows,this.screenElement)),this._instantiationService.setService(xs,this._renderService),this._register(this._renderService.onRenderedViewportChange(o=>this._onRender.fire(o))),this.onResize(o=>this._renderService.resize(o.cols,o.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(od,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(dd),this._instantiationService.setService(Bd,this._mouseService);let a=this._linkifier.value=this._register(this._instantiationService.createInstance(xd,this.screenElement));this.element.appendChild(i);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(ad,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(o=>{super.scrollLines(o,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(_d,this.element,this.screenElement,a)),this._instantiationService.setService(_w,this._selectionService),this._register(this._selectionService.onRequestScrollLines(o=>this.scrollLines(o.amount,o.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(o=>this._renderService.handleSelectionChanged(o.start,o.end,o.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(o=>{this.textarea.value=o,this.textarea.focus(),this.textarea.select()})),this._register(qt.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(ld,this.screenElement)),this._register(be(this.element,"mousedown",o=>this._selectionService.handleMouseDown(o))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(qo,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",o=>this._handleScreenReaderModeOptionChange(o))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(zo,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",o=>{!this._overviewRulerRenderer&&o&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(zo,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(cd,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,i=this.element;function n(c){let d=e._mouseService.getMouseReportCoords(c,e.screenElement);if(!d)return!1;let _,m;switch(c.overrideType||c.type){case"mousemove":m=32,c.buttons===void 0?(_=3,c.button!==void 0&&(_=c.button<3?c.button:3)):_=c.buttons&1?0:c.buttons&4?1:c.buttons&2?2:3;break;case"mouseup":m=0,_=c.button<3?c.button:3;break;case"mousedown":m=1,_=c.button<3?c.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(c)===!1)return!1;let f=c.deltaY;if(f===0||e.coreMouseService.consumeWheelEvent(c,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return!1;m=f<0?0:1,_=4;break;default:return!1}return m===void 0||_===void 0||_>4?!1:e.coreMouseService.triggerMouseEvent({col:d.col,row:d.row,x:d.x,y:d.y,button:_,action:m,ctrl:c.ctrlKey,alt:c.altKey,shift:c.shiftKey})}let a={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o={mouseup:c=>(n(c),c.buttons||(this._document.removeEventListener("mouseup",a.mouseup),a.mousedrag&&this._document.removeEventListener("mousemove",a.mousedrag)),this.cancel(c)),wheel:c=>(n(c),this.cancel(c,!0)),mousedrag:c=>{c.buttons&&n(c)},mousemove:c=>{c.buttons||n(c)}};this._register(this.coreMouseService.onProtocolChange(c=>{c?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(c)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),c&8?a.mousemove||(i.addEventListener("mousemove",o.mousemove),a.mousemove=o.mousemove):(i.removeEventListener("mousemove",a.mousemove),a.mousemove=null),c&16?a.wheel||(i.addEventListener("wheel",o.wheel,{passive:!1}),a.wheel=o.wheel):(i.removeEventListener("wheel",a.wheel),a.wheel=null),c&2?a.mouseup||(a.mouseup=o.mouseup):(this._document.removeEventListener("mouseup",a.mouseup),a.mouseup=null),c&4?a.mousedrag||(a.mousedrag=o.mousedrag):(this._document.removeEventListener("mousemove",a.mousedrag),a.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(be(i,"mousedown",c=>{if(c.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(c)))return n(c),a.mouseup&&this._document.addEventListener("mouseup",a.mouseup),a.mousedrag&&this._document.addEventListener("mousemove",a.mousedrag),this.cancel(c)})),this._register(be(i,"wheel",c=>{if(!a.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(c)===!1)return!1;if(!this.buffer.hasScrollback){if(c.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(c,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return this.cancel(c,!0);let d=V.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(c.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(d,!0),this.cancel(c,!0)}}},{passive:!1}))}refresh(e,i){this._renderService?.refreshRows(e,i)}updateCursorStyle(e){this._selectionService?.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,i){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,i),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let i=e-this._bufferService.buffer.ydisp;i!==0&&this.scrollLines(i)}paste(e){Yv(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let i=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),i}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,i,n){this._selectionService.setSelection(e,i,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(e,i){this._selectionService?.selectLines(e,i)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let i=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!i&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!i&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=VC(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),n.type===3||n.type===2){let a=this.rows-1;return this.scrollLines(n.type===2?-a:a),this.cancel(e,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(n.cancel&&this.cancel(e,!0),!n.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===V.ETX||n.key===V.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,i){let n=e.isMac&&!this.options.macOptionIsMeta&&i.altKey&&!i.ctrlKey&&!i.metaKey||e.isWindows&&i.altKey&&i.ctrlKey&&!i.metaKey||e.isWindows&&i.getModifierState("AltGraph");return i.type==="keypress"?n:n&&(!i.keyCode||i.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(i2(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let i;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)i=e.charCode;else if(e.which===null||e.which===void 0)i=e.keyCode;else if(e.which!==0&&e.charCode!==0)i=e.which;else return!1;return!i||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(i=String.fromCharCode(i),this._onKey.fire({key:i,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let i=e.data;return this.coreService.triggerDataEvent(i,!0),this.cancel(e),!0}return!1}resize(e,i){if(e===this.cols&&i===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,i)}_afterResize(e,i){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(vt));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(V.ESC+"[I"):this.coreService.triggerDataEvent(V.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let i=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${V.ESC}[4;${n};${i}t`);break;case 1:let a=this._renderService.dimensions.css.cell.width.toFixed(0),o=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${V.ESC}[6;${o};${a}t`);break}}cancel(e,i){if(!(!this.options.cancelEvents&&!i))return e.preventDefault(),e.stopPropagation(),!1}};function i2(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var s2=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,i){let n={instance:i,dispose:i.dispose,isDisposed:!1};this._addons.push(n),i.dispose=()=>this._wrappedAddonDispose(n),i.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let i=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===e){i=n;break}if(i===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(i,1)}},r2=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,i){if(!(e<0||e>=this._line.length))return i?(this._line.loadCell(e,i),i):this._line.loadCell(e,new Di)}translateToString(e,i,n){return this._line.translateToString(e,i,n)}},Jg=class{constructor(e,i){this._buffer=e,this.type=i}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let i=this._buffer.lines.get(e);if(i)return new r2(i)}getNullCell(){return new Di}},n2=class extends Me{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new se),this.onBufferChange=this._onBufferChange.event,this._normal=new Jg(this._core.buffers.normal,"normal"),this._alternate=new Jg(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},a2=class{constructor(e){this._core=e}registerCsiHandler(e,i){return this._core.registerCsiHandler(e,n=>i(n.toArray()))}addCsiHandler(e,i){return this.registerCsiHandler(e,i)}registerDcsHandler(e,i){return this._core.registerDcsHandler(e,(n,a)=>i(n,a.toArray()))}addDcsHandler(e,i){return this.registerDcsHandler(e,i)}registerEscHandler(e,i){return this._core.registerEscHandler(e,i)}addEscHandler(e,i){return this.registerEscHandler(e,i)}registerOscHandler(e,i){return this._core.registerOscHandler(e,i)}addOscHandler(e,i){return this.registerOscHandler(e,i)}},l2=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},o2=["cols","rows"],Yi=0,h2=class extends Me{constructor(e){super(),this._core=this._register(new t2(e)),this._addonManager=this._register(new s2),this._publicOptions={...this._core.options};let i=a=>this._core.options[a],n=(a,o)=>{this._checkReadonlyOptions(a),this._core.options[a]=o};for(let a in this._core.options){let o={get:i.bind(this,a),set:n.bind(this,a)};Object.defineProperty(this._publicOptions,a,o)}}_checkReadonlyOptions(e){if(o2.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new a2(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new l2(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new n2(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let i in e)this._publicOptions[i]=e[i]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,i=!0){this._core.input(e,i)}resize(e,i){this._verifyIntegers(e,i),this._core.resize(e,i)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,i,n){this._verifyIntegers(e,i,n),this._core.select(e,i,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,i){this._verifyIntegers(e,i),this._core.selectLines(e,i)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,i){this._core.write(e,i)}writeln(e,i){this._core.write(e),this._core.write(`\r
`,i)}paste(e){this._core.paste(e)}refresh(e,i){this._verifyIntegers(e,i),this._core.refresh(e,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return Pu.get()},set promptLabel(e){Pu.set(e)},get tooMuchOutput(){return Yu.get()},set tooMuchOutput(e){Yu.set(e)}}}_verifyIntegers(...e){for(Yi of e)if(Yi===1/0||isNaN(Yi)||Yi%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(Yi of e)if(Yi&&(Yi===1/0||isNaN(Yi)||Yi%1!==0||Yi<0))throw new Error("This API only accepts positive integers")}};var c2=2,u2=1,d2=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let i=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(i._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let e=this._terminal._core._renderService.dimensions;if(e.css.cell.width===0||e.css.cell.height===0)return;let i=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,n=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(n.getPropertyValue("height")),o=Math.max(0,parseInt(n.getPropertyValue("width"))),c=window.getComputedStyle(this._terminal.element),d={top:parseInt(c.getPropertyValue("padding-top")),bottom:parseInt(c.getPropertyValue("padding-bottom")),right:parseInt(c.getPropertyValue("padding-right")),left:parseInt(c.getPropertyValue("padding-left"))},_=d.top+d.bottom,m=d.right+d.left,f=a-_,y=o-m-i;return{cols:Math.max(c2,Math.floor(y/e.css.cell.width)),rows:Math.max(u2,Math.floor(f/e.css.cell.height))}}};const ev="src/games",tv="https://jhgame.vercel.app",f2={"/defense":"  ","/zombie":":  ","/baseball":"","/proverb":" "},_2={"/defense":"      .","/zombie":"    .","/baseball":"   !   .","/proverb":"   !   ."},iv=["","","","","","","","","",""],sv=["bg-indigo-900","bg-green-900","bg-blue-900","bg-slate-800","bg-red-900","bg-emerald-900","bg-cyan-900","bg-violet-900","bg-amber-900","bg-zinc-800"];function A0(e){return Array.from(String(e||"")).reduce((i,n)=>i+n.charCodeAt(0),0)}function Ao(e){return iv[A0(e)%iv.length]}function No(e){return sv[A0(e)%sv.length]}function ir(e){const i=String(e||"").trim();if(!i)return"";const a=(i.startsWith("/")?i:`/${i}`).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9/_-]/g,"-").replace(/-+/g,"-").replace(/\/+/g,"/");return a==="/"?"":a}function N0(e){const i=ir(e);if(!i)return"";const n=i.split("/").filter(Boolean);return Cd(n[n.length-1]||"")}function Po(e){const i=En(e?.path),n="/src/games/",a=i.indexOf(n);if(a===-1)return"";const o=i.slice(a+n.length).split("/")[0];return ir(`/${o}`)}function m2(e){const i=En(e?.path),n="/src/games/",a=i.indexOf(n);if(a!==-1){const o=i.slice(a+n.length).split("/")[0];return Cd(o)}return Array.isArray(e?.tags)&&e.tags.includes("local-game")&&e.tags[1]?Cd(e.tags[1]):N0(e?.routePath||e?.pathAlias||"")}function rv(e){return String(e||"").trim().toLowerCase().replace(/^\//,"").replace(/[\s_-]+/g,"")}function p2(e,i){if(!i)return!1;const n=String(i).split("/").filter(Boolean).pop()||"",a=rv(e),o=rv(n);return!a||a===o}function kr(e){const i=ir(e.routePath||e.pathAlias||Po(e)),n=String(e.description||e.desc||"").trim()||_2[i]||"",a=String(e.name||"").trim(),o=p2(a,i)?f2[i]||a||" ":a,c=o||i||e.id||e.path;return{...e,name:o,description:n,desc:n,routePath:i,pathAlias:i,icon:e.icon||Ao(c),color:e.color||No(c),tags:Array.isArray(e.tags)?e.tags:[],createdAt:e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt||new Date().toISOString()}}function nv(e,i){const n=new Map(i.map(o=>[o.id,kr(o)])),a=[...e];return n.forEach((o,c)=>{const d=a.findIndex(S=>S.id===c);if(d===-1){a.unshift(o);return}const _=kr(a[d]),m=String(_.name||o.name||"").trim()||o.name,f=String(_.description||_.desc||o.description||o.desc||"").trim(),y=ir(_.routePath||_.pathAlias||o.routePath||o.pathAlias||"");a[d]=kr({...o,..._,path:o.path,version:o.version,packageManager:o.packageManager,scripts:o.scripts,engineType:o.engineType,git:o.git,lastModified:o.lastModified,gamesRootRelative:o.gamesRootRelative,gameFolders:o.gameFolders,name:m,description:f,desc:f,routePath:y,pathAlias:y,icon:_.icon||o.icon,color:_.color||o.color,tags:Array.isArray(_.tags)&&_.tags.length>0?_.tags:o.tags})}),a}function Cd(e){return String(e||"").trim().replace(/[\\/]+/g,"-").replace(/\s+/g,"-").replace(/[^\p{L}\p{N}._-]/gu,"").replace(/-+/g,"-").replace(/^[.-]+/,"").slice(0,64)}function En(e){return String(e||"").replace(/\\/g,"/")}function av(e){const i=En(e),a=i.indexOf("/src/games/");return a===-1?null:i.slice(0,a)||"/"}function lv(e){const i=String(e||"").match(/https?:\/\/[^\s"'`<>]+/g)||[];if(i.length===0)return"";const n=i.map(a=>a.replace(/[),.;\]}]+$/,""));return n.find(a=>a.includes(".vercel.app"))||n[0]||""}const g2=["git-root","git-remote","git-add","git-diff","git-commit","git-push","vercel-deploy"],v2=.2,S2=.8,ov=14,y2={"git-root":"  ","git-remote":"origin ","git-add":" ","git-diff":" ","git-commit":" ","git-push":" ","vercel-deploy":"Vercel "};function hv(){return g2.map(e=>({stepKey:e,label:y2[e]||e,status:"pending"}))}function cv(e,i,n){return e.map(a=>a.stepKey===i?{...a,...n(a)}:a)}function uv(e,i=18e3){const n=String(e||"");return n.length<=i?n:n.slice(n.length-i)}function b2(e){return Math.min(S2,Math.max(v2,e))}function w2(e){if(!e)return"";const i=ir(e.routePath||e.pathAlias||Po(e))||"/";return typeof window>"u"?i:`${window.location.origin}${i}`}function Au(){const[e,i]=C.useState([]),[n,a]=C.useState(!1),[o,c]=C.useState(null),[d,_]=C.useState(!1),[m,f]=C.useState({name:"",description:"",routePath:""}),[y,S]=C.useState("create"),[b,M]=C.useState(null),[E,D]=C.useState(""),[j,z]=C.useState(!1),[H,Z]=C.useState(!1),[J,ae]=C.useState(!1),[ie,re]=C.useState(""),[ve,le]=C.useState(()=>hv()),[_e,ye]=C.useState(""),[ee,N]=C.useState(""),[X,te]=C.useState(null),[T,G]=C.useState(0),[W,ce]=C.useState(.4),[U,w]=C.useState(!1),[k,Y]=C.useState(!1),[Q,ne]=C.useState(null),oe=C.useRef(null),we=C.useRef(null),qe=C.useRef(null),Oe=C.useRef(null),ot=C.useRef(new Map),yt=C.useRef(new Map),bt=C.useRef(new Map),ke=C.useRef(null),Wt=C.useRef(()=>{}),Nr=C.useRef(null);function An(q){const $=ot.current.get(q);$&&($.disposed=!0,$.inputDisposable&&$.inputDisposable.dispose(),$.terminal&&$.terminal.dispose(),$.hostElement&&$.hostElement.parentNode&&$.hostElement.parentNode.removeChild($.hostElement),ot.current.delete(q))}function Nn(q){const $=ot.current.get(q);!$||!$.fitAddon||!$.terminal||($.fitAddon.fit(),$.sessionId&&I1({sessionId:$.sessionId,cols:$.terminal.cols,rows:$.terminal.rows}).catch(()=>{}))}function Bn(q){ot.current.forEach(($,me)=>{$.hostElement&&($.hostElement.style.display=me===q?"block":"none")}),ke.current=q||null,q&&Nn(q)}function Br(q,$){q.disposed||q.sessionId||q.sessionPromise||(q.terminal.reset(),q.terminal.writeln(`[${$.name}] Gemini   ...`),q.sessionPromise=W1({projectPath:$.path,cols:q.terminal.cols,rows:q.terminal.rows,model:"auto",fastMode:!0}).then(me=>{if(!me||!me.sessionId){q.disposed||q.terminal.writeln(`\r
[   ]`);return}if(q.disposed){sg({sessionId:me.sessionId}).catch(()=>{});return}q.sessionId=me.sessionId,yt.current.set($.id,me.sessionId),bt.current.set(me.sessionId,$.id),ke.current===$.id&&Nn($.id)}).catch(me=>{if(q.disposed)return;const Te=me instanceof Error?me.message:"  ";q.terminal.writeln(`\r
[] ${Te}`)}).finally(()=>{q.sessionPromise=null}))}async function Ln(q){if(!qe.current)return null;const $=ot.current.get(q.id);if($)return Br($,q),$;const me=document.createElement("div");me.className="terminal-pty-instance",me.style.display="none",qe.current.appendChild(me);const Te=new h2({cursorBlink:!0,convertEol:!0,fontFamily:"JetBrains Mono, monospace",fontSize:14,lineHeight:1.2,theme:{background:"#040913",foreground:"#d9e9ff",cursor:"#f9a03f",selectionBackground:"#2a3240"}}),ue=new d2;Te.loadAddon(ue),Te.open(me);const ge={projectId:q.id,hostElement:me,terminal:Te,fitAddon:ue,sessionId:null,sessionPromise:null,inputDisposable:null,disposed:!1};return ge.inputDisposable=Te.onData(Ue=>{ge.sessionId&&K1({sessionId:ge.sessionId,data:Ue}).catch(()=>{})}),ot.current.set(q.id,ge),Br(ge,q),ge}function sr(q){const $=yt.current.get(q);$&&(yt.current.delete(q),bt.current.delete($),sg({sessionId:$}).catch(()=>{})),ke.current===q&&(ke.current=null),An(q)}C.useEffect(()=>{let q=!0;async function $(){try{const me=await jv();if(!q)return;const Te=(me.projects||[]).map(kr);let ue=Te;if(ps()){const ge=await qu();if(!q)return;ge.length>0&&(ue=nv(Te,ge))}i(ue),a(!0),c(ue[0]?.id||null)}catch{if(!q)return;i([]),a(!0),c(null)}}return $(),()=>{q=!1}},[]),C.useEffect(()=>{n&&H1({projects:e}).catch(()=>{})},[n,e]);const el=C.useMemo(()=>[...e].sort((q,$)=>new Date($.updatedAt).valueOf()-new Date(q.updatedAt).valueOf()),[e]),st=C.useMemo(()=>o&&e.find(q=>q.id===o)||null,[e,o]),Rt=C.useMemo(()=>w2(st),[st?.id,st?.routePath,st?.pathAlias,st?.path]),Lr=d||J;C.useEffect(()=>{if(e.length===0){o&&c(null);return}(!o||!e.some(q=>q.id===o))&&c(e[0].id)},[e,o]),C.useEffect(()=>{if(!ps())return;const q=new Set(e.map($=>$.id));Array.from(yt.current.keys()).forEach($=>{q.has($)||sr($)})},[e]),C.useEffect(()=>{if(!ps())return;let q=!1;return U1().then($=>{q||!$||ne(En($))}).catch(()=>{}),()=>{q=!0}},[]);function On(){const q=e.find(ue=>Array.isArray(ue.tags)&&ue.tags.includes("workspace"));if(q?.path)return q.path;const $=e.find(ue=>ue.id===o),me=av($?.path);if(me)return me;const Te=e.map(ue=>av(ue.path)).find(Boolean);return Te||Q||null}function tl(){f({name:"",description:"",routePath:""}),S("create"),M(null),D(""),_(!0)}function Or(q){if(!q)return;const $=ir(q.routePath||q.pathAlias||Po(q));f({name:String(q.name||"").trim(),description:String(q.description||q.desc||"").trim(),routePath:$}),S("edit"),M(q.id),D(""),_(!0)}function zn(){_(!1),S("create"),M(null),D("")}async function il(q){if(q.preventDefault(),j)return;const $=y==="edit"&&!!b,me=$&&e.find(ht=>ht.id===b)||null,Te=String(m.name||"").trim();if(!Te){D("( ) .");return}if(!/[-]/.test(Te)){D("   .");return}const ue=ir(m.routePath);if(!ue){D("path . : /proverb");return}if($&&!me){D("   .");return}const ge=Te,Ue=String(m.description||"").trim(),Ve=new Date().toISOString();z(!0),D("");try{let ht;if($&&me)ht=kr({...me,name:ge,description:Ue,desc:Ue,routePath:ue,pathAlias:ue,icon:me.icon||Ao(ge),color:me.color||No(ge),updatedAt:Ve});else{const ct=N0(ue);if(!ct)throw new Error("path      .");const mi=On();if(!mi)throw new Error("    .");const $i=En(`${mi}/${ev}/${ct}`);if(ps()){await q1({projectPath:mi,folderName:ct});const zi=await j1($i);if(!zi)throw new Error("   .");ht=kr({...zi,name:ge,description:Ue,desc:Ue,routePath:ue,pathAlias:ue,icon:Ao(ge),color:No(ge),engineType:zi.engineType==="General"?"Game Module":zi.engineType,tags:["local-game",ct],updatedAt:Ve});const Cs=await qu();Cs.length>0&&i($o=>nv($o,Cs))}else ht=kr({id:`local-${ct}-${Date.now()}`,name:ge,description:Ue,desc:Ue,routePath:ue,pathAlias:ue,path:$i,version:null,packageManager:"npm",scripts:[],engineType:"Game Module",git:!1,lastModified:Ve,gamesRootRelative:ev,gameFolders:[],tags:["local-game",ct],icon:Ao(ge),color:No(ge),updatedAt:Ve})}i(ct=>{const mi=ct.findIndex(zi=>zi.id===ht.id);if(mi===-1)return[ht,...ct];const $i=[...ct];return $i[mi]={...$i[mi],...ht},$i}),c(ht.id),_(!1),S("create"),M(null),f({name:"",description:"",routePath:""})}catch(ht){const ct=ht instanceof Error?ht.message:"  .";D(ct)}finally{z(!1)}}async function Vo(q){if(!q)return;const $=e.find(ge=>ge.id===q),me=$?$.name:"";if(!window.confirm(`"${me}"  ?`))return;if(ps()&&$){const ge=On(),Ue=m2($),Ve=Array.isArray($.tags)&&$.tags.includes("local-game"),ht=En($.path).includes("/src/games/");if(ge&&Ue&&(Ve||ht))try{await P1({projectPath:ge,folderName:Ue})}catch(ct){const mi=ct instanceof Error?ct.message:"   ";if(!mi.includes(" ")){window.alert(mi);return}}}sr(q);const ue=e.filter(ge=>ge.id!==q);i(ue),o===q&&c(ue[0]?.id||null)}async function Xo(){if(H){ae(!0);return}if(!st||!window.confirm(" ?"))return;const $=`deploy-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;Nr.current=$,ae(!0),re(" ..."),le(hv()),ye(""),N(""),te(null),Z(!0);try{const me=ir(st.routePath||st.pathAlias||Po(st)),Te=await G1({projectPath:st.path,routePath:me,requestId:$}),ue=[Te.stdout,Te.stderr].filter(Boolean).join(`
`),ge=lv(ue);if(ge&&N(ge),ue&&ye(Ue=>uv(`${Ue}${Ue?`
`:""}${ue}`)),Te.timedOut){re("  ."),te(!1);return}if(Te.exitCode===0){re(ge?` : ${ge}`:" "),te(!0);return}re(" "),te(!1)}catch(me){const Te=me instanceof Error?me.message:"    .";re(Te),te(!1)}finally{Z(!1)}}function Xi(){ae(!1)}function Kt(q){q.preventDefault(),w(!0)}function Oi(){Y1(tv).catch(()=>{})}return C.useEffect(()=>{if(!U)return;function q(me){const Te=Oe.current;if(!Te)return;const ue=Te.getBoundingClientRect();if(!ue||ue.width<=0)return;const ge=b2((me.clientX-ue.left)/ue.width);ce(ge)}function $(){w(!1)}return document.body.style.cursor="col-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",q),window.addEventListener("mouseup",$),window.addEventListener("blur",$),()=>{document.body.style.cursor="",document.body.style.userSelect="",window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",$),window.removeEventListener("blur",$)}},[U]),C.useEffect(()=>{if(!ps()||!qe.current)return;const q=F1(({sessionId:ue,data:ge})=>{const Ue=bt.current.get(ue);if(!Ue)return;const Ve=ot.current.get(Ue);!Ve||Ve.disposed||!Ve.terminal||Ve.terminal.write(ge)}),$=V1(({sessionId:ue,exitCode:ge})=>{const Ue=bt.current.get(ue);if(!Ue)return;yt.current.get(Ue)===ue&&yt.current.delete(Ue),bt.current.delete(ue);const Ve=ot.current.get(Ue);!Ve||Ve.disposed||(Ve.sessionId=null,Ve.terminal.writeln(`\r
[ : ${ge}]`))});function me(){const ue=ke.current;ue&&Nn(ue)}Wt.current=me;const Te=new ResizeObserver(()=>me());return Te.observe(qe.current),window.addEventListener("resize",me),()=>{q(),$(),Te.disconnect(),window.removeEventListener("resize",me),Wt.current=()=>{};const ue=new Set([...yt.current.keys(),...ot.current.keys()]);Array.from(ue).forEach(ge=>{sr(ge)}),yt.current.clear(),bt.current.clear(),ot.current.clear(),ke.current=null}},[]),C.useEffect(()=>{if(!ps())return;const q=X1($=>{const me=String($?.requestId||"");if(!me||me!==Nr.current)return;const Te=String($?.type||"");if(Te==="status"){const ue=String($?.message||"").trim();ue&&re(ue);return}if(Te==="step-start"){const ue=String($?.stepKey||"");if(!ue)return;le(ge=>cv(ge,ue,()=>({status:"running"})));return}if(Te==="step-end"){const ue=String($?.stepKey||"");if(!ue)return;const ge=Number($?.exitCode),Ve=!!$?.timedOut?"error":ge===0?"done":"error";le(ht=>cv(ht,ue,()=>({status:Ve})));return}if(Te==="output"){const ue=String($?.chunk||"");if(!ue)return;ye(Ue=>uv(`${Ue}${ue}`));const ge=lv(ue);ge&&N(ge);return}if(Te==="complete"){const ue=!!$?.ok,ge=String($?.message||"").trim();te(ue),ge&&re(ge)}});return()=>{q()}},[]),C.useEffect(()=>{if(!ps()||!qe.current)return;let q=!1;async function $(){if(!st){Bn(null);return}const me=await Ln(st);q||!me||(Bn(st.id),me.sessionPromise&&await me.sessionPromise,q||Wt.current())}return $(),()=>{q=!0}},[st?.id,st?.path,st?.name]),C.useEffect(()=>{if(!k||Lr)return;function q($){const me=$.target;me instanceof Node&&(oe.current?.contains(me)||we.current?.contains(me)||Y(!1))}return document.addEventListener("mousedown",q),document.addEventListener("touchstart",q,{passive:!0}),()=>{document.removeEventListener("mousedown",q),document.removeEventListener("touchstart",q)}},[k,Lr]),C.useEffect(()=>{if(!Lr)return;function q($){if($.key==="Escape"){if($.preventDefault(),d){zn();return}J&&Xi()}}return document.addEventListener("keydown",q),()=>{document.removeEventListener("keydown",q)}},[Lr,d,J]),g.jsxs("div",{className:"manager-shell h-screen box-border text-[#E8F0FA] p-3 overflow-hidden",children:[g.jsx("div",{className:"manager-noise","aria-hidden":"true"}),g.jsx("div",{ref:oe,className:`manager-floating-menu ${k?"is-open":"is-collapsed"}`,children:g.jsxs("section",{className:"panel-shell manager-floating-menu-panel p-3 h-full flex flex-col overflow-hidden",children:[g.jsxs("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto custom-scrollbar pr-1",children:[el.length===0&&g.jsx("div",{className:"rounded-2xl border border-dashed border-[#38506A] px-4 py-5 text-sm text-[#8FA4B8]",children:" ."}),el.map(q=>g.jsxs("div",{className:"project-card-wrap",children:[g.jsx("div",{className:`project-card ${q.id===o?"is-active":""}`,onClick:()=>c(q.id),onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),c(q.id))},role:"button",tabIndex:0,"aria-pressed":q.id===o,children:g.jsx("h3",{className:"text-[14px] leading-tight font-semibold tracking-tight",children:q.name})}),g.jsxs("div",{className:"project-card-actions",children:[g.jsx("button",{className:"project-card-action project-card-edit",onClick:()=>Or(q),type:"button","aria-label":`${q.name} `,children:g.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",focusable:"false",children:g.jsx("path",{d:"M3 17.25V21h3.75L17.8 9.95l-3.75-3.75L3 17.25zm2.92 2.33H5v-.92l8.07-8.07.92.92L5.92 19.58zM20.71 7.04a1 1 0 0 0 0-1.41L18.37 3.3a1 1 0 0 0-1.41 0L15.1 5.16l3.75 3.75 1.86-1.87z",fill:"currentColor"})})}),g.jsx("button",{className:"project-card-action project-card-delete",onClick:()=>Vo(q.id),type:"button","aria-label":`${q.name} `,children:g.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",focusable:"false",children:g.jsx("path",{d:"M9 3h6l1 2h4v2H4V5h4l1-2zm1 6h2v8h-2V9zm4 0h2v8h-2V9zM8 9h2v8H8V9zm-1 12h10a2 2 0 0 0 2-2V8H5v11a2 2 0 0 0 2 2z",fill:"currentColor"})})})]})]},q.id))]}),g.jsxs("div",{className:"mt-3 shrink-0 flex items-center gap-2",children:[g.jsx("button",{className:"manager-btn flex-1 h-10 px-4 text-[14px] whitespace-nowrap",onClick:Xo,type:"button",disabled:!st,children:H?" ...":""}),g.jsx("button",{className:"manager-btn manager-btn-primary flex-1 h-10 px-3 text-[14px]",onClick:tl,type:"button",children:" "})]})]})}),g.jsx("button",{ref:we,className:`manager-menu-toggle ${k?"is-open":"is-collapsed"}`,type:"button",onClick:()=>Y(q=>!q),"aria-label":k?" ":" ",children:k?g.jsx("svg",{viewBox:"0 0 20 20",width:"20",height:"20","aria-hidden":"true",focusable:"false",children:g.jsx("path",{d:"M5 5 15 15M15 5 5 15",fill:"none",stroke:"currentColor",strokeWidth:"2.6",strokeLinecap:"round"})}):g.jsxs("svg",{viewBox:"0 0 20 20",width:"20",height:"20","aria-hidden":"true",focusable:"false",children:[g.jsx("rect",{x:"3",y:"3.7",width:"14",height:"2.6",rx:"1.3",fill:"currentColor"}),g.jsx("rect",{x:"3",y:"8.7",width:"14",height:"2.6",rx:"1.3",fill:"currentColor"}),g.jsx("rect",{x:"3",y:"13.7",width:"14",height:"2.6",rx:"1.3",fill:"currentColor"})]})}),g.jsx("main",{className:"relative z-10 h-full",children:g.jsxs("div",{ref:Oe,className:`manager-main-split ${U?"is-resizing":""}`,children:[g.jsx("section",{className:"panel-shell manager-main-outer-panel manager-main-outer-panel-left p-0 h-full min-w-0 overflow-hidden",style:{flex:`0 0 calc(${W*100}% - ${ov/2}px)`},children:g.jsxs("div",{className:"h-full relative",children:[g.jsx("div",{ref:qe,className:"terminal-pty-host manager-center-terminal-host manager-main-content-surface"}),!st&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[#95A8BA] text-center pointer-events-none",children:g.jsx("p",{children:" ."})})]})}),g.jsx("div",{className:`manager-splitter ${U?"is-active":""}`,onMouseDown:Kt,role:"separator","aria-orientation":"vertical","aria-label":"  "}),g.jsxs("section",{className:"panel-shell manager-main-outer-panel manager-main-outer-panel-right p-0 h-full min-w-0 flex flex-col overflow-hidden relative",style:{flex:`0 0 calc(${(1-W)*100}% - ${ov/2}px)`},children:[g.jsxs("div",{className:"manager-browser-actions",children:[g.jsx("button",{className:"manager-url-link h-8 px-3 text-[11px] leading-none font-semibold",type:"button",onClick:Oi,"aria-label":"  ",title:tv,children:""}),g.jsx("button",{className:"manager-icon-btn h-8 w-8 px-0 inline-flex items-center justify-center",type:"button",onClick:()=>G(q=>q+1),disabled:!Rt,"aria-label":" ",children:g.jsxs("svg",{viewBox:"0 0 20 20",width:"18",height:"18","aria-hidden":"true",focusable:"false",children:[g.jsx("path",{d:"M16.8 9.2a6.8 6.8 0 1 1-1.9-4.7",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round"}),g.jsx("path",{d:"M16.8 3.8v4.5h-4.5",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),g.jsx("div",{className:"manager-browser-surface manager-main-content-surface flex-1 min-h-0 overflow-hidden",children:st&&Rt?g.jsx("iframe",{title:`${st.name} `,src:Rt,className:"w-full h-full border-0 bg-[#020712]"},`${Rt}-${T}`):g.jsx("div",{className:"h-full flex items-center justify-center text-[#95A8BA] text-sm",children:" ."})})]})]})}),d&&g.jsx("div",{className:"manager-modal-backdrop",onClick:zn,role:"presentation",children:g.jsxs("div",{className:"manager-modal-card",role:"dialog","aria-modal":"true","aria-label":y==="edit"?" ":" ",onClick:q=>q.stopPropagation(),children:[g.jsx("h3",{className:"text-lg font-semibold",children:y==="edit"?" ":" "}),g.jsxs("form",{className:"mt-3 space-y-3",onSubmit:il,children:[g.jsx("label",{className:"manager-field-label",htmlFor:"project-add-title",children:" ( )"}),g.jsx("input",{id:"project-add-title",className:"manager-input",value:m.name,onChange:q=>f($=>({...$,name:q.target.value})),placeholder:":  ",disabled:j,autoFocus:!0}),g.jsx("label",{className:"manager-field-label",htmlFor:"project-add-description",children:""}),g.jsx("input",{id:"project-add-description",className:"manager-input",value:m.description,onChange:q=>f($=>({...$,description:q.target.value})),placeholder:":    !   .",disabled:j}),g.jsx("label",{className:"manager-field-label",htmlFor:"project-add-route-path",children:"path()"}),g.jsx("input",{id:"project-add-route-path",className:"manager-input",value:m.routePath,onChange:q=>f($=>({...$,routePath:q.target.value})),placeholder:": /proverb",disabled:j}),E&&g.jsx("p",{className:"text-sm text-[#ffb3b3]",children:E}),g.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[g.jsx("button",{className:"manager-btn inline-flex items-center justify-center leading-none h-9 px-4 text-sm",type:"button",onClick:zn,disabled:j,children:""}),g.jsx("button",{className:"manager-btn manager-btn-primary inline-flex items-center justify-center leading-none h-9 px-4 text-sm",type:"submit",disabled:j,children:j?y==="edit"?" ...":" ...":y==="edit"?"":""})]})]})]})}),J&&g.jsx("div",{className:"manager-modal-backdrop",onClick:Xi,role:"presentation",children:g.jsxs("div",{className:"manager-modal-card manager-deploy-modal",role:"dialog","aria-modal":"true","aria-label":" ",onClick:q=>q.stopPropagation(),children:[g.jsxs("div",{className:"flex items-start justify-between gap-3",children:[g.jsx("div",{children:g.jsx("h3",{className:"text-lg font-semibold",children:" "})}),g.jsx("span",{className:`text-xs font-semibold ${X==null?"text-[#b9cde0]":X?"text-[#98e7b2]":"text-[#ffb3b3]"}`,children:H?" ":X?"":""})]}),g.jsx("p",{className:"mt-3 text-sm text-[#d5e4f3]",children:ie||"  ..."}),g.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:ve.map(q=>g.jsxs("div",{className:"rounded-xl border border-[#2c4259] bg-[#08111d] px-3 py-2 flex items-center justify-between gap-3",children:[g.jsx("span",{className:"text-xs text-[#c5d5e6]",children:q.label}),g.jsx("span",{className:`text-[11px] font-semibold ${q.status==="done"?"text-[#98e7b2]":q.status==="error"?"text-[#ffb3b3]":q.status==="running"?"text-[#f9cf8d]":"text-[#7f96ac]"}`,children:q.status==="done"?"":q.status==="error"?"":q.status==="running"?"":""})]},q.stepKey))}),g.jsx("pre",{className:"manager-log mt-3 custom-scrollbar h-[260px]",children:_e||"[ ]"}),ee&&g.jsx("div",{className:"mt-2 text-xs text-[#9bc8ff] break-all",children:ee}),g.jsx("div",{className:"mt-3 flex items-center justify-end",children:g.jsx("button",{className:"manager-btn inline-flex items-center justify-center leading-none h-9 px-4 text-sm",type:"button",onClick:Xi,children:""})})]})})]})}const dv=5,Pa=70,Et=20,Vt={NORMAL:{name:"",color:"#94a3b8",prob:.65,power:15,sell:20},RARE:{name:"",color:"#38bdf8",prob:.25,power:35,sell:40},EPIC:{name:"",color:"#a855f7",prob:.08,power:85,sell:100},LEGEND:{name:"",color:"#fbbf24",prob:.015,power:220,sell:250},MYTHIC:{name:"",color:"#f43f5e",prob:.005,power:650,sell:1e3}},fv=[{id:"MG",name:"",icon:""},{id:"RL",name:"",icon:""},{id:"CN",name:"",icon:""},{id:"CR",name:"",icon:""}],Cr=new(window.AudioContext||window.webkitAudioContext);let xn=!1,Nu=null;const Bu={LOBBY:[220,0,165,0],BATTLE:[110,165,110,220],BOSS:[55,110,55,165]};let Lu=0;function Mi(e,i,n,a=.1,o=0){if(xn||Cr.state==="suspended")return;const c=Cr.currentTime+o,d=Cr.createOscillator(),_=Cr.createGain();d.type=i,d.frequency.setValueAtTime(e,c),_.gain.setValueAtTime(a,c),_.gain.exponentialRampToValueAtTime(.001,c+n),d.connect(_),_.connect(Cr.destination),d.start(c),d.stop(c+n)}const Qs={summon:()=>{Mi(880,"sine",.1,.05)},merge:()=>{Mi(440,"square",.1,.1),Mi(880,"square",.2,.05,.1)},upgrade:()=>{[440,660,880].forEach((e,i)=>Mi(e,"sawtooth",.1,.03,i*.05))},shoot:()=>{Mi(2500,"square",.02,.003)},buy:()=>{Mi(1200,"sine",.1,.05)},error:()=>{Mi(150,"sawtooth",.2,.1)},delete:()=>{Mi(300,"sawtooth",.1,.05),Mi(100,"sawtooth",.2,.1,.05)},boss:()=>{Mi(55,"sawtooth",1,.5)}},Yd={resume:()=>{Cr.state==="suspended"&&Cr.resume()},toggleMute:()=>(xn=!xn,xn),isMuted:()=>xn,startBGM:e=>{Nu&&clearInterval(Nu),Nu=setInterval(()=>{if(xn||e.isGameOver)return;let i=e.isStarted?e.enemies.some(a=>a.isBoss)?Bu.BOSS:Bu.BATTLE:Bu.LOBBY;const n=i[Lu%i.length];n>0&&Mi(n,"triangle",.12,.02),Lu%4===0&&Mi(40,"sine",.2,.05),Lu++},140)}};class _v{constructor(i,n,a){this.rankKey=i,this.rank=Vt[i],this.typeData=n,this.gridPos=a,this.x=Et+a.c*Pa+Pa/2,this.y=Et+a.r*Pa+Pa/2+40,this.range=i==="LEGEND"||i==="MYTHIC"?280:210,this.cooldown=0,this.fireRate=i==="MYTHIC"?10:i==="LEGEND"?18:32,this.rotation=0}draw(i,n,a){const o=this.rankKey==="MYTHIC";if(i.save(),i.translate(this.x,this.y),i.fillStyle="#1e293b",i.fillRect(-22,-24,8,48),i.fillRect(14,-24,8,48),i.fillStyle="#334155",i.strokeStyle=this.rank.color,i.lineWidth=1,i.beginPath(),i.roundRect(-16,-20,32,40,4),i.fill(),i.stroke(),i.save(),i.rotate(this.rotation),i.fillStyle="#0f172a",i.strokeStyle=this.rank.color,i.lineWidth=2,i.beginPath(),o)for(let c=0;c<6;c++){const d=c*Math.PI/3,_=15*Math.cos(d),m=15*Math.sin(d);c===0?i.moveTo(_,m):i.lineTo(_,m)}else i.arc(0,0,14,0,Math.PI*2);switch(i.fill(),i.stroke(),i.fillStyle="#475569",this.typeData.id){case"MG":i.fillRect(10,-6,16,4),i.fillRect(10,2,16,4);break;case"RL":i.fillRect(5,-3,22,6),i.fillStyle=this.rank.color,i.beginPath(),i.arc(28,0,4,0,Math.PI*2),i.fill();break;case"CN":i.fillRect(8,-5,24,10),i.fillRect(28,-6,6,12);break;case"CR":i.beginPath(),i.moveTo(8,-6),i.lineTo(25,-10),i.lineTo(25,10),i.lineTo(8,6),i.closePath(),i.fill();break}if(i.restore(),i.restore(),n&&(i.save(),i.beginPath(),i.arc(this.x,this.y,40,0,Math.PI*2),i.strokeStyle="#ef4444",i.lineWidth=2,i.stroke(),i.beginPath(),i.arc(this.x,this.y,this.range,0,Math.PI*2),i.fillStyle="rgba(239, 68, 68, 0.05)",i.fill(),i.fillStyle="white",i.font="bold 12px sans-serif",i.textAlign="center",i.fillText("SELECT",this.x,this.y-45),i.restore()),a){i.save();const c=Date.now()%1e3/1e3,d=.5+Math.sin(c*Math.PI)*.5;i.beginPath(),i.arc(this.x,this.y,35,0,Math.PI*2),i.strokeStyle=`rgba(16, 185, 129, ${d})`,i.lineWidth=3,i.stroke(),i.fillStyle="#10b981",i.font="bold 10px sans-serif",i.textAlign="center",i.fillText("MERGE",this.x,this.y-40),i.restore()}i.fillStyle=this.rank.color,i.font="900 10px Orbitron",i.textBaseline="bottom",i.textAlign="center",i.fillText(this.rank.name,this.x,this.y+35)}update(i,n){if(this.cooldown>0&&this.cooldown--,this.cooldown<=0&&i.enemies.length>0){const a=this.findTarget(i.enemies);if(a){this.shoot(i,a,n),this.cooldown=this.fireRate;const o=a;this.rotation=Math.atan2(o.y-this.y,o.x-this.x)}}}findTarget(i){const n=i.filter(a=>Math.sqrt((a.x-this.x)**2+(a.y-this.y)**2)<=this.range);return n.length===0?null:n.find(a=>a.isBoss)||n[0]}shoot(i,n,a){const o=this.rank.power*(1+(a-1)*.15);i.projectiles.push({x:this.x+Math.cos(this.rotation)*20,y:this.y+Math.sin(this.rotation)*20,tx:n.x,ty:n.y,target:n,power:o,speed:18,color:this.rank.color,type:this.typeData.id}),Qs.shoot()}}const x2=(e,i)=>[{x:Et,y:Et},{x:e-Et,y:Et},{x:e-Et,y:i-120},{x:Et,y:i-120},{x:Et,y:Et+10}];let mv=class{constructor(i,n=!1,a,o,c,d){this.isBoss=n,this.path=x2(o,c);let _=130;a==="EASY"?_=75:a==="NORMAL"&&(_=100);const m=n?13:1+Math.floor(i/5)*.75;this.maxHp=(70+i*_)*m,this.hp=this.maxHp,this.speed=n?.45:Math.min(3.8,1.6+i*.04),this.pathIndex=0,this.x=this.path[0].x,this.y=this.path[0].y,this.radius=14,this.bob=0}update(i){const n=this.path[this.pathIndex+1];if(!n)return!0;const a=n.x-this.x,o=n.y-this.y,c=Math.sqrt(a*a+o*o);if(c<this.speed){if(this.pathIndex++,this.pathIndex>=this.path.length-1)return!0}else this.x+=a/c*this.speed,this.y+=o/c*this.speed;return this.bob=Math.sin(i*.2)*2,!1}draw(i){i.save(),i.translate(this.x,this.y+this.bob);const n=this.isBoss?1.8:1;i.scale(n,n),i.fillStyle="#fecaca",i.beginPath(),i.arc(0,-12,5,0,Math.PI*2),i.fill(),i.fillStyle=this.isBoss?"#ef4444":"#3f6212",i.beginPath(),i.arc(0,-14,6,Math.PI,0),i.fill(),i.fillStyle=this.isBoss?"#7f1d1d":"#365314",i.fillRect(-5,-7,10,12),i.strokeStyle=this.isBoss?"#7f1d1d":"#365314",i.lineWidth=3,i.beginPath(),i.moveTo(-5,-5),i.lineTo(-9,2),i.stroke(),i.beginPath(),i.moveTo(5,-5),i.lineTo(9,2),i.stroke();const a=Math.sin(Date.now()*.01)*3;i.fillStyle="#1a2e05",i.fillRect(-4,5,3,6+a),i.fillRect(1,5,3,6-a),i.fillStyle="#1e293b",i.fillRect(4,-2,12,3),i.restore();const o=this.isBoss?60:30;i.fillStyle="#020617",i.fillRect(this.x-o/2,this.y-25,o,4),i.fillStyle=this.isBoss?"#ef4444":"#10b981",i.fillRect(this.x-o/2,this.y-25,o*(this.hp/this.maxHp),4)}};class C2{constructor(i,n){this.canvas=i,this.ctx=i.getContext("2d"),this.callbacks=n,this.canvas.width=Pa*dv+Et*2,this.canvas.height=this.canvas.width+100,this.path=[{x:Et,y:Et},{x:this.canvas.width-Et,y:Et},{x:this.canvas.width-Et,y:this.canvas.height-120},{x:Et,y:this.canvas.height-120},{x:Et,y:Et+10}],this.state={gold:500,skulls:0,life:20,wave:1,units:[],enemies:[],projectiles:[],selectedUnit:null,mergeCandidates:[],enemySpawnTimer:0,waveTimer:0,upgradeLevel:1,interestLevel:0,luckBoost:!1,isGameOver:!1,isStarted:!1,usedCodes:[],playerName:"",difficulty:"NORMAL",animationTick:0,killCount:0,bossSpawned:!1},this.loopId=null,this.lastTime=0}reset(i="NORMAL",n="Agent"){this.state={...this.state,gold:i==="EASY"?500:i==="NORMAL"?300:100,skulls:0,life:20,wave:1,units:[],enemies:[],projectiles:[],selectedUnit:null,mergeCandidates:[],enemySpawnTimer:0,waveTimer:0,upgradeLevel:1,interestLevel:0,luckBoost:!1,isGameOver:!1,isStarted:!0,playerName:n,difficulty:i,animationTick:0,killCount:0,bossSpawned:!1},this.startLoop(),Yd.startBGM(this.state),this.notifyUpdate()}startLoop(){this.loopId&&cancelAnimationFrame(this.loopId);const i=n=>{this.state.isGameOver||(this.update(),this.draw(),this.loopId=requestAnimationFrame(i))};this.loopId=requestAnimationFrame(i)}stopLoop(){this.loopId&&cancelAnimationFrame(this.loopId)}update(){const i=this.state;if(i.animationTick++,i.isStarted&&(i.enemySpawnTimer++,i.wave%10===0&&!i.bossSpawned?i.enemySpawnTimer>80&&(Qs.boss(),i.enemies.push(new mv(i.wave,!0,i.difficulty,this.canvas.width,this.canvas.height)),i.bossSpawned=!0,i.enemySpawnTimer=0):i.wave%10!==0&&(i.bossSpawned=!1,i.enemySpawnTimer>Math.max(10,60-i.wave)&&(i.enemies.push(new mv(i.wave,!1,i.difficulty,this.canvas.width,this.canvas.height)),i.enemySpawnTimer=0)),i.waveTimer++,i.waveTimer>1e3)){i.wave++,i.waveTimer=0;let n=i.difficulty==="EASY"?300:i.difficulty==="NORMAL"?200:150;i.gold+=n+i.interestLevel*100,this.notifyUpdate()}i.projectiles=i.projectiles.filter(n=>{const a=n.tx-n.x,o=n.ty-n.y,c=Math.sqrt(a*a+o*o);if(c<n.speed){if(i.enemies.includes(n.target)&&(n.target.hp-=n.power,n.target.hp<=0)){i.killCount++;let d=i.difficulty==="EASY"?5:i.difficulty==="NORMAL"?2:1;i.gold+=d,i.skulls+=n.target.isBoss?50:1,this.notifyUpdate()}return!1}return n.x+=a/c*n.speed,n.y+=o/c*n.speed,!0}),i.enemies=i.enemies.filter(n=>n.update(i.animationTick)?(i.life-=n.isBoss?5:1,this.notifyUpdate(),i.life<=0&&this.gameOver(),!1):n.hp>0),i.units.forEach(n=>n.update(i,i.upgradeLevel))}draw(){const i=this.ctx,n=this.canvas;i.clearRect(0,0,n.width,n.height),i.strokeStyle="rgba(255,255,255,0.03)",i.beginPath(),this.path.forEach((a,o)=>o===0?i.moveTo(a.x,a.y):i.lineTo(a.x,a.y)),i.stroke(),this.state.projectiles.forEach(a=>{i.save(),i.translate(a.x,a.y);const o=a.tx-a.x,c=a.ty-a.y;i.rotate(Math.atan2(c,o)),i.fillStyle=a.color,i.fillRect(-6,-2,12,4),i.restore()}),this.state.enemies.forEach(a=>a.draw(i)),this.state.units.forEach(a=>{const o=this.state.mergeCandidates&&this.state.mergeCandidates.includes(a);a.draw(i,this.state.selectedUnit===a,o)})}gameOver(){this.state.isGameOver=!0,this.stopLoop(),this.notifyUpdate(),this.callbacks.onGameOver&&this.callbacks.onGameOver(this.state)}handleClick(i,n){const a=this.state.units.find(o=>Math.abs(o.x-i)<35&&Math.abs(o.y-n)<40);if(a)if(this.state.selectedUnit&&this.state.selectedUnit!==a)if(this.state.selectedUnit.rankKey===a.rankKey&&this.state.selectedUnit.typeData.id===a.typeData.id){const o=Object.keys(Vt),c=o.indexOf(a.rankKey)+1,d=o[c];if(d&&d!=="MYTHIC"){this.state.units=this.state.units.filter(m=>m!==this.state.selectedUnit&&m!==a);const _=new _v(d,a.typeData,a.gridPos);this.state.units.push(_),this.state.selectedUnit=_,this.updateMergeCandidates(_),Qs.merge()}else this.selectUnit(a)}else this.selectUnit(a);else this.state.selectedUnit===a?(this.state.selectedUnit=null,this.state.mergeCandidates=[]):this.selectUnit(a);else this.state.selectedUnit=null,this.state.mergeCandidates=[];this.notifyUpdate()}selectUnit(i){this.state.selectedUnit=i,this.updateMergeCandidates(i)}updateMergeCandidates(i){if(!i){this.state.mergeCandidates=[];return}this.state.mergeCandidates=this.state.units.filter(n=>n!==i&&n.rankKey===i.rankKey&&n.typeData.id===i.typeData.id)}summonUnit(i,n=!1){if(this.state.gold<i||this.state.units.length>=15)return!1;this.state.gold-=i,Qs.summon();const a=Math.random();let o="NORMAL";const c=this.state.luckBoost?2:1;if(n)a<=.05*c?o="MYTHIC":a<=.2*c?o="LEGEND":a<=.5?o="EPIC":o="RARE";else{let f=0;for(const[y,S]of Object.entries(Vt)){if(y==="MYTHIC")continue;let b=S.prob;if(this.state.luckBoost&&(y==="LEGEND"||y==="EPIC")&&(b*=1.5),f+=b,a<=f){o=y;break}}}const d=this.state.units.map(f=>`${f.gridPos.r},${f.gridPos.c}`);let _,m;do _=Math.floor(Math.random()*4+1),m=Math.floor(Math.random()*dv);while(d.includes(`${_},${m}`));return this.state.units.push(new _v(o,fv[Math.floor(Math.random()*fv.length)],{r:_,c:m})),this.notifyUpdate(),!0}handleUpgrade(){this.state.skulls<150||(this.state.skulls-=150,this.state.upgradeLevel++,Qs.upgrade(),this.notifyUpdate())}sellUnit(i=null){const n=i||this.state.selectedUnit;if(!n)return;const a=Math.floor(n.rank.sell/2),o=Math.floor(n.rank.sell/4);this.state.gold+=a,this.state.skulls+=o,this.state.units=this.state.units.filter(c=>c!==n),this.state.selectedUnit===n&&(this.state.selectedUnit=null),Qs.delete(),this.notifyUpdate()}buyItem(i){if(!this.state.isStarted||this.state.isGameOver)return;let n=i==="HEAL"?150:i==="INTEREST"?400:800;return this.state.skulls>=n?(this.state.skulls-=n,i==="HEAL"?this.state.life=Math.min(40,this.state.life+5):i==="INTEREST"?this.state.interestLevel++:i==="LUCK"&&(this.state.luckBoost=!0),Qs.buy(),this.notifyUpdate(),!0):!1}redeemCode(i){if(this.state.usedCodes.includes(i))return!1;const n={_100:{gold:1e4,skulls:5e3,msg:"   !"}};if(n[i]){const a=n[i];return this.state.gold+=a.gold,this.state.skulls+=a.skulls,this.state.usedCodes.push(i),Qs.buy(),this.notifyUpdate(),!0}return!1}notifyUpdate(){this.callbacks.onStateUpdate&&this.callbacks.onStateUpdate({...this.state})}}function E2({onEngineInit:e}){const i=C.useRef(null),n=C.useRef(null);C.useEffect(()=>(i.current&&!n.current&&(n.current=new C2(i.current,{onStateUpdate:()=>{},onGameOver:()=>{}}),e&&e(n.current)),()=>{n.current&&n.current.stopLoop()}),[]);const a=o=>{if(!n.current)return;const c=i.current.getBoundingClientRect(),d=o.clientX,_=o.clientY,m=i.current.width/c.width,f=i.current.height/c.height,y=(d-c.left)*m,S=(_-c.top)*f;n.current.handleClick(y,S)};return g.jsxs("div",{"data-id":"game-canvas-container",className:"relative w-full h-full",children:[g.jsx("div",{"data-id":"game-canvas-scanline",className:"absolute w-full h-[2px] bg-red-500/10 pointer-events-none z-10 animate-[scanline_4s_linear_infinite]",style:{animationName:"scanline"}}),g.jsx("canvas",{"data-id":"game-canvas",ref:i,onMouseDown:a,onTouchStart:o=>{const c=o.touches[0];a({clientX:c.clientX,clientY:c.clientY})},className:"bg-slate-900 w-full h-auto touch-none block"})]})}function k2({onStart:e}){const[i,n]=C.useState(localStorage.getItem("defense_nickname")||""),a=()=>{if(!i.trim())return alert(" .");localStorage.setItem("defense_nickname",i),e(i,window.difficulty||"NORMAL")},o=c=>{window.difficulty=c,document.querySelectorAll(".diff-btn").forEach(_=>{_.classList.remove("border-sky-500","text-sky-500","bg-slate-800"),_.classList.add("border-slate-700","text-slate-500","bg-slate-900")});const d=document.getElementById(`diff-${c.toLowerCase()}-btn`);d&&(d.classList.remove("border-slate-700","text-slate-500","bg-slate-900"),d.classList.add("border-sky-500","text-sky-500","bg-slate-800"))};return g.jsxs("div",{"data-id":"start-container",className:"absolute inset-0 bg-slate-950 flex flex-col items-center justify-center p-4 z-40 text-center shadow-2xl overflow-hidden",children:[g.jsxs("div",{"data-id":"start-header",className:"mb-6 fade-in mt-2",children:[g.jsx("h2",{"data-id":"start-title",className:"text-3xl text-red-600 mb-2 font-black italic uppercase tracking-tighter drop-shadow-lg",children:"   "}),g.jsx("p",{"data-id":"start-subtitle",className:"text-slate-500 text-[11px] font-bold uppercase tracking-widest",children:"     "})]}),g.jsxs("div",{"data-id":"start-form",className:"w-full max-w-[340px] flex flex-col gap-3 mb-4",children:[g.jsxs("div",{"data-id":"start-name-wrapper",className:"relative group bg-slate-900 border-2 border-slate-700 rounded-xl p-1 flex items-center",children:[g.jsx("input",{"data-id":"start-name-input",type:"text",id:"name-input",value:i,onChange:c=>n(c.target.value),maxLength:8,placeholder:" ",className:"w-full bg-transparent border-none focus:ring-0 text-center font-bold text-lg text-white placeholder:text-slate-600 h-10"}),i&&g.jsx("button",{"data-id":"start-name-clear-btn",onClick:()=>n(""),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-red-900/30 hover:bg-red-600 text-red-500 hover:text-white text-xs font-bold px-3 py-1 rounded transition-all",children:""})]}),g.jsxs("div",{"data-id":"start-difficulty",className:"grid grid-cols-3 gap-3 h-12",children:[g.jsx("button",{"data-id":"start-easy-btn",id:"diff-easy-btn",onClick:()=>o("EASY"),className:"diff-btn border-2 border-slate-700 bg-slate-900 text-slate-500 rounded-xl font-bold transition-all hover:bg-slate-800 text-sm",children:""}),g.jsx("button",{"data-id":"start-normal-btn",id:"diff-normal-btn",onClick:()=>o("NORMAL"),className:"diff-btn border-2 border-sky-500 bg-slate-800 text-sky-500 rounded-xl font-bold transition-all hover:bg-slate-800 text-sm",children:""}),g.jsx("button",{"data-id":"start-hard-btn",id:"diff-hard-btn",onClick:()=>o("HARD"),className:"diff-btn border-2 border-slate-700 bg-slate-900 text-slate-500 rounded-xl font-bold transition-all hover:bg-slate-800 text-sm",children:""})]}),g.jsx("button",{"data-id":"start-play-btn",onClick:a,className:"w-full font-black italic bg-red-700 hover:bg-red-600 text-white text-xl py-3 rounded-xl shadow-lg transition-all active:scale-[0.98] border-b-4 border-red-900 tracking-widest mt-1",children:" "})]}),g.jsxs("div",{"data-id":"start-ranking",className:"w-full max-w-[340px] bg-slate-900/50 rounded-xl p-3 min-h-[100px]",children:[g.jsxs("h3",{"data-id":"start-ranking-title",className:"text-[10px] font-black text-red-500 mb-2 uppercase tracking-tighter flex items-center justify-center gap-2",children:[g.jsx("span",{"data-id":"start-ranking-indicator",className:"w-1.5 h-1.5 rounded-full bg-red-600 animate-pulse"}),"    (TOP 5)"]}),g.jsx("div",{"data-id":"start-ranking-content",className:"flex flex-col justify-center items-center h-full",children:g.jsx("div",{"data-id":"start-ranking-loading",className:"text-slate-600 text-[10px] italic",children:"   ..."})})]})]})}function R2({state:e,onShopClick:i,onInfoClick:n}){const a=()=>{const o=Yd.toggleMute();document.getElementById("mute-btn-text").innerText=o?" OFF":" ON"};return g.jsxs("div",{"data-id":"hud-container",className:"w-full bg-slate-900 border-x-2 border-t-2 border-slate-700 rounded-t-xl p-3 flex justify-between items-center shadow-lg relative z-10",children:[g.jsxs("div",{"data-id":"hud-left",className:"flex flex-col gap-1",children:[g.jsxs("h1",{"data-id":"hud-title",className:"text-lg md:text-xl text-red-500 tracking-tighter uppercase font-black italic flex items-center gap-2",children:[g.jsx("span",{"data-id":"hud-title-icon",className:"text-2xl",children:""}),"  ",g.jsx("span",{"data-id":"hud-title-subtitle",className:"text-[10px] text-slate-500 not-italic font-bold tracking-widest hidden md:inline-block",children:" "})]}),g.jsxs("div",{"data-id":"hud-currency",className:"flex gap-2",children:[g.jsxs("span",{"data-id":"hud-wave",className:"bg-slate-950 px-2 py-1 border border-slate-700 rounded text-[10px] font-bold text-slate-400",children:["WAVE ",g.jsx("span",{"data-id":"hud-wave-value",className:"text-white text-xs ml-1",children:Math.floor(e.wave)})]}),g.jsxs("span",{"data-id":"hud-gold",className:"bg-slate-950 px-2 py-1 border border-yellow-900/30 rounded text-[10px] font-bold text-yellow-500",children:["GOLD ",g.jsx("span",{"data-id":"hud-gold-value",className:"text-white text-xs ml-1",children:Math.floor(e.gold).toLocaleString()})]})]})]}),g.jsxs("div",{"data-id":"hud-right",className:"text-right flex flex-col items-end gap-1",children:[g.jsxs("div",{"data-id":"hud-buttons",className:"flex items-center gap-1 mb-1",children:[g.jsx("button",{"data-id":"hud-home-btn",onClick:()=>window.location.href="/",className:"bg-slate-800 hover:bg-slate-700 w-6 h-6 rounded flex items-center justify-center text-[10px] border border-slate-600 text-slate-400 font-bold transition-colors",children:""}),g.jsx("button",{"data-id":"hud-info-btn",onClick:n,className:"bg-slate-800 hover:bg-slate-700 w-6 h-6 rounded flex items-center justify-center text-[10px] border border-sky-500/50 text-sky-500 font-bold transition-colors",children:""}),g.jsx("button",{"data-id":"hud-mute-btn",onClick:a,className:"bg-slate-800 hover:bg-slate-700 px-2 py-0.5 h-6 rounded text-[9px] border border-slate-600 font-bold text-slate-300 uppercase transition-colors",children:g.jsx("span",{id:"mute-btn-text",children:" ON"})}),g.jsx("button",{"data-id":"hud-shop-btn",onClick:i,className:"lg:hidden bg-slate-800 hover:bg-slate-700 px-2 py-0.5 h-6 rounded text-[9px] border border-yellow-500/50 font-bold text-yellow-500 uppercase transition-colors",children:" "})]}),g.jsxs("div",{"data-id":"hud-stats",className:"flex items-center gap-2",children:[g.jsxs("div",{"data-id":"hud-skulls",className:"bg-slate-950 px-2 py-1 border border-red-900/30 rounded flex items-center gap-1",children:[g.jsx("span",{"data-id":"hud-skulls-label",className:"text-[10px] text-red-500 font-bold",children:"SKULLS"}),g.jsx("span",{"data-id":"hud-skulls-value",className:"text-red-400 font-black text-sm",children:Math.floor(e.skulls).toLocaleString()})]}),g.jsxs("div",{"data-id":"hud-hp",className:"bg-slate-950 px-2 py-1 border border-slate-700 rounded flex items-center gap-1",children:[g.jsx("span",{"data-id":"hud-hp-label",className:"text-[10px] text-slate-500 font-bold",children:"HP"}),g.jsx("span",{"data-id":"hud-hp-value",className:`font-black text-sm ${e.life<=5?"text-red-500 animate-pulse":"text-sky-400"}`,children:e.life})]})]})]})]})}function M2({engine:e,state:i}){const[n,a]=C.useState(""),o=d=>{e&&e.buyItem(d)},c=()=>{if(!n.trim())return;const d=n.trim().toUpperCase();e.redeemCode?e.redeemCode(d)?(a(""),alert(" !")):alert("    ."):console.warn("Engine doesn't support redeemCode yet")};return g.jsxs("div",{"data-id":"shop-container",className:"flex flex-col w-full lg:w-56 gap-4 transition-all duration-500 self-stretch font-tech",children:[g.jsxs("div",{"data-id":"shop-coupon-section",className:"bg-slate-900 border-2 border-slate-800 rounded-xl p-4 flex flex-col gap-2 shadow-2xl",children:[g.jsx("h3",{"data-id":"shop-coupon-title",className:"text-[10px] text-sky-400 uppercase tracking-widest text-center font-bold",children:" "}),g.jsxs("div",{"data-id":"shop-coupon-form",className:"flex flex-col gap-2",children:[g.jsx("input",{"data-id":"shop-coupon-input",type:"text",placeholder:" ...",value:n,onChange:d=>a(d.target.value),className:"w-full text-xs p-2 rounded bg-black border border-slate-700 text-center focus:border-sky-500 outline-none text-white"}),g.jsx("button",{"data-id":"shop-coupon-submit-btn",onClick:c,className:"w-full bg-sky-700 hover:bg-sky-600 text-white text-[11px] font-bold py-2 rounded transition-all shadow-lg",children:" "})]})]}),g.jsxs("div",{"data-id":"shop-items-section",className:"bg-slate-900 border-2 border-slate-800 rounded-xl p-4 flex flex-col flex-1 shadow-2xl overflow-y-auto max-h-[400px] custom-scrollbar",children:[g.jsx("h2",{"data-id":"shop-items-title",className:"text-base font-bold text-red-400 mb-4 text-center border-b border-slate-800 pb-2 uppercase tracking-tighter italic",children:" "}),g.jsxs("div",{"data-id":"shop-items-list",className:"flex flex-col gap-3 text-xs",children:[g.jsxs("button",{"data-id":"shop-heal-btn",onClick:()=>o("HEAL"),className:"group flex flex-col items-center p-3 border-2 border-slate-800 rounded-lg bg-slate-800/30 hover:border-red-500 transition-all active:scale-95",children:[g.jsx("span",{"data-id":"shop-heal-icon",className:"text-2xl mb-1",children:""}),g.jsx("span",{"data-id":"shop-heal-label",className:"text-[10px] font-bold text-slate-300 text-center",children:"  (+5)"}),g.jsx("span",{"data-id":"shop-heal-cost",className:"text-sm font-bold text-red-400 mt-1",children:" 150"})]}),g.jsxs("button",{"data-id":"shop-interest-btn",onClick:()=>o("INTEREST"),className:"group flex flex-col items-center p-3 border-2 border-slate-800 rounded-lg bg-slate-800/30 hover:border-red-500 transition-all active:scale-95",children:[g.jsx("span",{"data-id":"shop-interest-icon",className:"text-2xl mb-1",children:""}),g.jsxs("span",{"data-id":"shop-interest-label",className:"text-[10px] font-bold text-slate-300 text-center",children:["  (LV.",i.interestLevel,")"]}),g.jsx("span",{"data-id":"shop-interest-cost",className:"text-sm font-bold text-red-400 mt-1",children:" 400"})]}),g.jsxs("button",{"data-id":"shop-luck-btn",onClick:()=>o("LUCK"),className:`group flex flex-col items-center p-3 border-2 border-slate-800 rounded-lg bg-slate-800/30 transition-all active:scale-95 ${i.luckBoost?"opacity-50 cursor-not-allowed":"hover:border-red-500"}`,disabled:i.luckBoost,children:[g.jsx("span",{"data-id":"shop-luck-icon",className:"text-2xl mb-1",children:""}),g.jsx("span",{"data-id":"shop-luck-label",className:"text-[10px] font-bold text-slate-300 text-center uppercase tracking-widest",children:" "}),g.jsx("span",{"data-id":"shop-luck-cost",className:"text-sm font-bold text-red-400 mt-1",children:" 800"})]})]}),i.killCount>=100&&g.jsxs("div",{"data-id":"shop-secret-code",className:"mt-6 animate-bounce bg-red-900/40 border-2 border-yellow-500 rounded-lg p-3 text-center",children:[g.jsx("p",{"data-id":"shop-secret-label",className:"text-[9px] text-yellow-400 font-bold uppercase mb-1",children:"    "}),g.jsx("p",{"data-id":"shop-secret-value",className:"text-sm font-black text-yellow-300",children:"_100"})]})]})]})}function T2({engine:e,state:i}){return e?g.jsxs("div",{"data-id":"game-controls-container",className:"w-full bg-slate-900 border-x-2 border-b-2 border-slate-700 rounded-b-xl p-3 flex flex-col gap-2 shadow-lg relative z-10 font-tech animate-in fade-in slide-in-from-top-2",children:[g.jsxs("div",{"data-id":"game-controls-main-actions",className:"grid grid-cols-2 gap-2",children:[g.jsxs("button",{"data-id":"game-controls-summon-btn",onClick:()=>e.summonUnit(50),className:"flex items-center justify-between bg-slate-800 hover:bg-slate-750 border border-slate-600 hover:border-sky-500 p-2 px-3 rounded transition-all active:scale-[0.98] group",children:[g.jsxs("div",{"data-id":"game-controls-summon-info",className:"flex flex-col items-start",children:[g.jsx("span",{"data-id":"game-controls-summon-label",className:"text-[10px] font-bold text-white group-hover:text-sky-400",children:" "}),g.jsx("span",{"data-id":"game-controls-summon-desc",className:"text-[9px] text-slate-500",children:"  "})]}),g.jsx("span",{"data-id":"game-controls-summon-cost",className:"text-xs font-bold text-yellow-500",children:"50 G"})]}),g.jsxs("button",{"data-id":"game-controls-random-btn",onClick:()=>e.summonUnit(300,!0),className:"flex items-center justify-between bg-slate-800 hover:bg-slate-750 border border-red-900/50 hover:border-red-500 p-2 px-3 rounded transition-all active:scale-[0.98] group",children:[g.jsxs("div",{"data-id":"game-controls-random-info",className:"flex flex-col items-start",children:[g.jsx("span",{"data-id":"game-controls-random-label",className:"text-[10px] font-bold text-white group-hover:text-red-400",children:" "}),g.jsx("span",{"data-id":"game-controls-random-desc",className:"text-[9px] text-red-900/60 group-hover:text-red-900",children:" "})]}),g.jsx("span",{"data-id":"game-controls-random-cost",className:"text-xs font-bold text-yellow-500",children:"300 G"})]})]}),g.jsxs("div",{"data-id":"game-controls-secondary-actions",className:"grid grid-cols-2 gap-2",children:[g.jsxs("button",{"data-id":"game-controls-upgrade-btn",onClick:()=>e.handleUpgrade(),className:"flex items-center justify-center gap-2 bg-slate-950 border border-slate-700 hover:border-sky-500 p-2 rounded transition-all active:scale-[0.98]",children:[g.jsx("span",{"data-id":"game-controls-upgrade-icon",className:"text-lg",children:""}),g.jsxs("div",{"data-id":"game-controls-upgrade-info",className:"flex flex-col items-start leading-none",children:[g.jsx("span",{"data-id":"game-controls-upgrade-label",className:"text-[10px] font-bold text-slate-300",children:" "}),g.jsxs("span",{"data-id":"game-controls-upgrade-cost",className:"text-[9px] text-red-500 font-mono",children:["LV.",i.upgradeLevel,"  150 "]})]})]}),g.jsxs("button",{"data-id":"game-controls-sell-btn",onClick:()=>e.sellUnit(),disabled:!i.selectedUnit,className:`flex items-center justify-center gap-2 border p-2 rounded transition-all active:scale-[0.98]
                        ${i.selectedUnit?"bg-red-950/50 border-red-500 hover:bg-red-900/50 cursor-pointer":"bg-slate-950 border-slate-800 opacity-50 cursor-not-allowed"}`,children:[g.jsx("span",{"data-id":"game-controls-sell-icon",className:"text-lg",children:""}),g.jsxs("div",{"data-id":"game-controls-sell-info",className:"flex flex-col items-start leading-none",children:[g.jsx("span",{"data-id":"game-controls-sell-label",className:"text-[10px] font-bold text-slate-300",children:" "}),g.jsx("span",{"data-id":"game-controls-sell-cost",className:"text-[9px] text-slate-500",children:i.selectedUnit?` : ${Math.floor(i.selectedUnit.rank.sell/2)} G`:"  "})]})]})]}),g.jsxs("div",{"data-id":"game-controls-status",className:"flex justify-between items-center bg-black/40 px-2 py-1 rounded text-[9px] font-mono text-slate-500",children:[g.jsx("span",{"data-id":"game-controls-status-label",children:" : "}),g.jsxs("span",{"data-id":"game-controls-unit-count",children:[" : ",g.jsxs("span",{className:i.units.length>=15?"text-red-500 font-bold":"text-sky-500",children:[i.units.length,"/15"]})]})]})]}):null}const D2={auth:null,db:null,appId:"local-mode",currentUser:{uid:"local-user",isAnonymous:!0},init:async()=>{console.log("Firebase disabled (Local Mode)")},saveScore:async e=>{console.log("Score saving disabled (Local Mode)",e.skulls)},getRankings:async()=>(console.log("Rankings disabled (Local Mode)"),[{uid:"cpu1",name:"Alpha",skulls:5e3,difficulty:"HARD"},{uid:"cpu2",name:"Bravo",skulls:3e3,difficulty:"NORMAL"},{uid:"cpu3",name:"Charlie",skulls:1e3,difficulty:"EASY"}])};function A2({state:e,onRestart:i}){return C.useEffect(()=>{e.isGameOver&&D2.saveScore(e)},[e.isGameOver]),e.isGameOver?g.jsxs("div",{"data-id":"gameover-container",className:"absolute inset-0 bg-black/95 flex flex-col items-center justify-center rounded-lg z-50 text-center p-6 border-4 border-red-900 font-tech animate-in fade-in zoom-in duration-300",children:[g.jsx("h2",{"data-id":"gameover-title",className:"text-4xl font-black text-red-600 mb-2 italic uppercase tracking-widest",children:"System Down"}),g.jsxs("div",{"data-id":"gameover-stats",className:"mb-6 text-center",children:[g.jsxs("p",{"data-id":"gameover-wave",className:"text-sm text-slate-400 font-bold uppercase mb-1",children:["Last Wave: ",Math.floor(e.wave)]}),g.jsxs("p",{"data-id":"gameover-skulls",className:"text-5xl text-red-500 font-black italic",children:[" ",Math.floor(e.skulls).toLocaleString()]})]}),g.jsx("div",{"data-id":"gameover-actions",className:"flex flex-col gap-3 w-full max-w-[220px]",children:g.jsx("button",{"data-id":"gameover-restart-btn",onClick:()=>window.location.reload(),className:"bg-red-700 hover:bg-red-600 text-white py-3 rounded font-black text-lg shadow-lg uppercase transition-all",children:""})})]}):null}function N2({onClose:e}){return g.jsx("div",{"data-id":"gameinfo-overlay",className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4 animate-in fade-in",onClick:e,children:g.jsxs("div",{"data-id":"gameinfo-container",className:"bg-slate-900 border-2 border-slate-700 rounded-xl max-w-sm w-full p-4 shadow-2xl relative",onClick:i=>i.stopPropagation(),children:[g.jsx("button",{"data-id":"gameinfo-close-btn",onClick:e,className:"absolute top-2 right-3 text-slate-500 hover:text-white font-bold text-xl",children:""}),g.jsxs("h2",{"data-id":"gameinfo-title",className:"text-lg font-black text-white italic uppercase mb-4 border-b border-slate-700 pb-2 flex items-center gap-2",children:[g.jsx("span",{"data-id":"gameinfo-title-icon",className:"text-yellow-500",children:""}),"  "]}),g.jsxs("div",{"data-id":"gameinfo-content",className:"space-y-4 font-tech text-xs",children:[g.jsxs("div",{"data-id":"gameinfo-gacha-section",children:[g.jsx("h3",{"data-id":"gameinfo-gacha-title",className:"font-bold text-sky-400 mb-2 uppercase",children:"   (300G)"}),g.jsxs("div",{"data-id":"gameinfo-gacha-grid",className:"grid grid-cols-2 gap-2",children:[g.jsxs("div",{"data-id":"gameinfo-standard-draw",className:"bg-slate-950 p-2 rounded border border-slate-800",children:[g.jsx("div",{"data-id":"gameinfo-standard-title",className:"text-[10px] text-slate-500 font-bold mb-1 text-center",children:"  ()"}),g.jsxs("div",{"data-id":"gameinfo-standard-normal",className:"flex justify-between px-2 text-slate-300",children:[g.jsx("span",{children:Vt.NORMAL.name}),g.jsxs("span",{className:"font-mono",children:[Vt.NORMAL.prob*100,"%"]})]}),g.jsxs("div",{"data-id":"gameinfo-standard-rare",className:"flex justify-between px-2 text-sky-300",children:[g.jsx("span",{children:Vt.RARE.name}),g.jsxs("span",{className:"font-mono",children:[Vt.RARE.prob*100,"%"]})]}),g.jsxs("div",{"data-id":"gameinfo-standard-epic",className:"flex justify-between px-2 text-purple-300",children:[g.jsx("span",{children:Vt.EPIC.name}),g.jsxs("span",{className:"font-mono",children:[Vt.EPIC.prob*100,"%"]})]}),g.jsxs("div",{"data-id":"gameinfo-standard-legend",className:"flex justify-between px-2 text-yellow-300",children:[g.jsx("span",{children:Vt.LEGEND.name}),g.jsxs("span",{className:"font-mono",children:[Vt.LEGEND.prob*100,"%"]})]})]}),g.jsxs("div",{"data-id":"gameinfo-lucky-draw",className:"bg-red-950/20 p-2 rounded border border-red-900/50",children:[g.jsx("div",{"data-id":"gameinfo-lucky-title",className:"text-[10px] text-red-400 font-bold mb-1 text-center",children:"  (300G)"}),g.jsxs("div",{"data-id":"gameinfo-lucky-mythic",className:"flex justify-between px-2 text-red-300",children:[g.jsx("span",{children:Vt.MYTHIC.name}),g.jsx("span",{className:"font-mono",children:"5%"})]}),g.jsxs("div",{"data-id":"gameinfo-lucky-legend",className:"flex justify-between px-2 text-yellow-300",children:[g.jsx("span",{children:Vt.LEGEND.name}),g.jsx("span",{className:"font-mono",children:"15%"})]}),g.jsxs("div",{"data-id":"gameinfo-lucky-epic",className:"flex justify-between px-2 text-purple-300",children:[g.jsx("span",{children:Vt.EPIC.name}),g.jsx("span",{className:"font-mono",children:"30%"})]}),g.jsxs("div",{"data-id":"gameinfo-lucky-rare",className:"flex justify-between px-2 text-sky-300",children:[g.jsx("span",{children:Vt.RARE.name}),g.jsx("span",{className:"font-mono",children:"50%"})]})]})]}),g.jsx("p",{"data-id":"gameinfo-luck-note",className:"text-[9px] text-slate-500 mt-1 italic text-center",children:"* (Luck)     "})]}),g.jsxs("div",{"data-id":"gameinfo-controls-section",children:[g.jsx("h3",{"data-id":"gameinfo-controls-title",className:"font-bold text-sky-400 mb-2 uppercase",children:" "}),g.jsxs("ul",{"data-id":"gameinfo-controls-list",className:"list-disc pl-4 space-y-1 text-slate-300",children:[g.jsxs("li",{"data-id":"gameinfo-control-merge",children:[g.jsx("span",{className:"text-white font-bold",children:":"}),"  /       "]}),g.jsxs("li",{"data-id":"gameinfo-control-sell",children:[g.jsx("span",{className:"text-white font-bold",children:":"}),"    ( )"]}),g.jsxs("li",{"data-id":"gameinfo-control-move",children:[g.jsx("span",{className:"text-white font-bold",children:":"}),"   .   !"]})]})]})]})]})})}function B0(){const[e,i]=C.useState(null),[n,a]=C.useState(null),[o,c]=C.useState(!1),[d,_]=C.useState(!1),m=(f,y)=>{e&&(e.reset(y,f),Yd.resume())};return g.jsxs("div",{"data-id":"defense-container",className:"flex flex-col lg:flex-row gap-6 items-center justify-center min-h-screen p-2 md:p-4 overflow-x-hidden bg-[#0f172a]",children:[d&&g.jsx(N2,{onClose:()=>_(!1)}),n?.isStarted&&g.jsxs("div",{"data-id":"defense-shop-overlay",className:`
              fixed inset-0 z-50 bg-black/95 p-4 flex flex-col items-center justify-center transition-all duration-300
              lg:static lg:bg-transparent lg:p-0 lg:w-auto lg:h-auto lg:block
              ${o?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none lg:opacity-100 lg:pointer-events-auto hidden lg:flex"}
          `,children:[g.jsx("button",{"data-id":"defense-shop-close-btn",onClick:()=>c(!1),className:"lg:hidden absolute top-4 right-4 text-white text-2xl font-bold p-2 hover:text-red-500 transition-colors",children:""}),g.jsx(M2,{engine:e,state:n})]}),g.jsxs("div",{"data-id":"defense-game-frame",className:"flex flex-col items-center relative w-full max-w-[500px]",children:[n?.isStarted&&g.jsx(R2,{state:n,onShopClick:()=>c(!0),onInfoClick:()=>_(!0)}),g.jsxs("div",{"data-id":"defense-screen",className:`relative w-full aspect-square md:aspect-auto bg-black border-x-2 border-slate-700 ${n?.isStarted?"":"rounded-xl border-y-2"}`,children:[g.jsx(E2,{onEngineInit:f=>{f.callbacks={onStateUpdate:y=>a({...y}),onGameOver:y=>a({...y})},i(f),a({...f.state})}}),(!n||!n.isStarted)&&g.jsx(k2,{onStart:m}),n?.isGameOver&&g.jsx(A2,{state:n})]}),n?.isStarted&&g.jsx(T2,{engine:e,state:n})]})]})}class B2{constructor(i,n){this.x=i,this.y=n,this.hp=100,this.maxHp=100,this.radius=30,this.speed=5}update(i){if(i.input.active){const n=i.input.x-this.x,a=i.input.y-this.y,o=Math.sqrt(n*n+a*a);o>5&&(this.x+=n/o*this.speed,this.y+=a/o*this.speed)}this.x=Math.max(this.radius,Math.min(i.width-this.radius,this.x)),this.y=Math.max(this.radius,Math.min(i.height-this.radius,this.y))}draw(i,n){const a=i.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius+15);a.addColorStop(0,"rgba(255, 255, 255, 0.8)"),a.addColorStop(1,"rgba(255, 255, 255, 0)"),i.beginPath(),i.arc(this.x,this.y,this.radius+15,0,Math.PI*2),i.fillStyle=a,i.fill(),i.beginPath(),i.arc(this.x,this.y,this.radius,0,Math.PI*2),i.fillStyle="#ffffff",i.fill(),i.beginPath(),i.moveTo(this.x,this.y-12),i.lineTo(this.x-10,this.y+8),i.lineTo(this.x+10,this.y+8),i.closePath(),i.fillStyle="#fbbf24",i.fill();const o=60,c=8;i.fillStyle="#dc2626",i.fillRect(this.x-o/2,this.y+this.radius+10,o*(this.hp/this.maxHp),c)}}class pv{constructor(i,n,a){this.x=i,this.y=n,this.index=a,this.radius=18,this.attackCooldown=0,this.angle=a/3*Math.PI*2}update(i){const n=this.angle+i.frameCount*.015,a=70+this.index*25,o=i.leader.x+Math.cos(n)*a,c=i.leader.y+Math.sin(n)*a;if(this.x+=(o-this.x)*i.stats.followerSpeed,this.y+=(c-this.y)*i.stats.followerSpeed,this.attackCooldown>0&&this.attackCooldown--,this.attackCooldown<=0){const d=this.findTarget(i);d&&(this.shoot(i,d),this.attackCooldown=Math.floor(60/i.stats.attackSpeed))}}findTarget(i){let n=null,a=i.stats.followerRange;for(const o of i.enemies){const c=o.x-this.x,d=o.y-this.y,_=Math.sqrt(c*c+d*d);_<a&&(a=_,n=o)}return n}shoot(i,n){const a=n.x-this.x,o=n.y-this.y,c=Math.sqrt(a*a+o*o);i.projectiles.push(new O2(this.x,this.y,a/c*8,o/c*8,i.stats.followerAtk,i.stats.critChance,i.stats.knockback))}draw(i){const n=i.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius+5);n.addColorStop(0,"#3b82f6"),n.addColorStop(1,"rgba(59, 130, 246, 0)"),i.beginPath(),i.arc(this.x,this.y,this.radius+5,0,Math.PI*2),i.fillStyle=n,i.fill(),i.beginPath(),i.arc(this.x,this.y,this.radius,0,Math.PI*2),i.fillStyle="#3b82f6",i.fill(),i.beginPath(),i.arc(this.x,this.y-3,5,0,Math.PI*2),i.fillStyle="#ffffff",i.fill()}}class L2{constructor(i,n,a,o){this.x=i,this.y=n,this.type=a,this.radius=a==="tank"?35:a==="fast"?18:25,this.speed=a==="fast"?2.5:a==="tank"?1:1.5,this.hp=a==="tank"?80+o*10:a==="fast"?20+o*3:40+o*5,this.maxHp=this.hp,this.damage=a==="tank"?15:a==="fast"?5:10,this.attackCooldown=0}update(i,n){const a=i.leader.x-this.x,o=i.leader.y-this.y,c=Math.sqrt(a*a+o*o);c>i.leader.radius+this.radius?(this.x+=a/c*this.speed,this.y+=o/c*this.speed):this.attackCooldown<=0&&(i.leader.hp-=this.damage,this.attackCooldown=60,i.leader.hp<=0&&n()),this.attackCooldown>0&&this.attackCooldown--}draw(i){const n=this.type==="tank"?"#166534":this.type==="fast"?"#4ade80":"#22c55e";i.beginPath(),i.arc(this.x,this.y,this.radius,0,Math.PI*2),i.fillStyle=n,i.fill(),i.strokeStyle=n,i.lineWidth=3,i.beginPath(),i.moveTo(this.x-this.radius*.4,this.y-this.radius*.6),i.lineTo(this.x-this.radius*.6,this.y-this.radius*1.2),i.stroke(),i.beginPath(),i.moveTo(this.x+this.radius*.4,this.y-this.radius*.6),i.lineTo(this.x+this.radius*.6,this.y-this.radius*1.2),i.stroke(),i.beginPath(),i.arc(this.x-this.radius*.6,this.y-this.radius*1.2,4,0,Math.PI*2),i.fillStyle="#ef4444",i.fill(),i.beginPath(),i.arc(this.x+this.radius*.6,this.y-this.radius*1.2,4,0,Math.PI*2),i.fillStyle="#ef4444",i.fill(),i.beginPath(),i.arc(this.x-6,this.y-2,4,0,Math.PI*2),i.fillStyle="#ef4444",i.fill(),i.beginPath(),i.arc(this.x+6,this.y-2,4,0,Math.PI*2),i.fillStyle="#ef4444",i.fill()}}class O2{constructor(i,n,a,o,c,d,_){this.x=i,this.y=n,this.vx=a,this.vy=o,this.damage=c,this.critChance=d,this.knockback=_,this.radius=6,this.life=120}update(i,n,a){this.x+=this.vx,this.y+=this.vy,this.life--;for(let o=i.enemies.length-1;o>=0;o--){const c=i.enemies[o],d=c.x-this.x,_=c.y-this.y,m=Math.sqrt(d*d+_*_);if(m<c.radius+this.radius){const f=Math.random()<this.critChance,y=f?this.damage*2:this.damage;c.hp-=y;const S=this.knockback*10;c.x+=d/m*S,c.y+=_/m*S,c.hp<=0&&a(o),n(this.x,this.y,f?"#fbbf24":"#60a5fa",5),this.life=0;break}}}draw(i){const n=i.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius+3);n.addColorStop(0,"#60a5fa"),n.addColorStop(1,"rgba(96, 165, 250, 0)"),i.beginPath(),i.arc(this.x,this.y,this.radius+3,0,Math.PI*2),i.fillStyle=n,i.fill(),i.beginPath(),i.arc(this.x,this.y,this.radius,0,Math.PI*2),i.fillStyle="#3b82f6",i.fill()}}function L0(){const e=C.useRef(null),i=C.useRef(null),[n,a]=C.useState(!1),[o,c]=C.useState(1),[d,_]=C.useState(0),[m,f]=C.useState(100),[y,S]=C.useState(3),[b,M]=C.useState("00:00"),[E,D]=C.useState(!1),[j,z]=C.useState(!1),[H,Z]=C.useState(""),[J,ae]=C.useState([]),ie=C.useRef({level:1,exp:0,maxExp:100,leader:null,followers:[],enemies:[],projectiles:[],particles:[],input:{x:0,y:0,active:!1},stats:{followerAtk:12,followerRange:180,followerSpeed:.06,attackSpeed:1,critChance:.05,knockback:.5,spawnRate:120,armorGlow:0},width:0,height:0,frameCount:0,gameTime:0,isPaused:!1}),re=le=>{const _e=Math.floor(le/60),ye=le%60;return`${_e}:${ye<10?"0"+ye:ye}`};C.useEffect(()=>{const le=e.current,_e=le.getContext("2d"),ye=()=>{Z(` : ${ie.current.level} |  : ${re(ie.current.gameTime)}`),z(!0),a(!1),cancelAnimationFrame(i.current)},ee=(U,w,k,Y=10)=>{const Q=ie.current;for(let ne=0;ne<Y;ne++)Q.particles.push({x:U,y:w,vx:(Math.random()-.5)*6,vy:(Math.random()-.5)*6,alpha:1,color:k,size:Math.random()*3+1})},N=U=>{const w=ie.current;ee(w.enemies[U].x,w.enemies[U].y,"#22c55e"),w.enemies.splice(U,1),X(35)},X=U=>{const w=ie.current;w.exp+=U,w.exp>=w.maxExp&&te(),_(w.exp)},te=()=>{const U=ie.current;U.level++,U.exp=0,U.maxExp=Math.floor(U.maxExp*1.38),U.isPaused=!0,c(U.level),f(U.maxExp),T()},T=()=>{const U=ie.current;ae([{title:" ",desc:"  .",action:()=>{U.followers.push(new pv(U.leader.x,U.leader.y,U.followers.length)),S(k=>k+1)}},{title:" ",desc:"  25% .",action:()=>U.stats.followerAtk*=1.25},{title:" ",desc:"  20% .",action:()=>U.stats.attackSpeed*=1.2},{title:" ",desc:"  10% .",action:()=>U.stats.critChance+=.1},{title:" ",desc:"   .",action:()=>U.stats.knockback+=.4},{title:" ",desc:"  15% .",action:()=>U.stats.followerRange*=1.15},{title:" ",desc:"  30% .",action:()=>U.leader.hp=Math.min(U.leader.maxHp,U.leader.hp+30)},{title:" ",desc:"    .",action:()=>{U.stats.armorGlow+=1,U.leader.maxHp+=20,U.leader.hp+=20}}].sort(()=>.5-Math.random()).slice(0,3)),D(!0)},G=()=>{le&&(le.width=window.innerWidth,le.height=window.innerHeight,ie.current.width=le.width,ie.current.height=le.height)},W=()=>{const U=ie.current;if(!n||U.isPaused){n&&(i.current=requestAnimationFrame(W));return}_e.fillStyle="#0f0f0f",_e.fillRect(0,0,U.width,U.height),_e.strokeStyle="#1f1f1f",_e.lineWidth=1;const w=100;for(let k=0;k<U.width;k+=w)_e.beginPath(),_e.moveTo(k,0),_e.lineTo(k,U.height),_e.stroke();for(let k=0;k<U.height;k+=w)_e.beginPath(),_e.moveTo(0,k),_e.lineTo(U.width,k),_e.stroke();if(U.leader&&(U.leader.update(U),U.leader.draw(_e,U)),U.frameCount%U.stats.spawnRate===0){let k,Y,Q=Math.floor(Math.random()*4);Q===0?(k=Math.random()*U.width,Y=-50):Q===1?(k=U.width+50,Y=Math.random()*U.height):Q===2?(k=Math.random()*U.width,Y=U.height+50):(k=-50,Y=Math.random()*U.height);let ne=Math.random(),oe=ne>.92?"tank":ne>.78?"fast":"normal";U.enemies.push(new L2(k,Y,oe,U.level)),U.stats.spawnRate>40&&U.frameCount%300===0&&(U.stats.spawnRate-=5)}for(let k=U.projectiles.length-1;k>=0;k--)U.projectiles[k].update(U,ee,N),U.projectiles[k].draw(_e),U.projectiles[k].life<=0&&U.projectiles.splice(k,1);for(let k=U.enemies.length-1;k>=0;k--)U.enemies[k].update(U,ye),U.enemies[k].draw(_e);U.followers.forEach(k=>{k.update(U),k.draw(_e)});for(let k=U.particles.length-1;k>=0;k--){const Y=U.particles[k];Y.x+=Y.vx,Y.y+=Y.vy,Y.alpha-=.025,Y.alpha<=0?U.particles.splice(k,1):(_e.globalAlpha=Y.alpha,_e.fillStyle=Y.color,_e.beginPath(),_e.arc(Y.x,Y.y,Y.size,0,Math.PI*2),_e.fill(),_e.globalAlpha=1)}U.frameCount++,U.frameCount%60===0&&(U.gameTime++,M(re(U.gameTime))),i.current=requestAnimationFrame(W)},ce=U=>{const w=U.touches?U.touches[0].clientX:U.clientX,k=U.touches?U.touches[0].clientY:U.clientY;ie.current.input.x=w,ie.current.input.y=k,ie.current.input.active=!0};return window.addEventListener("resize",G),le.addEventListener("mousedown",ce),le.addEventListener("mousemove",U=>{ie.current.input.active&&ce(U)}),le.addEventListener("mouseup",()=>ie.current.input.active=!1),le.addEventListener("touchstart",U=>{ce(U),U.preventDefault()},{passive:!1}),le.addEventListener("touchmove",U=>{ce(U),U.preventDefault()},{passive:!1}),le.addEventListener("touchend",()=>ie.current.input.active=!1),G(),n&&(i.current=requestAnimationFrame(W)),()=>{window.removeEventListener("resize",G),cancelAnimationFrame(i.current)}},[n]);const ve=()=>{const le=ie.current;le.width=window.innerWidth,le.height=window.innerHeight,le.level=1,le.exp=0,le.maxExp=100,le.frameCount=0,le.gameTime=0,le.enemies=[],le.projectiles=[],le.particles=[],le.stats={followerAtk:12,followerRange:180,followerSpeed:.06,attackSpeed:1,critChance:.05,knockback:.5,spawnRate:120,armorGlow:0},le.isPaused=!1,le.leader=new B2(le.width/2,le.height/2),le.followers=[];for(let _e=0;_e<3;_e++)le.followers.push(new pv(le.leader.x,le.leader.y,_e));c(1),_(0),f(100),S(3),M("0:00"),z(!1),a(!0)};return g.jsxs("div",{"data-id":"zombie-container",className:"relative w-full h-screen bg-black overflow-hidden font-sans select-none touch-none",children:[g.jsx("canvas",{"data-id":"zombie-canvas",ref:e,className:"block w-full h-full"}),n&&!j&&g.jsxs("div",{"data-id":"zombie-hud",className:"absolute top-0 left-0 w-full p-4 flex justify-between items-start text-white pointer-events-none",children:[g.jsxs("div",{"data-id":"zombie-hud-left",className:"flex flex-col gap-1",children:[g.jsxs("div",{"data-id":"zombie-level",className:"text-2xl font-black text-green-400 drop-shadow-lg",children:["Lv.",o]}),g.jsx("div",{"data-id":"zombie-exp-bar",className:"w-56 h-4 bg-gray-900 rounded-full border border-gray-700 overflow-hidden shadow-inner",children:g.jsx("div",{"data-id":"zombie-exp-fill",className:"h-full bg-gradient-to-r from-green-600 to-green-400 transition-all duration-300",style:{width:`${d/m*100}%`}})}),g.jsxs("div",{"data-id":"zombie-exp-text",className:"text-[10px] text-green-300 font-bold uppercase tracking-wider",children:["EXP: ",Math.floor(d)," / ",Math.floor(m)]})]}),g.jsxs("div",{"data-id":"zombie-hud-right",className:"text-right",children:[g.jsxs("div",{"data-id":"zombie-unit-count",className:"text-xl font-black text-blue-400",children:[": ",y,""]}),g.jsxs("div",{"data-id":"zombie-survival-time",className:"text-sm text-gray-400",children:["Survival: ",b]})]})]}),!n&&!j&&g.jsxs("div",{"data-id":"zombie-start",className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-50",children:[g.jsx("h1",{"data-id":"zombie-start-title",className:"text-6xl md:text-8xl text-green-600 font-black mb-4 tracking-tighter text-center drop-shadow-[0_0_30px_rgba(34,197,94,0.6)]",children:""}),g.jsxs("p",{className:"text-gray-400 mb-8 text-center px-4",children:[" /  ",g.jsx("br",{}),"  !"]}),g.jsx("div",{"data-id":"zombie-start-buttons",className:"flex flex-col sm:flex-row gap-4 w-full px-10 max-w-lg",children:g.jsx("button",{"data-id":"zombie-play-btn",onClick:ve,className:"flex-1 py-5 bg-green-600 hover:bg-green-500 text-white text-2xl font-bold rounded-3xl transition-all active:scale-95 shadow-xl",children:" "})})]}),j&&g.jsxs("div",{"data-id":"zombie-gameover",className:"absolute inset-0 flex flex-col items-center justify-center bg-black/95 z-50",children:[g.jsx("h1",{"data-id":"zombie-gameover-title",className:"text-6xl text-red-700 font-black mb-2 animate-pulse",children:"GAME OVER"}),g.jsx("p",{"data-id":"zombie-gameover-stats",className:"text-white text-2xl mb-6 font-light",children:H}),g.jsx("div",{"data-id":"zombie-gameover-buttons",className:"flex gap-4 w-full px-10 max-w-lg",children:g.jsx("button",{"data-id":"zombie-restart-btn",onClick:ve,className:"flex-1 py-4 bg-zinc-800 hover:bg-zinc-700 text-white text-xl font-bold rounded-2xl transition-all",children:""})})]}),E&&g.jsx("div",{"data-id":"zombie-upgrade-overlay",className:"absolute inset-0 flex items-center justify-center bg-black/90 z-50",children:g.jsxs("div",{"data-id":"zombie-upgrade-modal",className:"bg-zinc-950 p-8 rounded-3xl border-4 border-green-500 max-w-sm w-full shadow-2xl",children:[g.jsx("h2",{"data-id":"zombie-upgrade-title",className:"text-3xl text-green-500 font-black text-center mb-4",children:" !"}),g.jsx("div",{"data-id":"zombie-upgrade-options",className:"space-y-4",children:J.map((le,_e)=>g.jsxs("div",{"data-id":`zombie-upgrade-option-${_e}`,onClick:()=>{le.action(),D(!1),ie.current.isPaused=!1},className:"p-4 rounded-2xl bg-zinc-900 hover:bg-zinc-800 border-2 border-zinc-800 hover:border-green-500 cursor-pointer transition-all",children:[g.jsx("div",{className:"text-xl font-bold text-green-400 mb-1",children:le.title}),g.jsx("div",{className:"text-xs text-gray-500",children:le.desc})]},_e))})]})})]})}const Oa=200,Ou=650,gv=650,z2=60,zu=5,H2=30;function O0(){const e=C.useRef(null),i=C.useRef(null),[n,a]=C.useState(0),[o,c]=C.useState(0),[d,_]=C.useState(0),[m,f]=C.useState("MENU"),[y,S]=C.useState({text:"",color:"",visible:!1}),b=C.useRef({ball:null,swingActive:!1,swingFrame:0,isPlaying:!1,width:600,height:800});C.useEffect(()=>{const z=e.current,H=z.getContext("2d");class Z{constructor(N,X){this.reset(N,X)}reset(N,X){this.x=N/2,this.y=Oa,this.targetX=N/2+(Math.random()*40-20),this.speed=4+Math.random()*6,this.size=zu,this.active=!0,this.hit=!1,this.missed=!1,this.opacity=1}update(){if(!this.active)return;const N=Ou-Oa,X=(this.y-Oa)/N;this.y+=this.speed,this.x+=(this.targetX-b.current.width/2)*.02,this.size=Math.max(.1,zu+(H2-zu)*X),this.y>Ou+100&&!this.hit&&!this.missed&&(this.missed=!0,ae()),(this.y>b.current.height+100||this.y<-500)&&(this.active=!1,b.current.isPlaying&&setTimeout(()=>J(),1e3))}draw(N){if(!this.active)return;const X=Math.max(.1,this.size);N.save(),N.globalAlpha=this.opacity,N.beginPath(),N.ellipse(this.x,this.y+10,X,Math.max(.1,X/2),0,0,Math.PI*2),N.fillStyle="rgba(0,0,0,0.2)",N.fill(),N.beginPath(),N.arc(this.x,this.y,X,0,Math.PI*2),N.fillStyle="white",N.fill(),N.strokeStyle="#ddd",N.lineWidth=2,N.stroke(),X>2&&(N.beginPath(),N.arc(this.x-X*.5,this.y,X*.8,-.5,.5),N.strokeStyle="red",N.lineWidth=1,N.stroke(),N.beginPath(),N.arc(this.x+X*.5,this.y,X*.8,Math.PI-.5,Math.PI+.5),N.stroke()),N.restore()}}const J=()=>{b.current.isPlaying&&(b.current.ball=new Z(b.current.width,b.current.height))},ae=()=>{_(ee=>{const N=ee+1;return N>=3&&ie(),N}),c(0),M("!","text-red-500")},ie=()=>{b.current.isPlaying=!1,f("GAMEOVER")},re=()=>{const ee=b.current.width;b.current.height;const N=ee/2;H.fillStyle="#92400e",H.beginPath(),H.moveTo(N,150),H.lineTo(N+250,450),H.lineTo(N,750),H.lineTo(N-250,450),H.closePath(),H.fill(),H.strokeStyle="white",H.lineWidth=3,H.stroke();const X=25;H.fillStyle="white",H.beginPath(),H.moveTo(N,750),H.lineTo(N-X,750-X),H.lineTo(N-X,750-X*2),H.lineTo(N+X,750-X*2),H.lineTo(N+X,750-X),H.closePath(),H.fill(),H.beginPath(),H.arc(N,Oa+30,40,0,Math.PI*2),H.fillStyle="#78350f",H.fill(),H.beginPath(),H.arc(N,gv,z2,0,Math.PI*2),H.strokeStyle="rgba(255, 255, 0, 0.3)",H.setLineDash([10,5]),H.stroke(),H.setLineDash([])},ve=()=>{const ee=b.current.width/2;if(H.font="60px serif",H.textAlign="center",H.fillText("",ee,Oa),H.save(),H.translate(ee,Ou+50),b.current.swingActive){const N=b.current.swingFrame/10*Math.PI-Math.PI/4;H.rotate(N),H.fillText("",40,-20)}else H.fillText("",0,0);H.restore()},le=()=>{b.current.ball&&b.current.ball.update(),b.current.swingActive&&(b.current.swingFrame++,b.current.swingFrame>15&&(b.current.swingActive=!1))},_e=()=>{(z.width!==window.innerWidth||z.height!==window.innerHeight)&&(z.width=window.innerWidth,z.height=window.innerHeight,b.current.width=z.width,b.current.height=z.height),H.clearRect(0,0,z.width,z.height);const ee=H.createRadialGradient(z.width/2,z.height/2,0,z.width/2,z.height/2,z.height);ee.addColorStop(0,"#4ade80"),ee.addColorStop(1,"#166534"),H.fillStyle=ee,H.fillRect(0,0,z.width,z.height),re(),b.current.ball&&b.current.ball.draw(H),ve()},ye=()=>{b.current.forceSpawn&&(b.current.forceSpawn=!1,b.current.ball=new Z(b.current.width,b.current.height)),le(),_e(),i.current=requestAnimationFrame(ye)};return i.current=requestAnimationFrame(ye),()=>cancelAnimationFrame(i.current)},[]);const M=(z,H)=>{S({text:z,color:H,visible:!0}),setTimeout(()=>S(Z=>({...Z,visible:!1})),800)},E=()=>{if(!b.current.isPlaying||b.current.swingActive)return;b.current.swingActive=!0,b.current.swingFrame=0;const z=b.current.ball;if(z&&!z.hit&&!z.missed){const H=Math.abs(z.y-gv),Z=Math.abs(z.x-b.current.width/2);if(H<40&&Z<50){z.hit=!0;let J="",ae=0,ie="",re=o+1;c(ve=>(re=ve+1,re)),H<10?(J="!!",ae=1e3+re*100,ie="text-yellow-400"):H<25?(J="!",ae=500+re*50,ie="text-green-400"):(J="?",ae=100,ie="text-blue-300"),a(ve=>ve+ae),M(J,ie),z.speed=-15,z.targetX=(Math.random()-.5)*1e3}}},D=()=>{a(0),c(0),_(0),f("PLAYING"),b.current.isPlaying=!0,setTimeout(()=>{b.current.isPlaying&&(b.current.ball=null),b.current.ball={active:!1},b.current.ball=null,b.current.forceSpawn=!0},100)},j=()=>{E()};return g.jsxs("div",{"data-id":"baseball-container",className:"relative w-full h-screen bg-slate-900 overflow-hidden select-none touch-manipulation",onMouseDown:j,onTouchStart:j,onKeyDown:z=>{z.code==="Space"&&j()},tabIndex:"0",children:[g.jsx("canvas",{"data-id":"baseball-canvas",ref:e,className:"block w-full h-full"}),g.jsxs("div",{"data-id":"baseball-hud",className:"absolute top-5 left-5 text-white font-bold drop-shadow-lg pointer-events-none",children:[g.jsxs("div",{"data-id":"baseball-score",className:"text-2xl",children:[": ",n]}),g.jsxs("div",{"data-id":"baseball-combo",className:"text-xl text-yellow-400",children:[": ",o]}),g.jsxs("div",{"data-id":"baseball-outs",className:"text-lg text-red-400",children:[": ",d," / 3"]})]}),g.jsx("div",{"data-id":"baseball-message",className:`absolute top-1/3 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none transition-opacity duration-200 z-10 ${y.visible?"opacity-100":"opacity-0"}`,children:g.jsx("h2",{"data-id":"baseball-message-text",className:`text-7xl font-black ${y.color} drop-shadow-[0_5px_5px_rgba(0,0,0,1)]`,children:y.text})}),m!=="PLAYING"&&g.jsxs("div",{"data-id":"baseball-menu",className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center text-white z-20",children:[g.jsx("h1",{"data-id":"baseball-title",className:"text-6xl mb-8 font-black text-yellow-400 italic transform -skew-x-12",children:""}),m==="GAMEOVER"&&g.jsxs("div",{"data-id":"baseball-gameover",className:"text-center mb-8 animate-pulse",children:[g.jsx("h2",{"data-id":"baseball-gameover-title",className:"text-4xl text-red-500 font-bold mb-2",children:"GAME OVER"}),g.jsxs("p",{"data-id":"baseball-gameover-score",className:"text-xl",children:[" : ",n]})]}),g.jsxs("p",{"data-id":"baseball-instructions",className:"text-xl mb-12 text-center px-8 opacity-80",children:["     ",g.jsx("br",{}),"   !"]}),g.jsx("div",{"data-id":"baseball-menu-buttons",className:"flex gap-4",children:g.jsx("button",{"data-id":"baseball-start-btn",onClick:z=>{z.stopPropagation(),D()},className:"bg-blue-600 hover:bg-blue-500 text-white px-12 py-4 rounded-full text-2xl font-bold transition-transform active:scale-95 shadow-[0_0_20px_rgba(37,99,235,0.5)]",children:m==="MENU"?" ":" "})})]})]})}const Hu=JSON.parse('[{"id":1,"lv":1,"q":"   ___  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":2,"lv":1,"q":"   ___ .","a":"","h":"","m":"     .","options":["","","",""]},{"id":3,"lv":1,"q":"   ___ .","a":" ","h":"","m":"    .","options":[" "," "," "," "]},{"id":4,"lv":1,"q":"  ___.","a":"","h":"","m":"       .","options":["","","",""]},{"id":5,"lv":1,"q":" ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":6,"lv":1,"q":"    ___.","a":"","h":"","m":"      .","options":["","","",""]},{"id":7,"lv":1,"q":"  ___ .","a":"","h":"","m":"     .","options":["","","",""]},{"id":8,"lv":1,"q":"  ___.","a":"","h":"","m":"     .","options":["","","",""]},{"id":9,"lv":1,"q":" ___.","a":"","h":"","m":"      .","options":["","","",""]},{"id":10,"lv":1,"q":"  ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":11,"lv":1,"q":"  ___  .","a":"","h":"","m":"     .","options":["","","",""]},{"id":12,"lv":1,"q":" ___  .","a":"","h":"","m":"     .","options":["","","",""]},{"id":13,"lv":1,"q":" ___ .","a":"","h":"","m":"     .","options":["","","",""]},{"id":14,"lv":1,"q":"  ___ .","a":"","h":"","m":"       .","options":["","","",""]},{"id":15,"lv":1,"q":"     ___ .","a":"","h":"","m":"     .","options":["","","",""]},{"id":16,"lv":1,"q":" ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":17,"lv":1,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":18,"lv":1,"q":"  ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":19,"lv":1,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":20,"lv":1,"q":"  ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":21,"lv":1,"q":"  ___.","a":"","h":"","m":"     .","options":["","","",""]},{"id":22,"lv":1,"q":"  ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":23,"lv":1,"q":"   ___  .","a":"","h":"","m":"       .","options":["","","",""]},{"id":24,"lv":1,"q":"  ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":25,"lv":1,"q":" ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":26,"lv":1,"q":"  ___.","a":"","h":"","m":"     .","options":["","","",""]},{"id":27,"lv":1,"q":" ___.","a":"","h":"","m":"     .","options":["","","",""]},{"id":28,"lv":1,"q":" ___.","a":"","h":"","m":"      .","options":["","","",""]},{"id":29,"lv":1,"q":" ___    .","a":"","h":"","m":"  .","options":["","","",""]},{"id":30,"lv":1,"q":" ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":31,"lv":1,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":32,"lv":1,"q":" ___.","a":"","h":"","m":"     .","options":["","","",""]},{"id":33,"lv":1,"q":" ___ .","a":"","h":"","m":"     .","options":["","","",""]},{"id":34,"lv":1,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":35,"lv":1,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":36,"lv":1,"q":" ___ .","a":"","h":"","m":"      .","options":["","","",""]},{"id":37,"lv":1,"q":"   ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":38,"lv":1,"q":"  ___  .","a":" ","h":"","m":"    .","options":[" "," "," "," "]},{"id":39,"lv":1,"q":"   ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":40,"lv":1,"q":"  ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":41,"lv":1,"q":"  ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":42,"lv":1,"q":"    ___  .","a":"","h":"","m":"     .","options":["","","",""]},{"id":43,"lv":1,"q":"   ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":44,"lv":1,"q":"   ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":45,"lv":1,"q":"   ___     .","a":"","h":"","m":"   .","options":["","","",""]},{"id":46,"lv":1,"q":" ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":47,"lv":1,"q":" ___   .","a":"","h":"","m":"      .","options":["","","",""]},{"id":48,"lv":1,"q":"   ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":49,"lv":1,"q":" ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":50,"lv":1,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":51,"lv":2,"q":"  ___  .","a":"","h":"","m":"      .","options":["","","",""]},{"id":52,"lv":2,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":53,"lv":2,"q":"  ___ .","a":"","h":"","m":"     .","options":["","","",""]},{"id":54,"lv":2,"q":" ___   .","a":"","h":"","m":"   .","options":["","","",""]},{"id":55,"lv":2,"q":"  ___ .","a":"","h":"","m":"      .","options":["","","",""]},{"id":56,"lv":2,"q":" ___ .","a":"","h":"","m":"     .","options":["","","",""]},{"id":57,"lv":2,"q":"   ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":58,"lv":2,"q":" ___.","a":"","h":"","m":"     .","options":["",""," "," "]},{"id":59,"lv":2,"q":"    ___.","a":"","h":"","m":"       .","options":["","","",""]},{"id":60,"lv":2,"q":"  ___   .","a":"","h":"","m":"   .","options":["","","",""]},{"id":61,"lv":2,"q":"   ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":62,"lv":2,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":63,"lv":2,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":64,"lv":2,"q":"  ___ .","a":"","h":"","m":"     .","options":["","","",""]},{"id":65,"lv":2,"q":"  ___ .","a":"","h":"","m":"     .","options":["","","",""]},{"id":66,"lv":2,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":67,"lv":2,"q":"  ___   .","a":"","h":"","m":"     .","options":["","","",""]},{"id":68,"lv":2,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":69,"lv":2,"q":" ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":70,"lv":2,"q":"   ___.","a":"","h":"","m":"     .","options":["","","",""]},{"id":71,"lv":2,"q":" ___   .","a":"","h":"","m":"      .","options":["","","",""]},{"id":72,"lv":2,"q":"    ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":73,"lv":2,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":74,"lv":2,"q":" ___   .","a":"","h":"","m":"      .","options":["","","",""]},{"id":75,"lv":2,"q":"  ___.","a":"","h":"","m":"     .","options":["","","",""]},{"id":76,"lv":2,"q":"   ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":77,"lv":2,"q":" ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":78,"lv":2,"q":" ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":79,"lv":2,"q":"  ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":80,"lv":2,"q":"  ___  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":81,"lv":2,"q":" ___   .","a":"","h":"","m":"    .","options":["","","",""]},{"id":82,"lv":2,"q":"  ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":83,"lv":2,"q":"     ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":84,"lv":2,"q":"  ___  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":85,"lv":2,"q":"  ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":86,"lv":2,"q":" ___  .","a":"","h":"","m":"     .","options":["","","",""]},{"id":87,"lv":2,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":88,"lv":2,"q":"    ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":89,"lv":2,"q":"  ___.","a":"","h":"","m":"     .","options":["","","",""]},{"id":90,"lv":2,"q":"   ___  .","a":"","h":"","m":"  .","options":["","","",""]},{"id":91,"lv":2,"q":" ___   .","a":"","h":"","m":"    .","options":["","","",""]},{"id":92,"lv":2,"q":" ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":93,"lv":2,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":94,"lv":2,"q":" ___  .","a":"","h":"","m":"     .","options":["","","",""]},{"id":95,"lv":2,"q":"      ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":96,"lv":2,"q":"   ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":97,"lv":2,"q":"   ___   .","a":"","h":"","m":"    .","options":["","","",""]},{"id":98,"lv":2,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":99,"lv":2,"q":"  ___     .","a":"","h":"","m":"   .","options":["","","",""]},{"id":100,"lv":2,"q":"    ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":101,"lv":2,"q":"     ___  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":102,"lv":2,"q":"   ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":103,"lv":2,"q":"  ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":104,"lv":2,"q":"  ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":105,"lv":2,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":106,"lv":2,"q":"  ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":107,"lv":2,"q":"   ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":108,"lv":2,"q":" ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":109,"lv":2,"q":"  ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":110,"lv":2,"q":"  ___.","a":"","h":"","m":"     .","options":["","","",""]},{"id":111,"lv":2,"q":" ___  .","a":"","h":"","m":"     .","options":["","","",""]},{"id":112,"lv":2,"q":" ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":113,"lv":2,"q":" ___    .","a":"","h":"","m":"   .","options":["","","",""]},{"id":114,"lv":2,"q":"  ___     .","a":"","h":"","m":"    .","options":["","","",""]},{"id":115,"lv":2,"q":"  ___ .","a":" ","h":"","m":" .","options":[" ","","",""]},{"id":116,"lv":2,"q":"   ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":117,"lv":2,"q":"   ___   .","a":"","h":"","m":"    .","options":["","","",""]},{"id":118,"lv":2,"q":" ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":119,"lv":2,"q":" .","a":"","h":"","m":"    .","options":["","","",""]},{"id":120,"lv":2,"q":"  .","a":"","h":"","m":"  .","options":["","","",""]},{"id":121,"lv":3,"q":"  ___   .","a":"","h":"","m":"   .","options":["","","",""]},{"id":122,"lv":3,"q":"  ___  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":123,"lv":3,"q":"  ___  .","a":"","h":"","m":"  .","options":["","","",""]},{"id":124,"lv":3,"q":" ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":125,"lv":3,"q":" ___  .","a":"","h":"","m":"  .","options":["","","",""]},{"id":126,"lv":3,"q":"  ___  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":127,"lv":3,"q":"  ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":128,"lv":3,"q":"   ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":129,"lv":3,"q":" ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":130,"lv":3,"q":"   ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":131,"lv":3,"q":"  ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":132,"lv":3,"q":"  ___.","a":" ","h":"","m":"   .","options":[" "," "," "," "]},{"id":133,"lv":3,"q":"  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":134,"lv":3,"q":"  ___    .","a":"","h":"","m":"  .","options":["","","",""]},{"id":135,"lv":3,"q":"  ___   .","a":"","h":"","m":"   .","options":["","","",""]},{"id":136,"lv":3,"q":"  .","a":"","h":"","m":" .","options":["","","",""]},{"id":137,"lv":3,"q":" ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":138,"lv":3,"q":"  ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":139,"lv":3,"q":"     ___.","a":"","h":"","m":" .","options":["","","",""]},{"id":140,"lv":3,"q":" ___.","a":"","h":"","m":" .","options":["","","",""]},{"id":141,"lv":3,"q":"  ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":142,"lv":3,"q":" ___  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":143,"lv":3,"q":"  ___.","a":"","h":"","m":" .","options":["","","",""]},{"id":144,"lv":3,"q":"  ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":145,"lv":3,"q":" ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":146,"lv":3,"q":"   ___  .","a":"","h":"","m":" .","options":["","","",""]},{"id":147,"lv":3,"q":" ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":148,"lv":3,"q":"  ___ .","a":"","h":"","m":" .","options":["","","",""]},{"id":149,"lv":3,"q":"     ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":150,"lv":3,"q":" ___.","a":"","h":"","m":" .","options":["","","",""]},{"id":151,"lv":3,"q":" ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":152,"lv":3,"q":"  ___   .","a":"","h":"","m":"   .","options":["","","",""]},{"id":153,"lv":3,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":154,"lv":3,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":155,"lv":3,"q":" ___,   .","a":"","h":"","m":"  .","options":["","","",""]},{"id":156,"lv":3,"q":"   ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":157,"lv":3,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":158,"lv":3,"q":"   ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":159,"lv":3,"q":"     ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":160,"lv":3,"q":"  ___   .","a":"","h":"","m":"   .","options":["","","",""]},{"id":161,"lv":3,"q":" ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":162,"lv":3,"q":"  .","a":"","h":"","m":".","options":["","","",""]},{"id":163,"lv":3,"q":"    ___   .","a":"","h":"","m":"   .","options":["","","",""]},{"id":164,"lv":3,"q":" ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":165,"lv":3,"q":"  .","a":"","h":"","m":"  .","options":["","","",""]},{"id":166,"lv":3,"q":" ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":167,"lv":3,"q":" ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":168,"lv":3,"q":"  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":169,"lv":3,"q":" ___ .","a":"","h":"","m":"    .","options":["","","",""]},{"id":170,"lv":3,"q":"  ___.","a":"","h":"","m":".","options":["","","",""]},{"id":171,"lv":3,"q":" ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":172,"lv":3,"q":"  ___  .","a":"","h":"","m":"    .","options":["","","",""]},{"id":173,"lv":3,"q":" ___   .","a":"","h":"","m":"  .","options":["","","",""]},{"id":174,"lv":3,"q":"  ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":175,"lv":3,"q":" ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":176,"lv":3,"q":"     ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":177,"lv":3,"q":"   ___   .","a":"","h":"","m":"  .","options":["","","",""]},{"id":178,"lv":3,"q":"   ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":179,"lv":3,"q":"  ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":180,"lv":3,"q":"  ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":181,"lv":3,"q":" ___ .","a":"","h":"","m":"  .","options":["","","",""]},{"id":182,"lv":3,"q":"   ___ .","a":"","h":"","m":"      .","options":["","","",""]},{"id":183,"lv":3,"q":" ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":184,"lv":3,"q":"  ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":185,"lv":3,"q":"  ___ .","a":"","h":"","m":" .","options":["","","",""]},{"id":186,"lv":3,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":187,"lv":3,"q":"   ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":188,"lv":3,"q":"  ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":189,"lv":3,"q":"  .","a":"","h":"","m":"   .","options":["","","",""]},{"id":190,"lv":3,"q":"  ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":191,"lv":3,"q":"  ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":192,"lv":3,"q":"  ___.","a":"","h":"","m":"    .","options":["","","",""]},{"id":193,"lv":3,"q":"  ___ .","a":"","h":"","m":"   .","options":["","","",""]},{"id":194,"lv":3,"q":"    ___.","a":"","h":"","m":" .","options":["","","",""]},{"id":195,"lv":3,"q":" ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":196,"lv":3,"q":"  ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":197,"lv":3,"q":"  ___.","a":"","h":"","m":"  .","options":["","","",""]},{"id":198,"lv":3,"q":" ___.","a":"","h":"","m":" .","options":["","","",""]},{"id":199,"lv":3,"q":"   ___.","a":"","h":"","m":"   .","options":["","","",""]},{"id":200,"lv":3,"q":" ___  .","a":"","h":"","m":"  .","options":["","","",""]}]');function z0(){const[e,i]=C.useState("start"),[n,a]=C.useState("mixed"),[o,c]=C.useState(0),[d,_]=C.useState(5),[m,f]=C.useState(60),[y,S]=C.useState(60),[b,M]=C.useState(0),[E,D]=C.useState([]),[j,z]=C.useState([]),[H,Z]=C.useState({show:!1,char:"",color:""}),[J,ae]=C.useState([]),[ie,re]=C.useState(""),ve=C.useRef(null),[le,_e]=C.useState(!1),[ye,ee]=C.useState("");C.useEffect(()=>()=>clearInterval(ve.current),[]);const N=k=>{a(k),c(0),_(5),z([]);const Y=Hu.filter(oe=>oe.lv===1).sort(()=>Math.random()-.5),Q=Hu.filter(oe=>oe.lv===2).sort(()=>Math.random()-.5),ne=Hu.filter(oe=>oe.lv===3).sort(()=>Math.random()-.5);D([...Y,...Q,...ne]),M(0),re(""),i("quiz"),X(0,[...Y,...Q,...ne],k)},X=(k,Y,Q=n)=>{k>=Y.length&&(Y.sort(()=>Math.random()-.5),k=0),M(k);const ne=Y[k],oe=Q==="subjective"||Q==="mixed"&&k%5<3,we=oe?60:30;S(we),f(we),!oe&&ne.options&&ae([...ne.options].sort(()=>Math.random()-.5)),re(""),clearInterval(ve.current),ve.current=setInterval(()=>{f(qe=>qe<=.1?(te(Y,k),0):qe-.1)},100)},te=(k,Y)=>{clearInterval(ve.current);const Q=k[Y];W("","text-rose-500"),z(ne=>[...ne,{q:Q.q,a:Q.a,m:Q.m,result:"TIMEOUT"}]),_(ne=>{const oe=ne-1;return oe<=0?setTimeout(()=>ce(),500):setTimeout(()=>X(Y+1,k),500),oe}),k.push(Q)},T=k=>{clearInterval(ve.current);const Y=E[b],Q=k.trim()===Y.a;if(z(ne=>[...ne,{q:Y.q,a:Y.a,m:Y.m,result:Q?"O":"X"}]),Q){const ne=n==="objective"||!G()?2:3;c(oe=>oe+ne),W("","text-green-500"),setTimeout(()=>X(b+1,E),500)}else W("","text-rose-500"),_(ne=>{const oe=ne-1;return oe<=0?setTimeout(()=>ce(),500):setTimeout(()=>X(b+1,E),500),oe}),E.push(Y)},G=()=>n==="subjective"?!0:n==="objective"?!1:b%5<3,W=(k,Y)=>{Z({show:!0,char:k,color:Y}),setTimeout(()=>Z({show:!1,char:"",color:""}),600)},ce=()=>{clearInterval(ve.current),i("result")},U=(k,Y)=>{ee(`AI : "${k}"  "${Y}"()  .  ,   ... (AI  )`),_e(!0)},w=E[b];return g.jsx("div",{"data-id":"proverb-container",className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-indigo-500 to-purple-600 font-sans select-none",children:g.jsxs("div",{"data-id":"proverb-game",className:"bg-white rounded-[2.5rem] p-8 max-w-md w-full shadow-2xl relative overflow-hidden border-4 border-white/50",children:[e==="start"&&g.jsxs("div",{"data-id":"proverb-start",className:"text-center animate-in fade-in slide-in-from-bottom-4 duration-500",children:[g.jsx("h1",{"data-id":"proverb-start-title",className:"text-6xl font-black text-indigo-600 mb-2",children:" "}),g.jsx("p",{"data-id":"proverb-start-subtitle",className:"text-xl text-indigo-400 font-bold mb-8 italic tracking-widest uppercase",children:"Infinite Challenge"}),g.jsxs("div",{"data-id":"proverb-mode-buttons",className:"space-y-4 mb-6",children:[g.jsxs("button",{"data-id":"proverb-subjective-btn",onClick:()=>N("subjective"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white text-2xl font-bold py-4 rounded-2xl border-b-4 border-blue-700 active:border-b-0 active:translate-y-1 transition-all",children:["  ",g.jsx("span",{"data-id":"proverb-subjective-desc",className:"block text-xs font-normal opacity-90",children:"60  (3)"})]}),g.jsxs("button",{"data-id":"proverb-objective-btn",onClick:()=>N("objective"),className:"w-full bg-green-500 hover:bg-green-600 text-white text-2xl font-bold py-4 rounded-2xl border-b-4 border-green-700 active:border-b-0 active:translate-y-1 transition-all",children:["  ",g.jsx("span",{"data-id":"proverb-objective-desc",className:"block text-xs font-normal opacity-90",children:"30  (2)"})]}),g.jsxs("button",{"data-id":"proverb-mixed-btn",onClick:()=>N("mixed"),className:"w-full bg-purple-500 hover:bg-purple-600 text-white text-2xl font-bold py-4 rounded-2xl border-b-4 border-purple-700 active:border-b-0 active:translate-y-1 transition-all",children:["  ",g.jsx("span",{"data-id":"proverb-mixed-desc",className:"block text-xs font-normal opacity-90",children:" 6 :  4 (3)"})]})]})]}),e==="quiz"&&w&&g.jsxs("div",{"data-id":"proverb-quiz",className:"animate-in fade-in duration-300",children:[g.jsx("div",{"data-id":"proverb-timer-bar",className:"w-full bg-indigo-100 h-5 rounded-full mb-4 overflow-hidden border-2 border-indigo-50",children:g.jsx("div",{"data-id":"proverb-timer-fill",className:`h-full transition-all duration-100 ease-linear ${m<5?"bg-gradient-to-r from-red-500 to-rose-400":"bg-gradient-to-r from-cyan-400 to-blue-500"}`,style:{width:`${m/y*100}%`}})}),g.jsxs("div",{"data-id":"proverb-stats",className:"flex justify-between items-center mb-2",children:[g.jsxs("div",{"data-id":"proverb-stats-left",className:"flex flex-col",children:[g.jsxs("span",{"data-id":"proverb-score",className:"text-2xl font-bold text-indigo-600 leading-tight",children:[": ",o]}),g.jsxs("span",{"data-id":"proverb-time",className:`text-xl font-bold font-mono ${m<5?"text-red-500 animate-pulse":"text-gray-500"}`,children:[m.toFixed(1),"s"]})]}),g.jsxs("div",{"data-id":"proverb-stats-right",className:"flex flex-col items-end",children:[g.jsxs("div",{"data-id":"proverb-lives",className:"text-2xl flex gap-1 mb-1",children:["".repeat(d),"".repeat(5-d)]}),g.jsxs("div",{"data-id":"proverb-qnum",className:"px-3 py-0.5 rounded-full bg-indigo-500 text-white text-xs font-bold shadow-sm",children:["Q.",b+1]})]})]}),g.jsxs("div",{"data-id":"proverb-badge-row",className:"flex justify-between items-center mb-4",children:[g.jsx("span",{"data-id":"proverb-type-badge",className:`px-4 py-1 rounded-full text-white font-bold text-sm shadow-md uppercase ${G()?"bg-indigo-600":"bg-green-600"}`,children:G()?"":""}),g.jsx("button",{"data-id":"proverb-giveup-btn",onClick:()=>i("warning"),className:"bg-gray-100 hover:bg-rose-100 text-gray-400 hover:text-rose-500 text-sm font-bold px-4 py-1.5 rounded-full border border-gray-200",children:" "})]}),g.jsxs("div",{"data-id":"proverb-question-card",className:"bg-indigo-50/50 rounded-3xl p-6 mb-4 text-center min-h-[160px] flex flex-col items-center justify-center border-4 border-white shadow-inner relative",children:[g.jsx("h2",{"data-id":"proverb-question-text",className:"text-3xl font-bold text-gray-800 break-keep mb-4 leading-relaxed",children:w.q}),G()&&g.jsxs("div",{"data-id":"proverb-hint",className:"bg-white/60 px-4 py-1 rounded-xl border border-indigo-100",children:[g.jsx("span",{"data-id":"proverb-hint-label",className:"text-indigo-400 text-lg",children:" : "}),g.jsx("span",{"data-id":"proverb-hint-value",className:"text-indigo-600 text-2xl font-bold tracking-widest",children:w.h})]})]}),G()?g.jsxs("div",{"data-id":"proverb-subjective-input",className:"space-y-4",children:[g.jsx("input",{"data-id":"proverb-answer-input",type:"text",value:ie,onChange:k=>re(k.target.value),onKeyDown:k=>k.key==="Enter"&&T(ie),placeholder:" ",className:"w-full p-5 rounded-2xl border-4 border-indigo-100 focus:border-indigo-400 focus:ring-4 focus:ring-indigo-200 outline-none text-center text-3xl font-bold text-indigo-700 bg-white/80 transition-all placeholder:text-indigo-200",autoFocus:!0}),g.jsx("button",{"data-id":"proverb-submit-btn",onClick:()=>T(ie),className:"w-full bg-indigo-500 hover:bg-indigo-600 text-white text-2xl font-bold py-4 rounded-2xl transition-all shadow-lg active:scale-95 border-b-4 border-indigo-700 active:border-b-0 active:translate-y-1",children:" ! "})]}):g.jsx("div",{"data-id":"proverb-objective-options",className:"grid grid-cols-1 gap-3",children:J.map((k,Y)=>g.jsx("button",{"data-id":`proverb-option-${Y}`,onClick:()=>T(k),className:"bg-white hover:bg-indigo-50 border-4 border-indigo-50 hover:border-indigo-300 text-2xl font-bold py-4 rounded-2xl transition-all text-indigo-700 shadow-sm active:scale-95",children:k},Y))})]}),H.show&&g.jsx("div",{"data-id":"proverb-feedback",className:"absolute inset-0 flex items-center justify-center z-50 pointer-events-none",children:g.jsx("div",{"data-id":"proverb-feedback-char",className:`text-[10rem] drop-shadow-2xl animate-bounce ${H.color}`,children:H.char})}),e==="warning"&&g.jsx("div",{"data-id":"proverb-warning-overlay",className:"absolute inset-0 bg-indigo-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-6 animate-in fade-in",children:g.jsxs("div",{"data-id":"proverb-warning-modal",className:"bg-white rounded-[2rem] p-8 w-full max-w-xs text-center shadow-2xl border-4 border-indigo-100",children:[g.jsx("div",{"data-id":"proverb-warning-icon",className:"text-5xl mb-4",children:""}),g.jsx("h3",{"data-id":"proverb-warning-title",className:"text-2xl font-bold text-indigo-900 mb-2",children:" ?"}),g.jsx("button",{"data-id":"proverb-warning-confirm",onClick:()=>ce(),className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-bold py-4 rounded-2xl transition-all shadow-lg mb-3",children:""}),g.jsx("button",{"data-id":"proverb-warning-cancel",onClick:()=>i("quiz"),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold py-3 rounded-2xl",children:""})]})}),e==="result"&&g.jsxs("div",{"data-id":"proverb-result",className:"text-center overflow-y-auto max-h-[85vh] custom-scroll animate-in slide-in-from-right duration-500",children:[g.jsx("h2",{"data-id":"proverb-result-title",className:"text-5xl font-bold text-indigo-600 mb-4",children:" ! "}),g.jsx("div",{"data-id":"proverb-result-icon",className:"text-7xl mb-6",children:""}),g.jsxs("p",{"data-id":"proverb-result-score",className:"text-4xl font-bold text-gray-800 mb-6",children:[" : ",o]}),g.jsxs("div",{"data-id":"proverb-result-history",className:"mt-6 mb-8 px-1 text-left",children:[g.jsx("h3",{"data-id":"proverb-history-title",className:"text-2xl font-bold text-indigo-700 mb-4 italic",children:"  "}),g.jsx("div",{"data-id":"proverb-history-table-wrapper",className:"rounded-2xl border-2 border-indigo-100 overflow-hidden",children:g.jsxs("table",{"data-id":"proverb-history-table",className:"w-full text-left text-sm bg-white",children:[g.jsx("thead",{"data-id":"proverb-history-thead",className:"bg-indigo-100 text-indigo-800 font-bold",children:g.jsxs("tr",{children:[g.jsx("th",{"data-id":"proverb-th-proverb",className:"p-3",children:""}),g.jsx("th",{"data-id":"proverb-th-result",className:"p-3 text-center",children:""})]})}),g.jsx("tbody",{"data-id":"proverb-history-tbody",children:j.map((k,Y)=>g.jsxs("tr",{"data-id":`proverb-history-row-${Y}`,className:"border-b border-indigo-50 last:border-0",children:[g.jsxs("td",{"data-id":`proverb-history-q-${Y}`,className:"p-3 font-bold text-gray-700",children:[k.q.split("___")[0]," ",g.jsx("span",{className:"text-indigo-600 underline decoration-2",children:k.a})," ",k.q.split("___")[1]]}),g.jsx("td",{"data-id":`proverb-history-r-${Y}`,className:`p-3 text-center font-bold text-lg ${k.result==="O"?"text-green-500":"text-red-500"}`,children:k.result==="TIMEOUT"?"":k.result})]},Y))})]})})]}),g.jsx("button",{"data-id":"proverb-ai-hint-btn",onClick:()=>U(" "," "),className:"hidden w-full bg-indigo-50 text-indigo-600 py-3 rounded-2xl border border-indigo-200 font-bold mb-4",children:" AI   ()"}),g.jsx("button",{"data-id":"proverb-retry-btn",onClick:()=>i("start"),className:"w-full bg-indigo-500 hover:bg-indigo-600 text-white text-2xl font-bold py-5 rounded-2xl transition-all shadow-xl hover:scale-105 mb-4",children:"  "})]}),le&&g.jsx("div",{"data-id":"proverb-ai-overlay",className:"fixed inset-0 bg-indigo-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-6",children:g.jsxs("div",{"data-id":"proverb-ai-modal",className:"bg-white rounded-[2.5rem] p-8 w-full max-w-md shadow-2xl border-4 border-indigo-400",children:[g.jsx("h3",{"data-id":"proverb-ai-title",className:"text-3xl font-bold text-indigo-600 mb-4",children:" AI  "}),g.jsx("p",{"data-id":"proverb-ai-content",className:"text-xl text-gray-700 leading-relaxed mb-8",children:ye}),g.jsx("button",{"data-id":"proverb-ai-close-btn",onClick:()=>_e(!1),className:"w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-4 rounded-2xl shadow-lg",children:"! "})]})})]})})}function j2(e){const i="".trim();return i?(i.startsWith("/")?i:`/${i}`).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9/_-]/g,"-").replace(/-+/g,"-").replace(/\/+/g,"/"):""}const U2={"/defense":B0,"/zombie":L0,"/baseball":O0,"/proverb":z0};function q2(){const e=j2(),i=U2[e];return i?g.jsx(ig,{children:g.jsx(eg,{children:g.jsx(Gi,{path:"*",element:g.jsx(i,{})})})}):g.jsx(ig,{children:g.jsxs(eg,{children:[g.jsx(Gi,{path:"/",element:g.jsx(Au,{})}),g.jsx(Gi,{path:"/manager",element:g.jsx(Au,{})}),g.jsx(Gi,{path:"/games",element:g.jsx(ew,{})}),g.jsx(Gi,{path:"/defense",element:g.jsx(B0,{})}),g.jsx(Gi,{path:"/zombie",element:g.jsx(L0,{})}),g.jsx(Gi,{path:"/baseball",element:g.jsx(O0,{})}),g.jsx(Gi,{path:"/proverb",element:g.jsx(z0,{})}),g.jsx(Gi,{path:"*",element:g.jsx(Au,{})})]})})}nb.createRoot(document.getElementById("root")).render(g.jsx(q2,{}));
