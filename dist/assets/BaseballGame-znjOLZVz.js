import{r as n,j as l}from"./index-DuMMiI8Q.js";const c=200,g=650,R=650,C=60,y=5,L=30;function B(){const S=n.useRef(null),m=n.useRef(null),[P,T]=n.useState(0),[M,w]=n.useState(0),[_,N]=n.useState(0),[x,j]=n.useState("MENU"),[p,A]=n.useState({text:"",color:"",visible:!1}),s=n.useRef({ball:null,swingActive:!1,swingFrame:0,isPlaying:!1,width:600,height:800,pitching:!1,pitchFrame:0});n.useEffect(()=>{const a=S.current,e=a.getContext("2d");class b{constructor(t,i){this.reset(t,i)}reset(t,i){this.x=t/2,this.y=c,this.targetX=t/2+(Math.random()*40-20),this.speed=4+Math.random()*6,this.size=y,this.active=!0,this.hit=!1,this.missed=!1,this.opacity=1}update(){if(!this.active)return;const t=g-c,i=(this.y-c)/t;this.y+=this.speed,this.x+=(this.targetX-s.current.width/2)*.02,this.size=Math.max(.1,y+(L-y)*i),this.y>g+100&&!this.hit&&!this.missed&&(this.missed=!0,h()),(this.y>s.current.height+100||this.y<-500)&&(this.active=!1,s.current.isPlaying&&setTimeout(()=>o(),1e3))}draw(t){if(!this.active)return;const i=Math.max(.1,this.size);t.save(),t.globalAlpha=this.opacity,t.beginPath(),t.ellipse(this.x,this.y+10,i,Math.max(.1,i/2),0,0,Math.PI*2),t.fillStyle="rgba(0,0,0,0.2)",t.fill(),t.beginPath(),t.arc(this.x,this.y,i,0,Math.PI*2),t.fillStyle="white",t.fill(),t.strokeStyle="#ddd",t.lineWidth=2,t.stroke(),i>2&&(t.beginPath(),t.arc(this.x-i*.5,this.y,i*.8,-.5,.5),t.strokeStyle="red",t.lineWidth=1,t.stroke(),t.beginPath(),t.arc(this.x+i*.5,this.y,i*.8,Math.PI-.5,Math.PI+.5),t.stroke()),t.restore()}}const o=()=>{s.current.isPlaying&&(s.current.pitching=!0,s.current.pitchFrame=0,setTimeout(()=>{s.current.isPlaying&&(s.current.ball=new b(s.current.width,s.current.height),setTimeout(()=>{s.current.pitching=!1},300))},600))},h=()=>{N(r=>{const t=r+1;return t>=3&&d(),t}),w(0),E("ìŠ¤íŠ¸ë¼ì´í¬!","text-red-500")},d=()=>{s.current.isPlaying=!1,j("GAMEOVER")},u=()=>{const r=s.current.width;s.current.height;const t=r/2;e.fillStyle="#92400e",e.beginPath(),e.moveTo(t,150),e.lineTo(t+250,450),e.lineTo(t,750),e.lineTo(t-250,450),e.closePath(),e.fill(),e.strokeStyle="white",e.lineWidth=3,e.stroke();const i=25;e.fillStyle="white",e.beginPath(),e.moveTo(t,750),e.lineTo(t-i,750-i),e.lineTo(t-i,750-i*2),e.lineTo(t+i,750-i*2),e.lineTo(t+i,750-i),e.closePath(),e.fill(),e.beginPath(),e.arc(t,c+30,40,0,Math.PI*2),e.fillStyle="#78350f",e.fill(),e.beginPath(),e.arc(t,R,C,0,Math.PI*2),e.strokeStyle="rgba(255, 255, 0, 0.3)",e.setLineDash([10,5]),e.stroke(),e.setLineDash([])},f=()=>{const r=s.current.width/2;e.font="60px serif",e.textAlign="center",e.save();let t="ğŸ§";if(s.current.pitching?t="ğŸ™†":s.current.ball&&s.current.ball.active&&!s.current.ball.hit&&(s.current.ball.y-c)/(g-c)<.2&&(t="ğŸ™‹"),e.fillText(t,r,c),e.restore(),e.save(),e.translate(r,g+50),s.current.swingActive){const i=s.current.swingFrame/10*Math.PI-Math.PI/4;e.rotate(i),e.fillText("ğŸ",40,-20)}else e.fillText("ğŸ‘¤",0,0);e.restore()},G=()=>{s.current.ball&&s.current.ball.update(),s.current.swingActive&&(s.current.swingFrame++,s.current.swingFrame>15&&(s.current.swingActive=!1))},z=()=>{(a.width!==window.innerWidth||a.height!==window.innerHeight)&&(a.width=window.innerWidth,a.height=window.innerHeight,s.current.width=a.width,s.current.height=a.height),e.clearRect(0,0,a.width,a.height);const r=e.createRadialGradient(a.width/2,a.height/2,0,a.width/2,a.height/2,a.height);r.addColorStop(0,"#4ade80"),r.addColorStop(1,"#166534"),e.fillStyle=r,e.fillRect(0,0,a.width,a.height),u(),s.current.ball&&s.current.ball.draw(e),f()},I=()=>{s.current.forceSpawn&&(s.current.forceSpawn=!1,o()),G(),z(),m.current=requestAnimationFrame(I)};return m.current=requestAnimationFrame(I),()=>cancelAnimationFrame(m.current)},[]);const E=(a,e)=>{A({text:a,color:e,visible:!0}),setTimeout(()=>A(b=>({...b,visible:!1})),800)},k=()=>{if(!s.current.isPlaying||s.current.swingActive)return;s.current.swingActive=!0,s.current.swingFrame=0;const a=s.current.ball;if(a&&!a.hit&&!a.missed){const e=Math.abs(a.y-R),b=Math.abs(a.x-s.current.width/2);if(e<40&&b<50){a.hit=!0;let o="",h=0,d="",u=M+1;w(f=>(u=f+1,u)),e<10?(o="í™ˆëŸ°!!",h=1e3+u*100,d="text-yellow-400"):e<25?(o="ì•ˆíƒ€!",h=500+u*50,d="text-green-400"):(o="íŒŒìš¸?",h=100,d="text-blue-300"),T(f=>f+h),E(o,d),a.speed=-15,a.targetX=(Math.random()-.5)*1e3}}},F=()=>{T(0),w(0),N(0),j("PLAYING"),s.current.isPlaying=!0,setTimeout(()=>{s.current.isPlaying&&(s.current.ball=null),s.current.ball={active:!1},s.current.ball=null,s.current.forceSpawn=!0},100)},v=()=>{k()};return l.jsxs("div",{"data-id":"baseball-container",className:"relative w-full h-screen bg-slate-900 overflow-hidden select-none touch-manipulation",onMouseDown:v,onTouchStart:v,onKeyDown:a=>{a.code==="Space"&&v()},tabIndex:"0",children:[l.jsx("canvas",{"data-id":"baseball-canvas",ref:S,className:"block w-full h-full"}),l.jsxs("div",{"data-id":"baseball-hud",className:"absolute top-5 left-5 text-white font-bold drop-shadow-lg pointer-events-none",children:[l.jsxs("div",{"data-id":"baseball-score",className:"text-2xl",children:["ì ìˆ˜: ",P]}),l.jsxs("div",{"data-id":"baseball-combo",className:"text-xl text-yellow-400",children:["ì½¤ë³´: ",M]}),l.jsxs("div",{"data-id":"baseball-outs",className:"text-lg text-red-400",children:["ì•„ì›ƒ: ",_," / 3"]})]}),l.jsx("div",{"data-id":"baseball-message",className:`absolute top-1/3 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none transition-opacity duration-200 z-10 ${p.visible?"opacity-100":"opacity-0"}`,children:l.jsx("h2",{"data-id":"baseball-message-text",className:`text-7xl font-black ${p.color} drop-shadow-[0_5px_5px_rgba(0,0,0,1)]`,children:p.text})}),x!=="PLAYING"&&l.jsxs("div",{"data-id":"baseball-menu",className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center text-white z-20",children:[l.jsx("h1",{"data-id":"baseball-title",className:"text-6xl mb-8 font-black text-yellow-400 italic transform -skew-x-12",children:"ë§ˆêµ¬ë§ˆêµ¬ê°“"}),x==="GAMEOVER"&&l.jsxs("div",{"data-id":"baseball-gameover",className:"text-center mb-8 animate-pulse",children:[l.jsx("h2",{"data-id":"baseball-gameover-title",className:"text-4xl text-red-500 font-bold mb-2",children:"GAME OVER"}),l.jsxs("p",{"data-id":"baseball-gameover-score",className:"text-xl",children:["ìµœì¢… ì ìˆ˜: ",P]})]}),l.jsxs("p",{"data-id":"baseball-instructions",className:"text-xl mb-12 text-center px-8 opacity-80",children:["ê³µì´ ë…¸ë€ìƒ‰ ì› ì•ˆì— ë“¤ì–´ì™”ì„ ë•Œ",l.jsx("br",{}),"í™”ë©´ì„ í´ë¦­í•˜ì—¬ ë°°íŠ¸ë¥¼ íœ˜ë‘ë¥´ì„¸ìš”!"]}),l.jsx("div",{"data-id":"baseball-menu-buttons",className:"flex gap-4",children:l.jsx("button",{"data-id":"baseball-start-btn",onClick:a=>{a.stopPropagation(),F()},className:"bg-blue-600 hover:bg-blue-500 text-white px-12 py-4 rounded-full text-2xl font-bold transition-transform active:scale-95 shadow-[0_0_20px_rgba(37,99,235,0.5)]",children:x==="MENU"?"ê²Œì„ ì‹œì‘":"ë‹¤ì‹œ ì‹œì‘"})})]})]})}export{B as default};
